(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function uh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ef={exports:{}},zi={},tf={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cr=Symbol.for("react.element"),ch=Symbol.for("react.portal"),dh=Symbol.for("react.fragment"),fh=Symbol.for("react.strict_mode"),ph=Symbol.for("react.profiler"),mh=Symbol.for("react.provider"),hh=Symbol.for("react.context"),gh=Symbol.for("react.forward_ref"),yh=Symbol.for("react.suspense"),vh=Symbol.for("react.memo"),Eh=Symbol.for("react.lazy"),du=Symbol.iterator;function _h(e){return e===null||typeof e!="object"?null:(e=du&&e[du]||e["@@iterator"],typeof e=="function"?e:null)}var nf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},of=Object.assign,rf={};function Io(e,t,n){this.props=e,this.context=t,this.refs=rf,this.updater=n||nf}Io.prototype.isReactComponent={};Io.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Io.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function sf(){}sf.prototype=Io.prototype;function sa(e,t,n){this.props=e,this.context=t,this.refs=rf,this.updater=n||nf}var la=sa.prototype=new sf;la.constructor=sa;of(la,Io.prototype);la.isPureReactComponent=!0;var fu=Array.isArray,lf=Object.prototype.hasOwnProperty,aa={current:null},af={key:!0,ref:!0,__self:!0,__source:!0};function uf(e,t,n){var o,r={},i=null,s=null;if(t!=null)for(o in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(i=""+t.key),t)lf.call(t,o)&&!af.hasOwnProperty(o)&&(r[o]=t[o]);var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){for(var c=Array(u),d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}if(e&&e.defaultProps)for(o in u=e.defaultProps,u)r[o]===void 0&&(r[o]=u[o]);return{$$typeof:Cr,type:e,key:i,ref:s,props:r,_owner:aa.current}}function Sh(e,t){return{$$typeof:Cr,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ua(e){return typeof e=="object"&&e!==null&&e.$$typeof===Cr}function Th(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var pu=/\/+/g;function Ss(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Th(""+e.key):t.toString(36)}function ei(e,t,n,o,r){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Cr:case ch:s=!0}}if(s)return s=e,r=r(s),e=o===""?"."+Ss(s,0):o,fu(r)?(n="",e!=null&&(n=e.replace(pu,"$&/")+"/"),ei(r,t,n,"",function(d){return d})):r!=null&&(ua(r)&&(r=Sh(r,n+(!r.key||s&&s.key===r.key?"":(""+r.key).replace(pu,"$&/")+"/")+e)),t.push(r)),1;if(s=0,o=o===""?".":o+":",fu(e))for(var u=0;u<e.length;u++){i=e[u];var c=o+Ss(i,u);s+=ei(i,t,n,c,r)}else if(c=_h(e),typeof c=="function")for(e=c.call(e),u=0;!(i=e.next()).done;)i=i.value,c=o+Ss(i,u++),s+=ei(i,t,n,c,r);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Pr(e,t,n){if(e==null)return e;var o=[],r=0;return ei(e,o,"","",function(i){return t.call(n,i,r++)}),o}function Ch(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var We={current:null},ti={transition:null},xh={ReactCurrentDispatcher:We,ReactCurrentBatchConfig:ti,ReactCurrentOwner:aa};function cf(){throw Error("act(...) is not supported in production builds of React.")}te.Children={map:Pr,forEach:function(e,t,n){Pr(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Pr(e,function(){t++}),t},toArray:function(e){return Pr(e,function(t){return t})||[]},only:function(e){if(!ua(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};te.Component=Io;te.Fragment=dh;te.Profiler=ph;te.PureComponent=sa;te.StrictMode=fh;te.Suspense=yh;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xh;te.act=cf;te.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=of({},e.props),r=e.key,i=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,s=aa.current),t.key!==void 0&&(r=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)lf.call(t,c)&&!af.hasOwnProperty(c)&&(o[c]=t[c]===void 0&&u!==void 0?u[c]:t[c])}var c=arguments.length-2;if(c===1)o.children=n;else if(1<c){u=Array(c);for(var d=0;d<c;d++)u[d]=arguments[d+2];o.children=u}return{$$typeof:Cr,type:e.type,key:r,ref:i,props:o,_owner:s}};te.createContext=function(e){return e={$$typeof:hh,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:mh,_context:e},e.Consumer=e};te.createElement=uf;te.createFactory=function(e){var t=uf.bind(null,e);return t.type=e,t};te.createRef=function(){return{current:null}};te.forwardRef=function(e){return{$$typeof:gh,render:e}};te.isValidElement=ua;te.lazy=function(e){return{$$typeof:Eh,_payload:{_status:-1,_result:e},_init:Ch}};te.memo=function(e,t){return{$$typeof:vh,type:e,compare:t===void 0?null:t}};te.startTransition=function(e){var t=ti.transition;ti.transition={};try{e()}finally{ti.transition=t}};te.unstable_act=cf;te.useCallback=function(e,t){return We.current.useCallback(e,t)};te.useContext=function(e){return We.current.useContext(e)};te.useDebugValue=function(){};te.useDeferredValue=function(e){return We.current.useDeferredValue(e)};te.useEffect=function(e,t){return We.current.useEffect(e,t)};te.useId=function(){return We.current.useId()};te.useImperativeHandle=function(e,t,n){return We.current.useImperativeHandle(e,t,n)};te.useInsertionEffect=function(e,t){return We.current.useInsertionEffect(e,t)};te.useLayoutEffect=function(e,t){return We.current.useLayoutEffect(e,t)};te.useMemo=function(e,t){return We.current.useMemo(e,t)};te.useReducer=function(e,t,n){return We.current.useReducer(e,t,n)};te.useRef=function(e){return We.current.useRef(e)};te.useState=function(e){return We.current.useState(e)};te.useSyncExternalStore=function(e,t,n){return We.current.useSyncExternalStore(e,t,n)};te.useTransition=function(){return We.current.useTransition()};te.version="18.3.1";tf.exports=te;var H=tf.exports;const Ih=uh(H);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wh=H,Ah=Symbol.for("react.element"),Nh=Symbol.for("react.fragment"),Rh=Object.prototype.hasOwnProperty,Ph=wh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Mh={key:!0,ref:!0,__self:!0,__source:!0};function df(e,t,n){var o,r={},i=null,s=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(s=t.ref);for(o in t)Rh.call(t,o)&&!Mh.hasOwnProperty(o)&&(r[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps,t)r[o]===void 0&&(r[o]=t[o]);return{$$typeof:Ah,type:e,key:i,ref:s,props:r,_owner:Ph.current}}zi.Fragment=Nh;zi.jsx=df;zi.jsxs=df;ef.exports=zi;var g=ef.exports,Zs={},ff={exports:{}},lt={},pf={exports:{}},mf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(V,z){var K=V.length;V.push(z);e:for(;0<K;){var se=K-1>>>1,pe=V[se];if(0<r(pe,z))V[se]=z,V[K]=pe,K=se;else break e}}function n(V){return V.length===0?null:V[0]}function o(V){if(V.length===0)return null;var z=V[0],K=V.pop();if(K!==z){V[0]=K;e:for(var se=0,pe=V.length,$e=pe>>>1;se<$e;){var xe=2*(se+1)-1,Gt=V[xe],Oe=xe+1,Le=V[Oe];if(0>r(Gt,K))Oe<pe&&0>r(Le,Gt)?(V[se]=Le,V[Oe]=K,se=Oe):(V[se]=Gt,V[xe]=K,se=xe);else if(Oe<pe&&0>r(Le,K))V[se]=Le,V[Oe]=K,se=Oe;else break e}}return z}function r(V,z){var K=V.sortIndex-z.sortIndex;return K!==0?K:V.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var s=Date,u=s.now();e.unstable_now=function(){return s.now()-u}}var c=[],d=[],f=1,m=null,p=3,h=!1,_=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(V){for(var z=n(d);z!==null;){if(z.callback===null)o(d);else if(z.startTime<=V)o(d),z.sortIndex=z.expirationTime,t(c,z);else break;z=n(d)}}function x(V){if(S=!1,E(V),!_)if(n(c)!==null)_=!0,ut(T);else{var z=n(d);z!==null&&Et(x,z.startTime-V)}}function T(V,z){_=!1,S&&(S=!1,y(L),L=-1),h=!0;var K=p;try{for(E(z),m=n(c);m!==null&&(!(m.expirationTime>z)||V&&!J());){var se=m.callback;if(typeof se=="function"){m.callback=null,p=m.priorityLevel;var pe=se(m.expirationTime<=z);z=e.unstable_now(),typeof pe=="function"?m.callback=pe:m===n(c)&&o(c),E(z)}else o(c);m=n(c)}if(m!==null)var $e=!0;else{var xe=n(d);xe!==null&&Et(x,xe.startTime-z),$e=!1}return $e}finally{m=null,p=K,h=!1}}var P=!1,D=null,L=-1,A=5,F=-1;function J(){return!(e.unstable_now()-F<A)}function oe(){if(D!==null){var V=e.unstable_now();F=V;var z=!0;try{z=D(!0,V)}finally{z?re():(P=!1,D=null)}}else P=!1}var re;if(typeof v=="function")re=function(){v(oe)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,ve=Z.port2;Z.port1.onmessage=oe,re=function(){ve.postMessage(null)}}else re=function(){C(oe,0)};function ut(V){D=V,P||(P=!0,re())}function Et(V,z){L=C(function(){V(e.unstable_now())},z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(V){V.callback=null},e.unstable_continueExecution=function(){_||h||(_=!0,ut(T))},e.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<V?Math.floor(1e3/V):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(V){switch(p){case 1:case 2:case 3:var z=3;break;default:z=p}var K=p;p=z;try{return V()}finally{p=K}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(V,z){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var K=p;p=V;try{return z()}finally{p=K}},e.unstable_scheduleCallback=function(V,z,K){var se=e.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?se+K:se):K=se,V){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=K+pe,V={id:f++,callback:z,priorityLevel:V,startTime:K,expirationTime:pe,sortIndex:-1},K>se?(V.sortIndex=K,t(d,V),n(c)===null&&V===n(d)&&(S?(y(L),L=-1):S=!0,Et(x,K-se))):(V.sortIndex=pe,t(c,V),_||h||(_=!0,ut(T))),V},e.unstable_shouldYield=J,e.unstable_wrapCallback=function(V){var z=p;return function(){var K=p;p=z;try{return V.apply(this,arguments)}finally{p=K}}}})(mf);pf.exports=mf;var kh=pf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dh=H,st=kh;function U(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hf=new Set,ir={};function On(e,t){vo(e,t),vo(e+"Capture",t)}function vo(e,t){for(ir[e]=t,e=0;e<t.length;e++)hf.add(t[e])}var zt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),js=Object.prototype.hasOwnProperty,Lh=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,mu={},hu={};function Uh(e){return js.call(hu,e)?!0:js.call(mu,e)?!1:Lh.test(e)?hu[e]=!0:(mu[e]=!0,!1)}function Fh(e,t,n,o){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return o?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Gh(e,t,n,o){if(t===null||typeof t>"u"||Fh(e,t,n,o))return!0;if(o)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ye(e,t,n,o,r,i,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}var De={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){De[e]=new Ye(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];De[t]=new Ye(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){De[e]=new Ye(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){De[e]=new Ye(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){De[e]=new Ye(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){De[e]=new Ye(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){De[e]=new Ye(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){De[e]=new Ye(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){De[e]=new Ye(e,5,!1,e.toLowerCase(),null,!1,!1)});var ca=/[\-:]([a-z])/g;function da(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ca,da);De[t]=new Ye(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ca,da);De[t]=new Ye(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ca,da);De[t]=new Ye(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){De[e]=new Ye(e,1,!1,e.toLowerCase(),null,!1,!1)});De.xlinkHref=new Ye("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){De[e]=new Ye(e,1,!1,e.toLowerCase(),null,!0,!0)});function fa(e,t,n,o){var r=De.hasOwnProperty(t)?De[t]:null;(r!==null?r.type!==0:o||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Gh(t,n,r,o)&&(n=null),o||r===null?Uh(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=n===null?r.type===3?!1:"":n:(t=r.attributeName,o=r.attributeNamespace,n===null?e.removeAttribute(t):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,o?e.setAttributeNS(o,t,n):e.setAttribute(t,n))))}var Qt=Dh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Mr=Symbol.for("react.element"),Kn=Symbol.for("react.portal"),Qn=Symbol.for("react.fragment"),pa=Symbol.for("react.strict_mode"),el=Symbol.for("react.profiler"),gf=Symbol.for("react.provider"),yf=Symbol.for("react.context"),ma=Symbol.for("react.forward_ref"),tl=Symbol.for("react.suspense"),nl=Symbol.for("react.suspense_list"),ha=Symbol.for("react.memo"),on=Symbol.for("react.lazy"),vf=Symbol.for("react.offscreen"),gu=Symbol.iterator;function Do(e){return e===null||typeof e!="object"?null:(e=gu&&e[gu]||e["@@iterator"],typeof e=="function"?e:null)}var ye=Object.assign,Ts;function bo(e){if(Ts===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ts=t&&t[1]||""}return`
`+Ts+e}var Cs=!1;function xs(e,t){if(!e||Cs)return"";Cs=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var o=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){o=d}e.call(t.prototype)}else{try{throw Error()}catch(d){o=d}e()}}catch(d){if(d&&o&&typeof d.stack=="string"){for(var r=d.stack.split(`
`),i=o.stack.split(`
`),s=r.length-1,u=i.length-1;1<=s&&0<=u&&r[s]!==i[u];)u--;for(;1<=s&&0<=u;s--,u--)if(r[s]!==i[u]){if(s!==1||u!==1)do if(s--,u--,0>u||r[s]!==i[u]){var c=`
`+r[s].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=s&&0<=u);break}}}finally{Cs=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?bo(e):""}function Vh(e){switch(e.tag){case 5:return bo(e.type);case 16:return bo("Lazy");case 13:return bo("Suspense");case 19:return bo("SuspenseList");case 0:case 2:case 15:return e=xs(e.type,!1),e;case 11:return e=xs(e.type.render,!1),e;case 1:return e=xs(e.type,!0),e;default:return""}}function ol(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Qn:return"Fragment";case Kn:return"Portal";case el:return"Profiler";case pa:return"StrictMode";case tl:return"Suspense";case nl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case yf:return(e.displayName||"Context")+".Consumer";case gf:return(e._context.displayName||"Context")+".Provider";case ma:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ha:return t=e.displayName||null,t!==null?t:ol(e.type)||"Memo";case on:t=e._payload,e=e._init;try{return ol(e(t))}catch{}}return null}function Hh(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ol(t);case 8:return t===pa?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function En(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ef(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Bh(e){var t=Ef(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(s){o=""+s,i.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return o},setValue:function(s){o=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function kr(e){e._valueTracker||(e._valueTracker=Bh(e))}function _f(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),o="";return e&&(o=Ef(e)?e.checked?"true":"false":e.value),e=o,e!==n?(t.setValue(e),!0):!1}function hi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function rl(e,t){var n=t.checked;return ye({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function yu(e,t){var n=t.defaultValue==null?"":t.defaultValue,o=t.checked!=null?t.checked:t.defaultChecked;n=En(t.value!=null?t.value:n),e._wrapperState={initialChecked:o,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Sf(e,t){t=t.checked,t!=null&&fa(e,"checked",t,!1)}function il(e,t){Sf(e,t);var n=En(t.value),o=t.type;if(n!=null)o==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?sl(e,t.type,n):t.hasOwnProperty("defaultValue")&&sl(e,t.type,En(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function vu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var o=t.type;if(!(o!=="submit"&&o!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function sl(e,t,n){(t!=="number"||hi(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var zo=Array.isArray;function uo(e,t,n,o){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&o&&(e[n].defaultSelected=!0)}else{for(n=""+En(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,o&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function ll(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(U(91));return ye({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Eu(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(U(92));if(zo(n)){if(1<n.length)throw Error(U(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:En(n)}}function Tf(e,t){var n=En(t.value),o=En(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),o!=null&&(e.defaultValue=""+o)}function _u(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Cf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function al(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Cf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Dr,xf=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,o,r){MSApp.execUnsafeLocalFunction(function(){return e(t,n,o,r)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Dr=Dr||document.createElement("div"),Dr.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Dr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function sr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ko={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$h=["Webkit","ms","Moz","O"];Object.keys(Ko).forEach(function(e){$h.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ko[t]=Ko[e]})});function If(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ko.hasOwnProperty(e)&&Ko[e]?(""+t).trim():t+"px"}function wf(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var o=n.indexOf("--")===0,r=If(n,t[n],o);n==="float"&&(n="cssFloat"),o?e.setProperty(n,r):e[n]=r}}var Oh=ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ul(e,t){if(t){if(Oh[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(U(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(U(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(U(61))}if(t.style!=null&&typeof t.style!="object")throw Error(U(62))}}function cl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dl=null;function ga(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var fl=null,co=null,fo=null;function Su(e){if(e=wr(e)){if(typeof fl!="function")throw Error(U(280));var t=e.stateNode;t&&(t=Qi(t),fl(e.stateNode,e.type,t))}}function Af(e){co?fo?fo.push(e):fo=[e]:co=e}function Nf(){if(co){var e=co,t=fo;if(fo=co=null,Su(e),t)for(e=0;e<t.length;e++)Su(t[e])}}function Rf(e,t){return e(t)}function Pf(){}var Is=!1;function Mf(e,t,n){if(Is)return e(t,n);Is=!0;try{return Rf(e,t,n)}finally{Is=!1,(co!==null||fo!==null)&&(Pf(),Nf())}}function lr(e,t){var n=e.stateNode;if(n===null)return null;var o=Qi(n);if(o===null)return null;n=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(U(231,t,typeof n));return n}var pl=!1;if(zt)try{var Lo={};Object.defineProperty(Lo,"passive",{get:function(){pl=!0}}),window.addEventListener("test",Lo,Lo),window.removeEventListener("test",Lo,Lo)}catch{pl=!1}function qh(e,t,n,o,r,i,s,u,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(f){this.onError(f)}}var Qo=!1,gi=null,yi=!1,ml=null,bh={onError:function(e){Qo=!0,gi=e}};function zh(e,t,n,o,r,i,s,u,c){Qo=!1,gi=null,qh.apply(bh,arguments)}function Jh(e,t,n,o,r,i,s,u,c){if(zh.apply(this,arguments),Qo){if(Qo){var d=gi;Qo=!1,gi=null}else throw Error(U(198));yi||(yi=!0,ml=d)}}function qn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function kf(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Tu(e){if(qn(e)!==e)throw Error(U(188))}function Wh(e){var t=e.alternate;if(!t){if(t=qn(e),t===null)throw Error(U(188));return t!==e?null:e}for(var n=e,o=t;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(o=r.return,o!==null){n=o;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return Tu(r),e;if(i===o)return Tu(r),t;i=i.sibling}throw Error(U(188))}if(n.return!==o.return)n=r,o=i;else{for(var s=!1,u=r.child;u;){if(u===n){s=!0,n=r,o=i;break}if(u===o){s=!0,o=r,n=i;break}u=u.sibling}if(!s){for(u=i.child;u;){if(u===n){s=!0,n=i,o=r;break}if(u===o){s=!0,o=i,n=r;break}u=u.sibling}if(!s)throw Error(U(189))}}if(n.alternate!==o)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?e:t}function Df(e){return e=Wh(e),e!==null?Lf(e):null}function Lf(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Lf(e);if(t!==null)return t;e=e.sibling}return null}var Uf=st.unstable_scheduleCallback,Cu=st.unstable_cancelCallback,Yh=st.unstable_shouldYield,Kh=st.unstable_requestPaint,_e=st.unstable_now,Qh=st.unstable_getCurrentPriorityLevel,ya=st.unstable_ImmediatePriority,Ff=st.unstable_UserBlockingPriority,vi=st.unstable_NormalPriority,Xh=st.unstable_LowPriority,Gf=st.unstable_IdlePriority,Ji=null,Ut=null;function Zh(e){if(Ut&&typeof Ut.onCommitFiberRoot=="function")try{Ut.onCommitFiberRoot(Ji,e,void 0,(e.current.flags&128)===128)}catch{}}var It=Math.clz32?Math.clz32:tg,jh=Math.log,eg=Math.LN2;function tg(e){return e>>>=0,e===0?32:31-(jh(e)/eg|0)|0}var Lr=64,Ur=4194304;function Jo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ei(e,t){var n=e.pendingLanes;if(n===0)return 0;var o=0,r=e.suspendedLanes,i=e.pingedLanes,s=n&268435455;if(s!==0){var u=s&~r;u!==0?o=Jo(u):(i&=s,i!==0&&(o=Jo(i)))}else s=n&~r,s!==0?o=Jo(s):i!==0&&(o=Jo(i));if(o===0)return 0;if(t!==0&&t!==o&&!(t&r)&&(r=o&-o,i=t&-t,r>=i||r===16&&(i&4194240)!==0))return t;if(o&4&&(o|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=o;0<t;)n=31-It(t),r=1<<n,o|=e[n],t&=~r;return o}function ng(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function og(e,t){for(var n=e.suspendedLanes,o=e.pingedLanes,r=e.expirationTimes,i=e.pendingLanes;0<i;){var s=31-It(i),u=1<<s,c=r[s];c===-1?(!(u&n)||u&o)&&(r[s]=ng(u,t)):c<=t&&(e.expiredLanes|=u),i&=~u}}function hl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Vf(){var e=Lr;return Lr<<=1,!(Lr&4194240)&&(Lr=64),e}function ws(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function xr(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-It(t),e[t]=n}function rg(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-It(n),i=1<<r;t[r]=0,o[r]=-1,e[r]=-1,n&=~i}}function va(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var o=31-It(n),r=1<<o;r&t|e[o]&t&&(e[o]|=t),n&=~r}}var le=0;function Hf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Bf,Ea,$f,Of,qf,gl=!1,Fr=[],dn=null,fn=null,pn=null,ar=new Map,ur=new Map,sn=[],ig="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xu(e,t){switch(e){case"focusin":case"focusout":dn=null;break;case"dragenter":case"dragleave":fn=null;break;case"mouseover":case"mouseout":pn=null;break;case"pointerover":case"pointerout":ar.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ur.delete(t.pointerId)}}function Uo(e,t,n,o,r,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:o,nativeEvent:i,targetContainers:[r]},t!==null&&(t=wr(t),t!==null&&Ea(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function sg(e,t,n,o,r){switch(t){case"focusin":return dn=Uo(dn,e,t,n,o,r),!0;case"dragenter":return fn=Uo(fn,e,t,n,o,r),!0;case"mouseover":return pn=Uo(pn,e,t,n,o,r),!0;case"pointerover":var i=r.pointerId;return ar.set(i,Uo(ar.get(i)||null,e,t,n,o,r)),!0;case"gotpointercapture":return i=r.pointerId,ur.set(i,Uo(ur.get(i)||null,e,t,n,o,r)),!0}return!1}function bf(e){var t=kn(e.target);if(t!==null){var n=qn(t);if(n!==null){if(t=n.tag,t===13){if(t=kf(n),t!==null){e.blockedOn=t,qf(e.priority,function(){$f(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ni(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=yl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var o=new n.constructor(n.type,n);dl=o,n.target.dispatchEvent(o),dl=null}else return t=wr(n),t!==null&&Ea(t),e.blockedOn=n,!1;t.shift()}return!0}function Iu(e,t,n){ni(e)&&n.delete(t)}function lg(){gl=!1,dn!==null&&ni(dn)&&(dn=null),fn!==null&&ni(fn)&&(fn=null),pn!==null&&ni(pn)&&(pn=null),ar.forEach(Iu),ur.forEach(Iu)}function Fo(e,t){e.blockedOn===t&&(e.blockedOn=null,gl||(gl=!0,st.unstable_scheduleCallback(st.unstable_NormalPriority,lg)))}function cr(e){function t(r){return Fo(r,e)}if(0<Fr.length){Fo(Fr[0],e);for(var n=1;n<Fr.length;n++){var o=Fr[n];o.blockedOn===e&&(o.blockedOn=null)}}for(dn!==null&&Fo(dn,e),fn!==null&&Fo(fn,e),pn!==null&&Fo(pn,e),ar.forEach(t),ur.forEach(t),n=0;n<sn.length;n++)o=sn[n],o.blockedOn===e&&(o.blockedOn=null);for(;0<sn.length&&(n=sn[0],n.blockedOn===null);)bf(n),n.blockedOn===null&&sn.shift()}var po=Qt.ReactCurrentBatchConfig,_i=!0;function ag(e,t,n,o){var r=le,i=po.transition;po.transition=null;try{le=1,_a(e,t,n,o)}finally{le=r,po.transition=i}}function ug(e,t,n,o){var r=le,i=po.transition;po.transition=null;try{le=4,_a(e,t,n,o)}finally{le=r,po.transition=i}}function _a(e,t,n,o){if(_i){var r=yl(e,t,n,o);if(r===null)Fs(e,t,o,Si,n),xu(e,o);else if(sg(r,e,t,n,o))o.stopPropagation();else if(xu(e,o),t&4&&-1<ig.indexOf(e)){for(;r!==null;){var i=wr(r);if(i!==null&&Bf(i),i=yl(e,t,n,o),i===null&&Fs(e,t,o,Si,n),i===r)break;r=i}r!==null&&o.stopPropagation()}else Fs(e,t,o,null,n)}}var Si=null;function yl(e,t,n,o){if(Si=null,e=ga(o),e=kn(e),e!==null)if(t=qn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=kf(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Si=e,null}function zf(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qh()){case ya:return 1;case Ff:return 4;case vi:case Xh:return 16;case Gf:return 536870912;default:return 16}default:return 16}}var an=null,Sa=null,oi=null;function Jf(){if(oi)return oi;var e,t=Sa,n=t.length,o,r="value"in an?an.value:an.textContent,i=r.length;for(e=0;e<n&&t[e]===r[e];e++);var s=n-e;for(o=1;o<=s&&t[n-o]===r[i-o];o++);return oi=r.slice(e,1<o?1-o:void 0)}function ri(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Gr(){return!0}function wu(){return!1}function at(e){function t(n,o,r,i,s){this._reactName=n,this._targetInst=r,this.type=o,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(n=e[u],this[u]=n?n(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Gr:wu,this.isPropagationStopped=wu,this}return ye(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Gr)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Gr)},persist:function(){},isPersistent:Gr}),t}var wo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ta=at(wo),Ir=ye({},wo,{view:0,detail:0}),cg=at(Ir),As,Ns,Go,Wi=ye({},Ir,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ca,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Go&&(Go&&e.type==="mousemove"?(As=e.screenX-Go.screenX,Ns=e.screenY-Go.screenY):Ns=As=0,Go=e),As)},movementY:function(e){return"movementY"in e?e.movementY:Ns}}),Au=at(Wi),dg=ye({},Wi,{dataTransfer:0}),fg=at(dg),pg=ye({},Ir,{relatedTarget:0}),Rs=at(pg),mg=ye({},wo,{animationName:0,elapsedTime:0,pseudoElement:0}),hg=at(mg),gg=ye({},wo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yg=at(gg),vg=ye({},wo,{data:0}),Nu=at(vg),Eg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_g={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tg(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Sg[e])?!!t[e]:!1}function Ca(){return Tg}var Cg=ye({},Ir,{key:function(e){if(e.key){var t=Eg[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ri(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?_g[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ca,charCode:function(e){return e.type==="keypress"?ri(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ri(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),xg=at(Cg),Ig=ye({},Wi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ru=at(Ig),wg=ye({},Ir,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ca}),Ag=at(wg),Ng=ye({},wo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rg=at(Ng),Pg=ye({},Wi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mg=at(Pg),kg=[9,13,27,32],xa=zt&&"CompositionEvent"in window,Xo=null;zt&&"documentMode"in document&&(Xo=document.documentMode);var Dg=zt&&"TextEvent"in window&&!Xo,Wf=zt&&(!xa||Xo&&8<Xo&&11>=Xo),Pu=" ",Mu=!1;function Yf(e,t){switch(e){case"keyup":return kg.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Xn=!1;function Lg(e,t){switch(e){case"compositionend":return Kf(t);case"keypress":return t.which!==32?null:(Mu=!0,Pu);case"textInput":return e=t.data,e===Pu&&Mu?null:e;default:return null}}function Ug(e,t){if(Xn)return e==="compositionend"||!xa&&Yf(e,t)?(e=Jf(),oi=Sa=an=null,Xn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Wf&&t.locale!=="ko"?null:t.data;default:return null}}var Fg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ku(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Fg[e.type]:t==="textarea"}function Qf(e,t,n,o){Af(o),t=Ti(t,"onChange"),0<t.length&&(n=new Ta("onChange","change",null,n,o),e.push({event:n,listeners:t}))}var Zo=null,dr=null;function Gg(e){lp(e,0)}function Yi(e){var t=eo(e);if(_f(t))return e}function Vg(e,t){if(e==="change")return t}var Xf=!1;if(zt){var Ps;if(zt){var Ms="oninput"in document;if(!Ms){var Du=document.createElement("div");Du.setAttribute("oninput","return;"),Ms=typeof Du.oninput=="function"}Ps=Ms}else Ps=!1;Xf=Ps&&(!document.documentMode||9<document.documentMode)}function Lu(){Zo&&(Zo.detachEvent("onpropertychange",Zf),dr=Zo=null)}function Zf(e){if(e.propertyName==="value"&&Yi(dr)){var t=[];Qf(t,dr,e,ga(e)),Mf(Gg,t)}}function Hg(e,t,n){e==="focusin"?(Lu(),Zo=t,dr=n,Zo.attachEvent("onpropertychange",Zf)):e==="focusout"&&Lu()}function Bg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Yi(dr)}function $g(e,t){if(e==="click")return Yi(t)}function Og(e,t){if(e==="input"||e==="change")return Yi(t)}function qg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Rt=typeof Object.is=="function"?Object.is:qg;function fr(e,t){if(Rt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(o=0;o<n.length;o++){var r=n[o];if(!js.call(t,r)||!Rt(e[r],t[r]))return!1}return!0}function Uu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Fu(e,t){var n=Uu(e);e=0;for(var o;n;){if(n.nodeType===3){if(o=e+n.textContent.length,e<=t&&o>=t)return{node:n,offset:t-e};e=o}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Uu(n)}}function jf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?jf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ep(){for(var e=window,t=hi();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=hi(e.document)}return t}function Ia(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function bg(e){var t=ep(),n=e.focusedElem,o=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&jf(n.ownerDocument.documentElement,n)){if(o!==null&&Ia(n)){if(t=o.start,e=o.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var r=n.textContent.length,i=Math.min(o.start,r);o=o.end===void 0?i:Math.min(o.end,r),!e.extend&&i>o&&(r=o,o=i,i=r),r=Fu(n,i);var s=Fu(n,o);r&&s&&(e.rangeCount!==1||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(r.node,r.offset),e.removeAllRanges(),i>o?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var zg=zt&&"documentMode"in document&&11>=document.documentMode,Zn=null,vl=null,jo=null,El=!1;function Gu(e,t,n){var o=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;El||Zn==null||Zn!==hi(o)||(o=Zn,"selectionStart"in o&&Ia(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),jo&&fr(jo,o)||(jo=o,o=Ti(vl,"onSelect"),0<o.length&&(t=new Ta("onSelect","select",null,t,n),e.push({event:t,listeners:o}),t.target=Zn)))}function Vr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var jn={animationend:Vr("Animation","AnimationEnd"),animationiteration:Vr("Animation","AnimationIteration"),animationstart:Vr("Animation","AnimationStart"),transitionend:Vr("Transition","TransitionEnd")},ks={},tp={};zt&&(tp=document.createElement("div").style,"AnimationEvent"in window||(delete jn.animationend.animation,delete jn.animationiteration.animation,delete jn.animationstart.animation),"TransitionEvent"in window||delete jn.transitionend.transition);function Ki(e){if(ks[e])return ks[e];if(!jn[e])return e;var t=jn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in tp)return ks[e]=t[n];return e}var np=Ki("animationend"),op=Ki("animationiteration"),rp=Ki("animationstart"),ip=Ki("transitionend"),sp=new Map,Vu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sn(e,t){sp.set(e,t),On(t,[e])}for(var Ds=0;Ds<Vu.length;Ds++){var Ls=Vu[Ds],Jg=Ls.toLowerCase(),Wg=Ls[0].toUpperCase()+Ls.slice(1);Sn(Jg,"on"+Wg)}Sn(np,"onAnimationEnd");Sn(op,"onAnimationIteration");Sn(rp,"onAnimationStart");Sn("dblclick","onDoubleClick");Sn("focusin","onFocus");Sn("focusout","onBlur");Sn(ip,"onTransitionEnd");vo("onMouseEnter",["mouseout","mouseover"]);vo("onMouseLeave",["mouseout","mouseover"]);vo("onPointerEnter",["pointerout","pointerover"]);vo("onPointerLeave",["pointerout","pointerover"]);On("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));On("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));On("onBeforeInput",["compositionend","keypress","textInput","paste"]);On("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));On("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));On("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yg=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wo));function Hu(e,t,n){var o=e.type||"unknown-event";e.currentTarget=n,Jh(o,t,void 0,e),e.currentTarget=null}function lp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var o=e[n],r=o.event;o=o.listeners;e:{var i=void 0;if(t)for(var s=o.length-1;0<=s;s--){var u=o[s],c=u.instance,d=u.currentTarget;if(u=u.listener,c!==i&&r.isPropagationStopped())break e;Hu(r,u,d),i=c}else for(s=0;s<o.length;s++){if(u=o[s],c=u.instance,d=u.currentTarget,u=u.listener,c!==i&&r.isPropagationStopped())break e;Hu(r,u,d),i=c}}}if(yi)throw e=ml,yi=!1,ml=null,e}function ue(e,t){var n=t[xl];n===void 0&&(n=t[xl]=new Set);var o=e+"__bubble";n.has(o)||(ap(t,e,2,!1),n.add(o))}function Us(e,t,n){var o=0;t&&(o|=4),ap(n,e,o,t)}var Hr="_reactListening"+Math.random().toString(36).slice(2);function pr(e){if(!e[Hr]){e[Hr]=!0,hf.forEach(function(n){n!=="selectionchange"&&(Yg.has(n)||Us(n,!1,e),Us(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Hr]||(t[Hr]=!0,Us("selectionchange",!1,t))}}function ap(e,t,n,o){switch(zf(t)){case 1:var r=ag;break;case 4:r=ug;break;default:r=_a}n=r.bind(null,t,n,e),r=void 0,!pl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),o?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Fs(e,t,n,o,r){var i=o;if(!(t&1)&&!(t&2)&&o!==null)e:for(;;){if(o===null)return;var s=o.tag;if(s===3||s===4){var u=o.stateNode.containerInfo;if(u===r||u.nodeType===8&&u.parentNode===r)break;if(s===4)for(s=o.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;s=s.return}for(;u!==null;){if(s=kn(u),s===null)return;if(c=s.tag,c===5||c===6){o=i=s;continue e}u=u.parentNode}}o=o.return}Mf(function(){var d=i,f=ga(n),m=[];e:{var p=sp.get(e);if(p!==void 0){var h=Ta,_=e;switch(e){case"keypress":if(ri(n)===0)break e;case"keydown":case"keyup":h=xg;break;case"focusin":_="focus",h=Rs;break;case"focusout":_="blur",h=Rs;break;case"beforeblur":case"afterblur":h=Rs;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Au;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=fg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Ag;break;case np:case op:case rp:h=hg;break;case ip:h=Rg;break;case"scroll":h=cg;break;case"wheel":h=Mg;break;case"copy":case"cut":case"paste":h=yg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Ru}var S=(t&4)!==0,C=!S&&e==="scroll",y=S?p!==null?p+"Capture":null:p;S=[];for(var v=d,E;v!==null;){E=v;var x=E.stateNode;if(E.tag===5&&x!==null&&(E=x,y!==null&&(x=lr(v,y),x!=null&&S.push(mr(v,x,E)))),C)break;v=v.return}0<S.length&&(p=new h(p,_,null,n,f),m.push({event:p,listeners:S}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",p&&n!==dl&&(_=n.relatedTarget||n.fromElement)&&(kn(_)||_[Jt]))break e;if((h||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,h?(_=n.relatedTarget||n.toElement,h=d,_=_?kn(_):null,_!==null&&(C=qn(_),_!==C||_.tag!==5&&_.tag!==6)&&(_=null)):(h=null,_=d),h!==_)){if(S=Au,x="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(S=Ru,x="onPointerLeave",y="onPointerEnter",v="pointer"),C=h==null?p:eo(h),E=_==null?p:eo(_),p=new S(x,v+"leave",h,n,f),p.target=C,p.relatedTarget=E,x=null,kn(f)===d&&(S=new S(y,v+"enter",_,n,f),S.target=E,S.relatedTarget=C,x=S),C=x,h&&_)t:{for(S=h,y=_,v=0,E=S;E;E=Wn(E))v++;for(E=0,x=y;x;x=Wn(x))E++;for(;0<v-E;)S=Wn(S),v--;for(;0<E-v;)y=Wn(y),E--;for(;v--;){if(S===y||y!==null&&S===y.alternate)break t;S=Wn(S),y=Wn(y)}S=null}else S=null;h!==null&&Bu(m,p,h,S,!1),_!==null&&C!==null&&Bu(m,C,_,S,!0)}}e:{if(p=d?eo(d):window,h=p.nodeName&&p.nodeName.toLowerCase(),h==="select"||h==="input"&&p.type==="file")var T=Vg;else if(ku(p))if(Xf)T=Og;else{T=Bg;var P=Hg}else(h=p.nodeName)&&h.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(T=$g);if(T&&(T=T(e,d))){Qf(m,T,n,f);break e}P&&P(e,p,d),e==="focusout"&&(P=p._wrapperState)&&P.controlled&&p.type==="number"&&sl(p,"number",p.value)}switch(P=d?eo(d):window,e){case"focusin":(ku(P)||P.contentEditable==="true")&&(Zn=P,vl=d,jo=null);break;case"focusout":jo=vl=Zn=null;break;case"mousedown":El=!0;break;case"contextmenu":case"mouseup":case"dragend":El=!1,Gu(m,n,f);break;case"selectionchange":if(zg)break;case"keydown":case"keyup":Gu(m,n,f)}var D;if(xa)e:{switch(e){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else Xn?Yf(e,n)&&(L="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(L="onCompositionStart");L&&(Wf&&n.locale!=="ko"&&(Xn||L!=="onCompositionStart"?L==="onCompositionEnd"&&Xn&&(D=Jf()):(an=f,Sa="value"in an?an.value:an.textContent,Xn=!0)),P=Ti(d,L),0<P.length&&(L=new Nu(L,e,null,n,f),m.push({event:L,listeners:P}),D?L.data=D:(D=Kf(n),D!==null&&(L.data=D)))),(D=Dg?Lg(e,n):Ug(e,n))&&(d=Ti(d,"onBeforeInput"),0<d.length&&(f=new Nu("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:d}),f.data=D))}lp(m,t)})}function mr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ti(e,t){for(var n=t+"Capture",o=[];e!==null;){var r=e,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=lr(e,n),i!=null&&o.unshift(mr(e,i,r)),i=lr(e,t),i!=null&&o.push(mr(e,i,r))),e=e.return}return o}function Wn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Bu(e,t,n,o,r){for(var i=t._reactName,s=[];n!==null&&n!==o;){var u=n,c=u.alternate,d=u.stateNode;if(c!==null&&c===o)break;u.tag===5&&d!==null&&(u=d,r?(c=lr(n,i),c!=null&&s.unshift(mr(n,c,u))):r||(c=lr(n,i),c!=null&&s.push(mr(n,c,u)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var Kg=/\r\n?/g,Qg=/\u0000|\uFFFD/g;function $u(e){return(typeof e=="string"?e:""+e).replace(Kg,`
`).replace(Qg,"")}function Br(e,t,n){if(t=$u(t),$u(e)!==t&&n)throw Error(U(425))}function Ci(){}var _l=null,Sl=null;function Tl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Cl=typeof setTimeout=="function"?setTimeout:void 0,Xg=typeof clearTimeout=="function"?clearTimeout:void 0,Ou=typeof Promise=="function"?Promise:void 0,Zg=typeof queueMicrotask=="function"?queueMicrotask:typeof Ou<"u"?function(e){return Ou.resolve(null).then(e).catch(jg)}:Cl;function jg(e){setTimeout(function(){throw e})}function Gs(e,t){var n=t,o=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(o===0){e.removeChild(r),cr(t);return}o--}else n!=="$"&&n!=="$?"&&n!=="$!"||o++;n=r}while(n);cr(t)}function mn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function qu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ao=Math.random().toString(36).slice(2),Lt="__reactFiber$"+Ao,hr="__reactProps$"+Ao,Jt="__reactContainer$"+Ao,xl="__reactEvents$"+Ao,ey="__reactListeners$"+Ao,ty="__reactHandles$"+Ao;function kn(e){var t=e[Lt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Jt]||n[Lt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=qu(e);e!==null;){if(n=e[Lt])return n;e=qu(e)}return t}e=n,n=e.parentNode}return null}function wr(e){return e=e[Lt]||e[Jt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function eo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(U(33))}function Qi(e){return e[hr]||null}var Il=[],to=-1;function Tn(e){return{current:e}}function ce(e){0>to||(e.current=Il[to],Il[to]=null,to--)}function ae(e,t){to++,Il[to]=e.current,e.current=t}var _n={},Be=Tn(_n),je=Tn(!1),Gn=_n;function Eo(e,t){var n=e.type.contextTypes;if(!n)return _n;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===t)return o.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in n)r[i]=t[i];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function et(e){return e=e.childContextTypes,e!=null}function xi(){ce(je),ce(Be)}function bu(e,t,n){if(Be.current!==_n)throw Error(U(168));ae(Be,t),ae(je,n)}function up(e,t,n){var o=e.stateNode;if(t=t.childContextTypes,typeof o.getChildContext!="function")return n;o=o.getChildContext();for(var r in o)if(!(r in t))throw Error(U(108,Hh(e)||"Unknown",r));return ye({},n,o)}function Ii(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||_n,Gn=Be.current,ae(Be,e),ae(je,je.current),!0}function zu(e,t,n){var o=e.stateNode;if(!o)throw Error(U(169));n?(e=up(e,t,Gn),o.__reactInternalMemoizedMergedChildContext=e,ce(je),ce(Be),ae(Be,e)):ce(je),ae(je,n)}var $t=null,Xi=!1,Vs=!1;function cp(e){$t===null?$t=[e]:$t.push(e)}function ny(e){Xi=!0,cp(e)}function Cn(){if(!Vs&&$t!==null){Vs=!0;var e=0,t=le;try{var n=$t;for(le=1;e<n.length;e++){var o=n[e];do o=o(!0);while(o!==null)}$t=null,Xi=!1}catch(r){throw $t!==null&&($t=$t.slice(e+1)),Uf(ya,Cn),r}finally{le=t,Vs=!1}}return null}var no=[],oo=0,wi=null,Ai=0,dt=[],ft=0,Vn=null,Ot=1,qt="";function Nn(e,t){no[oo++]=Ai,no[oo++]=wi,wi=e,Ai=t}function dp(e,t,n){dt[ft++]=Ot,dt[ft++]=qt,dt[ft++]=Vn,Vn=e;var o=Ot;e=qt;var r=32-It(o)-1;o&=~(1<<r),n+=1;var i=32-It(t)+r;if(30<i){var s=r-r%5;i=(o&(1<<s)-1).toString(32),o>>=s,r-=s,Ot=1<<32-It(t)+r|n<<r|o,qt=i+e}else Ot=1<<i|n<<r|o,qt=e}function wa(e){e.return!==null&&(Nn(e,1),dp(e,1,0))}function Aa(e){for(;e===wi;)wi=no[--oo],no[oo]=null,Ai=no[--oo],no[oo]=null;for(;e===Vn;)Vn=dt[--ft],dt[ft]=null,qt=dt[--ft],dt[ft]=null,Ot=dt[--ft],dt[ft]=null}var it=null,rt=null,fe=!1,xt=null;function fp(e,t){var n=pt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Ju(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,it=e,rt=mn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,it=e,rt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Vn!==null?{id:Ot,overflow:qt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=pt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,it=e,rt=null,!0):!1;default:return!1}}function wl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Al(e){if(fe){var t=rt;if(t){var n=t;if(!Ju(e,t)){if(wl(e))throw Error(U(418));t=mn(n.nextSibling);var o=it;t&&Ju(e,t)?fp(o,n):(e.flags=e.flags&-4097|2,fe=!1,it=e)}}else{if(wl(e))throw Error(U(418));e.flags=e.flags&-4097|2,fe=!1,it=e}}}function Wu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;it=e}function $r(e){if(e!==it)return!1;if(!fe)return Wu(e),fe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Tl(e.type,e.memoizedProps)),t&&(t=rt)){if(wl(e))throw pp(),Error(U(418));for(;t;)fp(e,t),t=mn(t.nextSibling)}if(Wu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(U(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){rt=mn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}rt=null}}else rt=it?mn(e.stateNode.nextSibling):null;return!0}function pp(){for(var e=rt;e;)e=mn(e.nextSibling)}function _o(){rt=it=null,fe=!1}function Na(e){xt===null?xt=[e]:xt.push(e)}var oy=Qt.ReactCurrentBatchConfig;function Vo(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var o=n.stateNode}if(!o)throw Error(U(147,e));var r=o,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(s){var u=r.refs;s===null?delete u[i]:u[i]=s},t._stringRef=i,t)}if(typeof e!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,e))}return e}function Or(e,t){throw e=Object.prototype.toString.call(t),Error(U(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Yu(e){var t=e._init;return t(e._payload)}function mp(e){function t(y,v){if(e){var E=y.deletions;E===null?(y.deletions=[v],y.flags|=16):E.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function o(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function r(y,v){return y=vn(y,v),y.index=0,y.sibling=null,y}function i(y,v,E){return y.index=E,e?(E=y.alternate,E!==null?(E=E.index,E<v?(y.flags|=2,v):E):(y.flags|=2,v)):(y.flags|=1048576,v)}function s(y){return e&&y.alternate===null&&(y.flags|=2),y}function u(y,v,E,x){return v===null||v.tag!==6?(v=zs(E,y.mode,x),v.return=y,v):(v=r(v,E),v.return=y,v)}function c(y,v,E,x){var T=E.type;return T===Qn?f(y,v,E.props.children,x,E.key):v!==null&&(v.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===on&&Yu(T)===v.type)?(x=r(v,E.props),x.ref=Vo(y,v,E),x.return=y,x):(x=di(E.type,E.key,E.props,null,y.mode,x),x.ref=Vo(y,v,E),x.return=y,x)}function d(y,v,E,x){return v===null||v.tag!==4||v.stateNode.containerInfo!==E.containerInfo||v.stateNode.implementation!==E.implementation?(v=Js(E,y.mode,x),v.return=y,v):(v=r(v,E.children||[]),v.return=y,v)}function f(y,v,E,x,T){return v===null||v.tag!==7?(v=Fn(E,y.mode,x,T),v.return=y,v):(v=r(v,E),v.return=y,v)}function m(y,v,E){if(typeof v=="string"&&v!==""||typeof v=="number")return v=zs(""+v,y.mode,E),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Mr:return E=di(v.type,v.key,v.props,null,y.mode,E),E.ref=Vo(y,null,v),E.return=y,E;case Kn:return v=Js(v,y.mode,E),v.return=y,v;case on:var x=v._init;return m(y,x(v._payload),E)}if(zo(v)||Do(v))return v=Fn(v,y.mode,E,null),v.return=y,v;Or(y,v)}return null}function p(y,v,E,x){var T=v!==null?v.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return T!==null?null:u(y,v,""+E,x);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Mr:return E.key===T?c(y,v,E,x):null;case Kn:return E.key===T?d(y,v,E,x):null;case on:return T=E._init,p(y,v,T(E._payload),x)}if(zo(E)||Do(E))return T!==null?null:f(y,v,E,x,null);Or(y,E)}return null}function h(y,v,E,x,T){if(typeof x=="string"&&x!==""||typeof x=="number")return y=y.get(E)||null,u(v,y,""+x,T);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Mr:return y=y.get(x.key===null?E:x.key)||null,c(v,y,x,T);case Kn:return y=y.get(x.key===null?E:x.key)||null,d(v,y,x,T);case on:var P=x._init;return h(y,v,E,P(x._payload),T)}if(zo(x)||Do(x))return y=y.get(E)||null,f(v,y,x,T,null);Or(v,x)}return null}function _(y,v,E,x){for(var T=null,P=null,D=v,L=v=0,A=null;D!==null&&L<E.length;L++){D.index>L?(A=D,D=null):A=D.sibling;var F=p(y,D,E[L],x);if(F===null){D===null&&(D=A);break}e&&D&&F.alternate===null&&t(y,D),v=i(F,v,L),P===null?T=F:P.sibling=F,P=F,D=A}if(L===E.length)return n(y,D),fe&&Nn(y,L),T;if(D===null){for(;L<E.length;L++)D=m(y,E[L],x),D!==null&&(v=i(D,v,L),P===null?T=D:P.sibling=D,P=D);return fe&&Nn(y,L),T}for(D=o(y,D);L<E.length;L++)A=h(D,y,L,E[L],x),A!==null&&(e&&A.alternate!==null&&D.delete(A.key===null?L:A.key),v=i(A,v,L),P===null?T=A:P.sibling=A,P=A);return e&&D.forEach(function(J){return t(y,J)}),fe&&Nn(y,L),T}function S(y,v,E,x){var T=Do(E);if(typeof T!="function")throw Error(U(150));if(E=T.call(E),E==null)throw Error(U(151));for(var P=T=null,D=v,L=v=0,A=null,F=E.next();D!==null&&!F.done;L++,F=E.next()){D.index>L?(A=D,D=null):A=D.sibling;var J=p(y,D,F.value,x);if(J===null){D===null&&(D=A);break}e&&D&&J.alternate===null&&t(y,D),v=i(J,v,L),P===null?T=J:P.sibling=J,P=J,D=A}if(F.done)return n(y,D),fe&&Nn(y,L),T;if(D===null){for(;!F.done;L++,F=E.next())F=m(y,F.value,x),F!==null&&(v=i(F,v,L),P===null?T=F:P.sibling=F,P=F);return fe&&Nn(y,L),T}for(D=o(y,D);!F.done;L++,F=E.next())F=h(D,y,L,F.value,x),F!==null&&(e&&F.alternate!==null&&D.delete(F.key===null?L:F.key),v=i(F,v,L),P===null?T=F:P.sibling=F,P=F);return e&&D.forEach(function(oe){return t(y,oe)}),fe&&Nn(y,L),T}function C(y,v,E,x){if(typeof E=="object"&&E!==null&&E.type===Qn&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Mr:e:{for(var T=E.key,P=v;P!==null;){if(P.key===T){if(T=E.type,T===Qn){if(P.tag===7){n(y,P.sibling),v=r(P,E.props.children),v.return=y,y=v;break e}}else if(P.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===on&&Yu(T)===P.type){n(y,P.sibling),v=r(P,E.props),v.ref=Vo(y,P,E),v.return=y,y=v;break e}n(y,P);break}else t(y,P);P=P.sibling}E.type===Qn?(v=Fn(E.props.children,y.mode,x,E.key),v.return=y,y=v):(x=di(E.type,E.key,E.props,null,y.mode,x),x.ref=Vo(y,v,E),x.return=y,y=x)}return s(y);case Kn:e:{for(P=E.key;v!==null;){if(v.key===P)if(v.tag===4&&v.stateNode.containerInfo===E.containerInfo&&v.stateNode.implementation===E.implementation){n(y,v.sibling),v=r(v,E.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=Js(E,y.mode,x),v.return=y,y=v}return s(y);case on:return P=E._init,C(y,v,P(E._payload),x)}if(zo(E))return _(y,v,E,x);if(Do(E))return S(y,v,E,x);Or(y,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,v!==null&&v.tag===6?(n(y,v.sibling),v=r(v,E),v.return=y,y=v):(n(y,v),v=zs(E,y.mode,x),v.return=y,y=v),s(y)):n(y,v)}return C}var So=mp(!0),hp=mp(!1),Ni=Tn(null),Ri=null,ro=null,Ra=null;function Pa(){Ra=ro=Ri=null}function Ma(e){var t=Ni.current;ce(Ni),e._currentValue=t}function Nl(e,t,n){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===n)break;e=e.return}}function mo(e,t){Ri=e,Ra=ro=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ze=!0),e.firstContext=null)}function gt(e){var t=e._currentValue;if(Ra!==e)if(e={context:e,memoizedValue:t,next:null},ro===null){if(Ri===null)throw Error(U(308));ro=e,Ri.dependencies={lanes:0,firstContext:e}}else ro=ro.next=e;return t}var Dn=null;function ka(e){Dn===null?Dn=[e]:Dn.push(e)}function gp(e,t,n,o){var r=t.interleaved;return r===null?(n.next=n,ka(t)):(n.next=r.next,r.next=n),t.interleaved=n,Wt(e,o)}function Wt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var rn=!1;function Da(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function bt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function hn(e,t,n){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,ne&2){var r=o.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),o.pending=t,Wt(e,n)}return r=o.interleaved,r===null?(t.next=t,ka(o)):(t.next=r.next,r.next=t),o.interleaved=t,Wt(e,n)}function ii(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var o=t.lanes;o&=e.pendingLanes,n|=o,t.lanes=n,va(e,n)}}function Ku(e,t){var n=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,n===o)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?r=i=s:i=i.next=s,n=n.next}while(n!==null);i===null?r=i=t:i=i.next=t}else r=i=t;n={baseState:o.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:o.shared,effects:o.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Pi(e,t,n,o){var r=e.updateQueue;rn=!1;var i=r.firstBaseUpdate,s=r.lastBaseUpdate,u=r.shared.pending;if(u!==null){r.shared.pending=null;var c=u,d=c.next;c.next=null,s===null?i=d:s.next=d,s=c;var f=e.alternate;f!==null&&(f=f.updateQueue,u=f.lastBaseUpdate,u!==s&&(u===null?f.firstBaseUpdate=d:u.next=d,f.lastBaseUpdate=c))}if(i!==null){var m=r.baseState;s=0,f=d=c=null,u=i;do{var p=u.lane,h=u.eventTime;if((o&p)===p){f!==null&&(f=f.next={eventTime:h,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var _=e,S=u;switch(p=t,h=n,S.tag){case 1:if(_=S.payload,typeof _=="function"){m=_.call(h,m,p);break e}m=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=S.payload,p=typeof _=="function"?_.call(h,m,p):_,p==null)break e;m=ye({},m,p);break e;case 2:rn=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,p=r.effects,p===null?r.effects=[u]:p.push(u))}else h={eventTime:h,lane:p,tag:u.tag,payload:u.payload,callback:u.callback,next:null},f===null?(d=f=h,c=m):f=f.next=h,s|=p;if(u=u.next,u===null){if(u=r.shared.pending,u===null)break;p=u,u=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(!0);if(f===null&&(c=m),r.baseState=c,r.firstBaseUpdate=d,r.lastBaseUpdate=f,t=r.shared.interleaved,t!==null){r=t;do s|=r.lane,r=r.next;while(r!==t)}else i===null&&(r.shared.lanes=0);Bn|=s,e.lanes=s,e.memoizedState=m}}function Qu(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var o=e[t],r=o.callback;if(r!==null){if(o.callback=null,o=n,typeof r!="function")throw Error(U(191,r));r.call(o)}}}var Ar={},Ft=Tn(Ar),gr=Tn(Ar),yr=Tn(Ar);function Ln(e){if(e===Ar)throw Error(U(174));return e}function La(e,t){switch(ae(yr,t),ae(gr,e),ae(Ft,Ar),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:al(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=al(t,e)}ce(Ft),ae(Ft,t)}function To(){ce(Ft),ce(gr),ce(yr)}function vp(e){Ln(yr.current);var t=Ln(Ft.current),n=al(t,e.type);t!==n&&(ae(gr,e),ae(Ft,n))}function Ua(e){gr.current===e&&(ce(Ft),ce(gr))}var he=Tn(0);function Mi(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Hs=[];function Fa(){for(var e=0;e<Hs.length;e++)Hs[e]._workInProgressVersionPrimary=null;Hs.length=0}var si=Qt.ReactCurrentDispatcher,Bs=Qt.ReactCurrentBatchConfig,Hn=0,ge=null,we=null,Ne=null,ki=!1,er=!1,vr=0,ry=0;function Ue(){throw Error(U(321))}function Ga(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Rt(e[n],t[n]))return!1;return!0}function Va(e,t,n,o,r,i){if(Hn=i,ge=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,si.current=e===null||e.memoizedState===null?ay:uy,e=n(o,r),er){i=0;do{if(er=!1,vr=0,25<=i)throw Error(U(301));i+=1,Ne=we=null,t.updateQueue=null,si.current=cy,e=n(o,r)}while(er)}if(si.current=Di,t=we!==null&&we.next!==null,Hn=0,Ne=we=ge=null,ki=!1,t)throw Error(U(300));return e}function Ha(){var e=vr!==0;return vr=0,e}function Dt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ne===null?ge.memoizedState=Ne=e:Ne=Ne.next=e,Ne}function yt(){if(we===null){var e=ge.alternate;e=e!==null?e.memoizedState:null}else e=we.next;var t=Ne===null?ge.memoizedState:Ne.next;if(t!==null)Ne=t,we=e;else{if(e===null)throw Error(U(310));we=e,e={memoizedState:we.memoizedState,baseState:we.baseState,baseQueue:we.baseQueue,queue:we.queue,next:null},Ne===null?ge.memoizedState=Ne=e:Ne=Ne.next=e}return Ne}function Er(e,t){return typeof t=="function"?t(e):t}function $s(e){var t=yt(),n=t.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=e;var o=we,r=o.baseQueue,i=n.pending;if(i!==null){if(r!==null){var s=r.next;r.next=i.next,i.next=s}o.baseQueue=r=i,n.pending=null}if(r!==null){i=r.next,o=o.baseState;var u=s=null,c=null,d=i;do{var f=d.lane;if((Hn&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),o=d.hasEagerState?d.eagerState:e(o,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(u=c=m,s=o):c=c.next=m,ge.lanes|=f,Bn|=f}d=d.next}while(d!==null&&d!==i);c===null?s=o:c.next=u,Rt(o,t.memoizedState)||(Ze=!0),t.memoizedState=o,t.baseState=s,t.baseQueue=c,n.lastRenderedState=o}if(e=n.interleaved,e!==null){r=e;do i=r.lane,ge.lanes|=i,Bn|=i,r=r.next;while(r!==e)}else r===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Os(e){var t=yt(),n=t.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=e;var o=n.dispatch,r=n.pending,i=t.memoizedState;if(r!==null){n.pending=null;var s=r=r.next;do i=e(i,s.action),s=s.next;while(s!==r);Rt(i,t.memoizedState)||(Ze=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,o]}function Ep(){}function _p(e,t){var n=ge,o=yt(),r=t(),i=!Rt(o.memoizedState,r);if(i&&(o.memoizedState=r,Ze=!0),o=o.queue,Ba(Cp.bind(null,n,o,e),[e]),o.getSnapshot!==t||i||Ne!==null&&Ne.memoizedState.tag&1){if(n.flags|=2048,_r(9,Tp.bind(null,n,o,r,t),void 0,null),Re===null)throw Error(U(349));Hn&30||Sp(n,t,r)}return r}function Sp(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ge.updateQueue,t===null?(t={lastEffect:null,stores:null},ge.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Tp(e,t,n,o){t.value=n,t.getSnapshot=o,xp(t)&&Ip(e)}function Cp(e,t,n){return n(function(){xp(t)&&Ip(e)})}function xp(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Rt(e,n)}catch{return!0}}function Ip(e){var t=Wt(e,1);t!==null&&wt(t,e,1,-1)}function Xu(e){var t=Dt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Er,lastRenderedState:e},t.queue=e,e=e.dispatch=ly.bind(null,ge,e),[t.memoizedState,e]}function _r(e,t,n,o){return e={tag:e,create:t,destroy:n,deps:o,next:null},t=ge.updateQueue,t===null?(t={lastEffect:null,stores:null},ge.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(o=n.next,n.next=e,e.next=o,t.lastEffect=e)),e}function wp(){return yt().memoizedState}function li(e,t,n,o){var r=Dt();ge.flags|=e,r.memoizedState=_r(1|t,n,void 0,o===void 0?null:o)}function Zi(e,t,n,o){var r=yt();o=o===void 0?null:o;var i=void 0;if(we!==null){var s=we.memoizedState;if(i=s.destroy,o!==null&&Ga(o,s.deps)){r.memoizedState=_r(t,n,i,o);return}}ge.flags|=e,r.memoizedState=_r(1|t,n,i,o)}function Zu(e,t){return li(8390656,8,e,t)}function Ba(e,t){return Zi(2048,8,e,t)}function Ap(e,t){return Zi(4,2,e,t)}function Np(e,t){return Zi(4,4,e,t)}function Rp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Pp(e,t,n){return n=n!=null?n.concat([e]):null,Zi(4,4,Rp.bind(null,t,e),n)}function $a(){}function Mp(e,t){var n=yt();t=t===void 0?null:t;var o=n.memoizedState;return o!==null&&t!==null&&Ga(t,o[1])?o[0]:(n.memoizedState=[e,t],e)}function kp(e,t){var n=yt();t=t===void 0?null:t;var o=n.memoizedState;return o!==null&&t!==null&&Ga(t,o[1])?o[0]:(e=e(),n.memoizedState=[e,t],e)}function Dp(e,t,n){return Hn&21?(Rt(n,t)||(n=Vf(),ge.lanes|=n,Bn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ze=!0),e.memoizedState=n)}function iy(e,t){var n=le;le=n!==0&&4>n?n:4,e(!0);var o=Bs.transition;Bs.transition={};try{e(!1),t()}finally{le=n,Bs.transition=o}}function Lp(){return yt().memoizedState}function sy(e,t,n){var o=yn(e);if(n={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null},Up(e))Fp(t,n);else if(n=gp(e,t,n,o),n!==null){var r=ze();wt(n,e,o,r),Gp(n,t,o)}}function ly(e,t,n){var o=yn(e),r={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null};if(Up(e))Fp(t,r);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var s=t.lastRenderedState,u=i(s,n);if(r.hasEagerState=!0,r.eagerState=u,Rt(u,s)){var c=t.interleaved;c===null?(r.next=r,ka(t)):(r.next=c.next,c.next=r),t.interleaved=r;return}}catch{}finally{}n=gp(e,t,r,o),n!==null&&(r=ze(),wt(n,e,o,r),Gp(n,t,o))}}function Up(e){var t=e.alternate;return e===ge||t!==null&&t===ge}function Fp(e,t){er=ki=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Gp(e,t,n){if(n&4194240){var o=t.lanes;o&=e.pendingLanes,n|=o,t.lanes=n,va(e,n)}}var Di={readContext:gt,useCallback:Ue,useContext:Ue,useEffect:Ue,useImperativeHandle:Ue,useInsertionEffect:Ue,useLayoutEffect:Ue,useMemo:Ue,useReducer:Ue,useRef:Ue,useState:Ue,useDebugValue:Ue,useDeferredValue:Ue,useTransition:Ue,useMutableSource:Ue,useSyncExternalStore:Ue,useId:Ue,unstable_isNewReconciler:!1},ay={readContext:gt,useCallback:function(e,t){return Dt().memoizedState=[e,t===void 0?null:t],e},useContext:gt,useEffect:Zu,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,li(4194308,4,Rp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return li(4194308,4,e,t)},useInsertionEffect:function(e,t){return li(4,2,e,t)},useMemo:function(e,t){var n=Dt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var o=Dt();return t=n!==void 0?n(t):t,o.memoizedState=o.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},o.queue=e,e=e.dispatch=sy.bind(null,ge,e),[o.memoizedState,e]},useRef:function(e){var t=Dt();return e={current:e},t.memoizedState=e},useState:Xu,useDebugValue:$a,useDeferredValue:function(e){return Dt().memoizedState=e},useTransition:function(){var e=Xu(!1),t=e[0];return e=iy.bind(null,e[1]),Dt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var o=ge,r=Dt();if(fe){if(n===void 0)throw Error(U(407));n=n()}else{if(n=t(),Re===null)throw Error(U(349));Hn&30||Sp(o,t,n)}r.memoizedState=n;var i={value:n,getSnapshot:t};return r.queue=i,Zu(Cp.bind(null,o,i,e),[e]),o.flags|=2048,_r(9,Tp.bind(null,o,i,n,t),void 0,null),n},useId:function(){var e=Dt(),t=Re.identifierPrefix;if(fe){var n=qt,o=Ot;n=(o&~(1<<32-It(o)-1)).toString(32)+n,t=":"+t+"R"+n,n=vr++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=ry++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},uy={readContext:gt,useCallback:Mp,useContext:gt,useEffect:Ba,useImperativeHandle:Pp,useInsertionEffect:Ap,useLayoutEffect:Np,useMemo:kp,useReducer:$s,useRef:wp,useState:function(){return $s(Er)},useDebugValue:$a,useDeferredValue:function(e){var t=yt();return Dp(t,we.memoizedState,e)},useTransition:function(){var e=$s(Er)[0],t=yt().memoizedState;return[e,t]},useMutableSource:Ep,useSyncExternalStore:_p,useId:Lp,unstable_isNewReconciler:!1},cy={readContext:gt,useCallback:Mp,useContext:gt,useEffect:Ba,useImperativeHandle:Pp,useInsertionEffect:Ap,useLayoutEffect:Np,useMemo:kp,useReducer:Os,useRef:wp,useState:function(){return Os(Er)},useDebugValue:$a,useDeferredValue:function(e){var t=yt();return we===null?t.memoizedState=e:Dp(t,we.memoizedState,e)},useTransition:function(){var e=Os(Er)[0],t=yt().memoizedState;return[e,t]},useMutableSource:Ep,useSyncExternalStore:_p,useId:Lp,unstable_isNewReconciler:!1};function Tt(e,t){if(e&&e.defaultProps){t=ye({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Rl(e,t,n,o){t=e.memoizedState,n=n(o,t),n=n==null?t:ye({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ji={isMounted:function(e){return(e=e._reactInternals)?qn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var o=ze(),r=yn(e),i=bt(o,r);i.payload=t,n!=null&&(i.callback=n),t=hn(e,i,r),t!==null&&(wt(t,e,r,o),ii(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var o=ze(),r=yn(e),i=bt(o,r);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=hn(e,i,r),t!==null&&(wt(t,e,r,o),ii(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ze(),o=yn(e),r=bt(n,o);r.tag=2,t!=null&&(r.callback=t),t=hn(e,r,o),t!==null&&(wt(t,e,o,n),ii(t,e,o))}};function ju(e,t,n,o,r,i,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,i,s):t.prototype&&t.prototype.isPureReactComponent?!fr(n,o)||!fr(r,i):!0}function Vp(e,t,n){var o=!1,r=_n,i=t.contextType;return typeof i=="object"&&i!==null?i=gt(i):(r=et(t)?Gn:Be.current,o=t.contextTypes,i=(o=o!=null)?Eo(e,r):_n),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ji,e.stateNode=t,t._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=i),t}function ec(e,t,n,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,o),t.state!==e&&ji.enqueueReplaceState(t,t.state,null)}function Pl(e,t,n,o){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},Da(e);var i=t.contextType;typeof i=="object"&&i!==null?r.context=gt(i):(i=et(t)?Gn:Be.current,r.context=Eo(e,i)),r.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Rl(e,t,i,n),r.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(t=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),t!==r.state&&ji.enqueueReplaceState(r,r.state,null),Pi(e,n,r,o),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308)}function Co(e,t){try{var n="",o=t;do n+=Vh(o),o=o.return;while(o);var r=n}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:r,digest:null}}function qs(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Ml(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var dy=typeof WeakMap=="function"?WeakMap:Map;function Hp(e,t,n){n=bt(-1,n),n.tag=3,n.payload={element:null};var o=t.value;return n.callback=function(){Ui||(Ui=!0,$l=o),Ml(e,t)},n}function Bp(e,t,n){n=bt(-1,n),n.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var r=t.value;n.payload=function(){return o(r)},n.callback=function(){Ml(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Ml(e,t),typeof o!="function"&&(gn===null?gn=new Set([this]):gn.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function tc(e,t,n){var o=e.pingCache;if(o===null){o=e.pingCache=new dy;var r=new Set;o.set(t,r)}else r=o.get(t),r===void 0&&(r=new Set,o.set(t,r));r.has(n)||(r.add(n),e=Iy.bind(null,e,t,n),t.then(e,e))}function nc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function oc(e,t,n,o,r){return e.mode&1?(e.flags|=65536,e.lanes=r,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=bt(-1,1),t.tag=2,hn(n,t,1))),n.lanes|=1),e)}var fy=Qt.ReactCurrentOwner,Ze=!1;function be(e,t,n,o){t.child=e===null?hp(t,null,n,o):So(t,e.child,n,o)}function rc(e,t,n,o,r){n=n.render;var i=t.ref;return mo(t,r),o=Va(e,t,n,o,i,r),n=Ha(),e!==null&&!Ze?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Yt(e,t,r)):(fe&&n&&wa(t),t.flags|=1,be(e,t,o,r),t.child)}function ic(e,t,n,o,r){if(e===null){var i=n.type;return typeof i=="function"&&!Ka(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,$p(e,t,i,o,r)):(e=di(n.type,null,o,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&r)){var s=i.memoizedProps;if(n=n.compare,n=n!==null?n:fr,n(s,o)&&e.ref===t.ref)return Yt(e,t,r)}return t.flags|=1,e=vn(i,o),e.ref=t.ref,e.return=t,t.child=e}function $p(e,t,n,o,r){if(e!==null){var i=e.memoizedProps;if(fr(i,o)&&e.ref===t.ref)if(Ze=!1,t.pendingProps=o=i,(e.lanes&r)!==0)e.flags&131072&&(Ze=!0);else return t.lanes=e.lanes,Yt(e,t,r)}return kl(e,t,n,o,r)}function Op(e,t,n){var o=t.pendingProps,r=o.children,i=e!==null?e.memoizedState:null;if(o.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ae(so,nt),nt|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ae(so,nt),nt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=i!==null?i.baseLanes:n,ae(so,nt),nt|=o}else i!==null?(o=i.baseLanes|n,t.memoizedState=null):o=n,ae(so,nt),nt|=o;return be(e,t,r,n),t.child}function qp(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function kl(e,t,n,o,r){var i=et(n)?Gn:Be.current;return i=Eo(t,i),mo(t,r),n=Va(e,t,n,o,i,r),o=Ha(),e!==null&&!Ze?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Yt(e,t,r)):(fe&&o&&wa(t),t.flags|=1,be(e,t,n,r),t.child)}function sc(e,t,n,o,r){if(et(n)){var i=!0;Ii(t)}else i=!1;if(mo(t,r),t.stateNode===null)ai(e,t),Vp(t,n,o),Pl(t,n,o,r),o=!0;else if(e===null){var s=t.stateNode,u=t.memoizedProps;s.props=u;var c=s.context,d=n.contextType;typeof d=="object"&&d!==null?d=gt(d):(d=et(n)?Gn:Be.current,d=Eo(t,d));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function";m||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==o||c!==d)&&ec(t,s,o,d),rn=!1;var p=t.memoizedState;s.state=p,Pi(t,o,s,r),c=t.memoizedState,u!==o||p!==c||je.current||rn?(typeof f=="function"&&(Rl(t,n,f,o),c=t.memoizedState),(u=rn||ju(t,n,u,o,p,c,d))?(m||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=c),s.props=o,s.state=c,s.context=d,o=u):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{s=t.stateNode,yp(e,t),u=t.memoizedProps,d=t.type===t.elementType?u:Tt(t.type,u),s.props=d,m=t.pendingProps,p=s.context,c=n.contextType,typeof c=="object"&&c!==null?c=gt(c):(c=et(n)?Gn:Be.current,c=Eo(t,c));var h=n.getDerivedStateFromProps;(f=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==m||p!==c)&&ec(t,s,o,c),rn=!1,p=t.memoizedState,s.state=p,Pi(t,o,s,r);var _=t.memoizedState;u!==m||p!==_||je.current||rn?(typeof h=="function"&&(Rl(t,n,h,o),_=t.memoizedState),(d=rn||ju(t,n,d,o,p,_,c)||!1)?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(o,_,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(o,_,c)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||u===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=_),s.props=o,s.state=_,s.context=c,o=d):(typeof s.componentDidUpdate!="function"||u===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),o=!1)}return Dl(e,t,n,o,i,r)}function Dl(e,t,n,o,r,i){qp(e,t);var s=(t.flags&128)!==0;if(!o&&!s)return r&&zu(t,n,!1),Yt(e,t,i);o=t.stateNode,fy.current=t;var u=s&&typeof n.getDerivedStateFromError!="function"?null:o.render();return t.flags|=1,e!==null&&s?(t.child=So(t,e.child,null,i),t.child=So(t,null,u,i)):be(e,t,u,i),t.memoizedState=o.state,r&&zu(t,n,!0),t.child}function bp(e){var t=e.stateNode;t.pendingContext?bu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&bu(e,t.context,!1),La(e,t.containerInfo)}function lc(e,t,n,o,r){return _o(),Na(r),t.flags|=256,be(e,t,n,o),t.child}var Ll={dehydrated:null,treeContext:null,retryLane:0};function Ul(e){return{baseLanes:e,cachePool:null,transitions:null}}function zp(e,t,n){var o=t.pendingProps,r=he.current,i=!1,s=(t.flags&128)!==0,u;if((u=s)||(u=e!==null&&e.memoizedState===null?!1:(r&2)!==0),u?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(r|=1),ae(he,r&1),e===null)return Al(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=o.children,e=o.fallback,i?(o=t.mode,i=t.child,s={mode:"hidden",children:s},!(o&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=ns(s,o,0,null),e=Fn(e,o,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Ul(n),t.memoizedState=Ll,e):Oa(t,s));if(r=e.memoizedState,r!==null&&(u=r.dehydrated,u!==null))return py(e,t,s,o,u,r,n);if(i){i=o.fallback,s=t.mode,r=e.child,u=r.sibling;var c={mode:"hidden",children:o.children};return!(s&1)&&t.child!==r?(o=t.child,o.childLanes=0,o.pendingProps=c,t.deletions=null):(o=vn(r,c),o.subtreeFlags=r.subtreeFlags&14680064),u!==null?i=vn(u,i):(i=Fn(i,s,n,null),i.flags|=2),i.return=t,o.return=t,o.sibling=i,t.child=o,o=i,i=t.child,s=e.child.memoizedState,s=s===null?Ul(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=e.childLanes&~n,t.memoizedState=Ll,o}return i=e.child,e=i.sibling,o=vn(i,{mode:"visible",children:o.children}),!(t.mode&1)&&(o.lanes=n),o.return=t,o.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function Oa(e,t){return t=ns({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function qr(e,t,n,o){return o!==null&&Na(o),So(t,e.child,null,n),e=Oa(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function py(e,t,n,o,r,i,s){if(n)return t.flags&256?(t.flags&=-257,o=qs(Error(U(422))),qr(e,t,s,o)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=o.fallback,r=t.mode,o=ns({mode:"visible",children:o.children},r,0,null),i=Fn(i,r,s,null),i.flags|=2,o.return=t,i.return=t,o.sibling=i,t.child=o,t.mode&1&&So(t,e.child,null,s),t.child.memoizedState=Ul(s),t.memoizedState=Ll,i);if(!(t.mode&1))return qr(e,t,s,null);if(r.data==="$!"){if(o=r.nextSibling&&r.nextSibling.dataset,o)var u=o.dgst;return o=u,i=Error(U(419)),o=qs(i,o,void 0),qr(e,t,s,o)}if(u=(s&e.childLanes)!==0,Ze||u){if(o=Re,o!==null){switch(s&-s){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(o.suspendedLanes|s)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,Wt(e,r),wt(o,e,r,-1))}return Ya(),o=qs(Error(U(421))),qr(e,t,s,o)}return r.data==="$?"?(t.flags|=128,t.child=e.child,t=wy.bind(null,e),r._reactRetry=t,null):(e=i.treeContext,rt=mn(r.nextSibling),it=t,fe=!0,xt=null,e!==null&&(dt[ft++]=Ot,dt[ft++]=qt,dt[ft++]=Vn,Ot=e.id,qt=e.overflow,Vn=t),t=Oa(t,o.children),t.flags|=4096,t)}function ac(e,t,n){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),Nl(e.return,t,n)}function bs(e,t,n,o,r){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:n,tailMode:r}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=o,i.tail=n,i.tailMode=r)}function Jp(e,t,n){var o=t.pendingProps,r=o.revealOrder,i=o.tail;if(be(e,t,o.children,n),o=he.current,o&2)o=o&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ac(e,n,t);else if(e.tag===19)ac(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(ae(he,o),!(t.mode&1))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&Mi(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),bs(t,!1,r,n,i);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&Mi(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}bs(t,!0,n,null,i);break;case"together":bs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ai(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Yt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Bn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(U(153));if(t.child!==null){for(e=t.child,n=vn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=vn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function my(e,t,n){switch(t.tag){case 3:bp(t),_o();break;case 5:vp(t);break;case 1:et(t.type)&&Ii(t);break;case 4:La(t,t.stateNode.containerInfo);break;case 10:var o=t.type._context,r=t.memoizedProps.value;ae(Ni,o._currentValue),o._currentValue=r;break;case 13:if(o=t.memoizedState,o!==null)return o.dehydrated!==null?(ae(he,he.current&1),t.flags|=128,null):n&t.child.childLanes?zp(e,t,n):(ae(he,he.current&1),e=Yt(e,t,n),e!==null?e.sibling:null);ae(he,he.current&1);break;case 19:if(o=(n&t.childLanes)!==0,e.flags&128){if(o)return Jp(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),ae(he,he.current),o)break;return null;case 22:case 23:return t.lanes=0,Op(e,t,n)}return Yt(e,t,n)}var Wp,Fl,Yp,Kp;Wp=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Fl=function(){};Yp=function(e,t,n,o){var r=e.memoizedProps;if(r!==o){e=t.stateNode,Ln(Ft.current);var i=null;switch(n){case"input":r=rl(e,r),o=rl(e,o),i=[];break;case"select":r=ye({},r,{value:void 0}),o=ye({},o,{value:void 0}),i=[];break;case"textarea":r=ll(e,r),o=ll(e,o),i=[];break;default:typeof r.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=Ci)}ul(n,o);var s;n=null;for(d in r)if(!o.hasOwnProperty(d)&&r.hasOwnProperty(d)&&r[d]!=null)if(d==="style"){var u=r[d];for(s in u)u.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ir.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in o){var c=o[d];if(u=r!=null?r[d]:void 0,o.hasOwnProperty(d)&&c!==u&&(c!=null||u!=null))if(d==="style")if(u){for(s in u)!u.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&u[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(ir.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&ue("scroll",e),i||u===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};Kp=function(e,t,n,o){n!==o&&(t.flags|=4)};function Ho(e,t){if(!fe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Fe(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,o=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,o|=r.subtreeFlags&14680064,o|=r.flags&14680064,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,o|=r.subtreeFlags,o|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=o,e.childLanes=n,t}function hy(e,t,n){var o=t.pendingProps;switch(Aa(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fe(t),null;case 1:return et(t.type)&&xi(),Fe(t),null;case 3:return o=t.stateNode,To(),ce(je),ce(Be),Fa(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&($r(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,xt!==null&&(bl(xt),xt=null))),Fl(e,t),Fe(t),null;case 5:Ua(t);var r=Ln(yr.current);if(n=t.type,e!==null&&t.stateNode!=null)Yp(e,t,n,o,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!o){if(t.stateNode===null)throw Error(U(166));return Fe(t),null}if(e=Ln(Ft.current),$r(t)){o=t.stateNode,n=t.type;var i=t.memoizedProps;switch(o[Lt]=t,o[hr]=i,e=(t.mode&1)!==0,n){case"dialog":ue("cancel",o),ue("close",o);break;case"iframe":case"object":case"embed":ue("load",o);break;case"video":case"audio":for(r=0;r<Wo.length;r++)ue(Wo[r],o);break;case"source":ue("error",o);break;case"img":case"image":case"link":ue("error",o),ue("load",o);break;case"details":ue("toggle",o);break;case"input":yu(o,i),ue("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!i.multiple},ue("invalid",o);break;case"textarea":Eu(o,i),ue("invalid",o)}ul(n,i),r=null;for(var s in i)if(i.hasOwnProperty(s)){var u=i[s];s==="children"?typeof u=="string"?o.textContent!==u&&(i.suppressHydrationWarning!==!0&&Br(o.textContent,u,e),r=["children",u]):typeof u=="number"&&o.textContent!==""+u&&(i.suppressHydrationWarning!==!0&&Br(o.textContent,u,e),r=["children",""+u]):ir.hasOwnProperty(s)&&u!=null&&s==="onScroll"&&ue("scroll",o)}switch(n){case"input":kr(o),vu(o,i,!0);break;case"textarea":kr(o),_u(o);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(o.onclick=Ci)}o=r,t.updateQueue=o,o!==null&&(t.flags|=4)}else{s=r.nodeType===9?r:r.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Cf(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=s.createElement(n,{is:o.is}):(e=s.createElement(n),n==="select"&&(s=e,o.multiple?s.multiple=!0:o.size&&(s.size=o.size))):e=s.createElementNS(e,n),e[Lt]=t,e[hr]=o,Wp(e,t,!1,!1),t.stateNode=e;e:{switch(s=cl(n,o),n){case"dialog":ue("cancel",e),ue("close",e),r=o;break;case"iframe":case"object":case"embed":ue("load",e),r=o;break;case"video":case"audio":for(r=0;r<Wo.length;r++)ue(Wo[r],e);r=o;break;case"source":ue("error",e),r=o;break;case"img":case"image":case"link":ue("error",e),ue("load",e),r=o;break;case"details":ue("toggle",e),r=o;break;case"input":yu(e,o),r=rl(e,o),ue("invalid",e);break;case"option":r=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},r=ye({},o,{value:void 0}),ue("invalid",e);break;case"textarea":Eu(e,o),r=ll(e,o),ue("invalid",e);break;default:r=o}ul(n,r),u=r;for(i in u)if(u.hasOwnProperty(i)){var c=u[i];i==="style"?wf(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&xf(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&sr(e,c):typeof c=="number"&&sr(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ir.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ue("scroll",e):c!=null&&fa(e,i,c,s))}switch(n){case"input":kr(e),vu(e,o,!1);break;case"textarea":kr(e),_u(e);break;case"option":o.value!=null&&e.setAttribute("value",""+En(o.value));break;case"select":e.multiple=!!o.multiple,i=o.value,i!=null?uo(e,!!o.multiple,i,!1):o.defaultValue!=null&&uo(e,!!o.multiple,o.defaultValue,!0);break;default:typeof r.onClick=="function"&&(e.onclick=Ci)}switch(n){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Fe(t),null;case 6:if(e&&t.stateNode!=null)Kp(e,t,e.memoizedProps,o);else{if(typeof o!="string"&&t.stateNode===null)throw Error(U(166));if(n=Ln(yr.current),Ln(Ft.current),$r(t)){if(o=t.stateNode,n=t.memoizedProps,o[Lt]=t,(i=o.nodeValue!==n)&&(e=it,e!==null))switch(e.tag){case 3:Br(o.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Br(o.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else o=(n.nodeType===9?n:n.ownerDocument).createTextNode(o),o[Lt]=t,t.stateNode=o}return Fe(t),null;case 13:if(ce(he),o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(fe&&rt!==null&&t.mode&1&&!(t.flags&128))pp(),_o(),t.flags|=98560,i=!1;else if(i=$r(t),o!==null&&o.dehydrated!==null){if(e===null){if(!i)throw Error(U(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(U(317));i[Lt]=t}else _o(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Fe(t),i=!1}else xt!==null&&(bl(xt),xt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(o=o!==null,o!==(e!==null&&e.memoizedState!==null)&&o&&(t.child.flags|=8192,t.mode&1&&(e===null||he.current&1?Ae===0&&(Ae=3):Ya())),t.updateQueue!==null&&(t.flags|=4),Fe(t),null);case 4:return To(),Fl(e,t),e===null&&pr(t.stateNode.containerInfo),Fe(t),null;case 10:return Ma(t.type._context),Fe(t),null;case 17:return et(t.type)&&xi(),Fe(t),null;case 19:if(ce(he),i=t.memoizedState,i===null)return Fe(t),null;if(o=(t.flags&128)!==0,s=i.rendering,s===null)if(o)Ho(i,!1);else{if(Ae!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Mi(e),s!==null){for(t.flags|=128,Ho(i,!1),o=s.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),t.subtreeFlags=0,o=n,n=t.child;n!==null;)i=n,e=o,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,e=s.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ae(he,he.current&1|2),t.child}e=e.sibling}i.tail!==null&&_e()>xo&&(t.flags|=128,o=!0,Ho(i,!1),t.lanes=4194304)}else{if(!o)if(e=Mi(s),e!==null){if(t.flags|=128,o=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ho(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!fe)return Fe(t),null}else 2*_e()-i.renderingStartTime>xo&&n!==1073741824&&(t.flags|=128,o=!0,Ho(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(n=i.last,n!==null?n.sibling=s:t.child=s,i.last=s)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=_e(),t.sibling=null,n=he.current,ae(he,o?n&1|2:n&1),t):(Fe(t),null);case 22:case 23:return Wa(),o=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==o&&(t.flags|=8192),o&&t.mode&1?nt&1073741824&&(Fe(t),t.subtreeFlags&6&&(t.flags|=8192)):Fe(t),null;case 24:return null;case 25:return null}throw Error(U(156,t.tag))}function gy(e,t){switch(Aa(t),t.tag){case 1:return et(t.type)&&xi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return To(),ce(je),ce(Be),Fa(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ua(t),null;case 13:if(ce(he),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(U(340));_o()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ce(he),null;case 4:return To(),null;case 10:return Ma(t.type._context),null;case 22:case 23:return Wa(),null;case 24:return null;default:return null}}var br=!1,Ve=!1,yy=typeof WeakSet=="function"?WeakSet:Set,O=null;function io(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(o){Ee(e,t,o)}else n.current=null}function Gl(e,t,n){try{n()}catch(o){Ee(e,t,o)}}var uc=!1;function vy(e,t){if(_l=_i,e=ep(),Ia(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var o=n.getSelection&&n.getSelection();if(o&&o.rangeCount!==0){n=o.anchorNode;var r=o.anchorOffset,i=o.focusNode;o=o.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var s=0,u=-1,c=-1,d=0,f=0,m=e,p=null;t:for(;;){for(var h;m!==n||r!==0&&m.nodeType!==3||(u=s+r),m!==i||o!==0&&m.nodeType!==3||(c=s+o),m.nodeType===3&&(s+=m.nodeValue.length),(h=m.firstChild)!==null;)p=m,m=h;for(;;){if(m===e)break t;if(p===n&&++d===r&&(u=s),p===i&&++f===o&&(c=s),(h=m.nextSibling)!==null)break;m=p,p=m.parentNode}m=h}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Sl={focusedElem:e,selectionRange:n},_i=!1,O=t;O!==null;)if(t=O,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,O=e;else for(;O!==null;){t=O;try{var _=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var S=_.memoizedProps,C=_.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?S:Tt(t.type,S),C);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var E=t.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(x){Ee(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,O=e;break}O=t.return}return _=uc,uc=!1,_}function tr(e,t,n){var o=t.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var r=o=o.next;do{if((r.tag&e)===e){var i=r.destroy;r.destroy=void 0,i!==void 0&&Gl(t,n,i)}r=r.next}while(r!==o)}}function es(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var o=n.create;n.destroy=o()}n=n.next}while(n!==t)}}function Vl(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Qp(e){var t=e.alternate;t!==null&&(e.alternate=null,Qp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Lt],delete t[hr],delete t[xl],delete t[ey],delete t[ty])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Xp(e){return e.tag===5||e.tag===3||e.tag===4}function cc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Xp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Hl(e,t,n){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ci));else if(o!==4&&(e=e.child,e!==null))for(Hl(e,t,n),e=e.sibling;e!==null;)Hl(e,t,n),e=e.sibling}function Bl(e,t,n){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for(Bl(e,t,n),e=e.sibling;e!==null;)Bl(e,t,n),e=e.sibling}var Me=null,Ct=!1;function nn(e,t,n){for(n=n.child;n!==null;)Zp(e,t,n),n=n.sibling}function Zp(e,t,n){if(Ut&&typeof Ut.onCommitFiberUnmount=="function")try{Ut.onCommitFiberUnmount(Ji,n)}catch{}switch(n.tag){case 5:Ve||io(n,t);case 6:var o=Me,r=Ct;Me=null,nn(e,t,n),Me=o,Ct=r,Me!==null&&(Ct?(e=Me,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Me.removeChild(n.stateNode));break;case 18:Me!==null&&(Ct?(e=Me,n=n.stateNode,e.nodeType===8?Gs(e.parentNode,n):e.nodeType===1&&Gs(e,n),cr(e)):Gs(Me,n.stateNode));break;case 4:o=Me,r=Ct,Me=n.stateNode.containerInfo,Ct=!0,nn(e,t,n),Me=o,Ct=r;break;case 0:case 11:case 14:case 15:if(!Ve&&(o=n.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){r=o=o.next;do{var i=r,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&Gl(n,t,s),r=r.next}while(r!==o)}nn(e,t,n);break;case 1:if(!Ve&&(io(n,t),o=n.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=n.memoizedProps,o.state=n.memoizedState,o.componentWillUnmount()}catch(u){Ee(n,t,u)}nn(e,t,n);break;case 21:nn(e,t,n);break;case 22:n.mode&1?(Ve=(o=Ve)||n.memoizedState!==null,nn(e,t,n),Ve=o):nn(e,t,n);break;default:nn(e,t,n)}}function dc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new yy),t.forEach(function(o){var r=Ay.bind(null,e,o);n.has(o)||(n.add(o),o.then(r,r))})}}function St(e,t){var n=t.deletions;if(n!==null)for(var o=0;o<n.length;o++){var r=n[o];try{var i=e,s=t,u=s;e:for(;u!==null;){switch(u.tag){case 5:Me=u.stateNode,Ct=!1;break e;case 3:Me=u.stateNode.containerInfo,Ct=!0;break e;case 4:Me=u.stateNode.containerInfo,Ct=!0;break e}u=u.return}if(Me===null)throw Error(U(160));Zp(i,s,r),Me=null,Ct=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(d){Ee(r,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)jp(t,e),t=t.sibling}function jp(e,t){var n=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(St(t,e),kt(e),o&4){try{tr(3,e,e.return),es(3,e)}catch(S){Ee(e,e.return,S)}try{tr(5,e,e.return)}catch(S){Ee(e,e.return,S)}}break;case 1:St(t,e),kt(e),o&512&&n!==null&&io(n,n.return);break;case 5:if(St(t,e),kt(e),o&512&&n!==null&&io(n,n.return),e.flags&32){var r=e.stateNode;try{sr(r,"")}catch(S){Ee(e,e.return,S)}}if(o&4&&(r=e.stateNode,r!=null)){var i=e.memoizedProps,s=n!==null?n.memoizedProps:i,u=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{u==="input"&&i.type==="radio"&&i.name!=null&&Sf(r,i),cl(u,s);var d=cl(u,i);for(s=0;s<c.length;s+=2){var f=c[s],m=c[s+1];f==="style"?wf(r,m):f==="dangerouslySetInnerHTML"?xf(r,m):f==="children"?sr(r,m):fa(r,f,m,d)}switch(u){case"input":il(r,i);break;case"textarea":Tf(r,i);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var h=i.value;h!=null?uo(r,!!i.multiple,h,!1):p!==!!i.multiple&&(i.defaultValue!=null?uo(r,!!i.multiple,i.defaultValue,!0):uo(r,!!i.multiple,i.multiple?[]:"",!1))}r[hr]=i}catch(S){Ee(e,e.return,S)}}break;case 6:if(St(t,e),kt(e),o&4){if(e.stateNode===null)throw Error(U(162));r=e.stateNode,i=e.memoizedProps;try{r.nodeValue=i}catch(S){Ee(e,e.return,S)}}break;case 3:if(St(t,e),kt(e),o&4&&n!==null&&n.memoizedState.isDehydrated)try{cr(t.containerInfo)}catch(S){Ee(e,e.return,S)}break;case 4:St(t,e),kt(e);break;case 13:St(t,e),kt(e),r=e.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(za=_e())),o&4&&dc(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(Ve=(d=Ve)||f,St(t,e),Ve=d):St(t,e),kt(e),o&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!f&&e.mode&1)for(O=e,f=e.child;f!==null;){for(m=O=f;O!==null;){switch(p=O,h=p.child,p.tag){case 0:case 11:case 14:case 15:tr(4,p,p.return);break;case 1:io(p,p.return);var _=p.stateNode;if(typeof _.componentWillUnmount=="function"){o=p,n=p.return;try{t=o,_.props=t.memoizedProps,_.state=t.memoizedState,_.componentWillUnmount()}catch(S){Ee(o,n,S)}}break;case 5:io(p,p.return);break;case 22:if(p.memoizedState!==null){pc(m);continue}}h!==null?(h.return=p,O=h):pc(m)}f=f.sibling}e:for(f=null,m=e;;){if(m.tag===5){if(f===null){f=m;try{r=m.stateNode,d?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(u=m.stateNode,c=m.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=If("display",s))}catch(S){Ee(e,e.return,S)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(S){Ee(e,e.return,S)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:St(t,e),kt(e),o&4&&dc(e);break;case 21:break;default:St(t,e),kt(e)}}function kt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Xp(n)){var o=n;break e}n=n.return}throw Error(U(160))}switch(o.tag){case 5:var r=o.stateNode;o.flags&32&&(sr(r,""),o.flags&=-33);var i=cc(e);Bl(e,i,r);break;case 3:case 4:var s=o.stateNode.containerInfo,u=cc(e);Hl(e,u,s);break;default:throw Error(U(161))}}catch(c){Ee(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ey(e,t,n){O=e,em(e)}function em(e,t,n){for(var o=(e.mode&1)!==0;O!==null;){var r=O,i=r.child;if(r.tag===22&&o){var s=r.memoizedState!==null||br;if(!s){var u=r.alternate,c=u!==null&&u.memoizedState!==null||Ve;u=br;var d=Ve;if(br=s,(Ve=c)&&!d)for(O=r;O!==null;)s=O,c=s.child,s.tag===22&&s.memoizedState!==null?mc(r):c!==null?(c.return=s,O=c):mc(r);for(;i!==null;)O=i,em(i),i=i.sibling;O=r,br=u,Ve=d}fc(e)}else r.subtreeFlags&8772&&i!==null?(i.return=r,O=i):fc(e)}}function fc(e){for(;O!==null;){var t=O;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ve||es(5,t);break;case 1:var o=t.stateNode;if(t.flags&4&&!Ve)if(n===null)o.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:Tt(t.type,n.memoizedProps);o.componentDidUpdate(r,n.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Qu(t,i,o);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Qu(t,s,n)}break;case 5:var u=t.stateNode;if(n===null&&t.flags&4){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&cr(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}Ve||t.flags&512&&Vl(t)}catch(p){Ee(t,t.return,p)}}if(t===e){O=null;break}if(n=t.sibling,n!==null){n.return=t.return,O=n;break}O=t.return}}function pc(e){for(;O!==null;){var t=O;if(t===e){O=null;break}var n=t.sibling;if(n!==null){n.return=t.return,O=n;break}O=t.return}}function mc(e){for(;O!==null;){var t=O;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{es(4,t)}catch(c){Ee(t,n,c)}break;case 1:var o=t.stateNode;if(typeof o.componentDidMount=="function"){var r=t.return;try{o.componentDidMount()}catch(c){Ee(t,r,c)}}var i=t.return;try{Vl(t)}catch(c){Ee(t,i,c)}break;case 5:var s=t.return;try{Vl(t)}catch(c){Ee(t,s,c)}}}catch(c){Ee(t,t.return,c)}if(t===e){O=null;break}var u=t.sibling;if(u!==null){u.return=t.return,O=u;break}O=t.return}}var _y=Math.ceil,Li=Qt.ReactCurrentDispatcher,qa=Qt.ReactCurrentOwner,mt=Qt.ReactCurrentBatchConfig,ne=0,Re=null,Ce=null,ke=0,nt=0,so=Tn(0),Ae=0,Sr=null,Bn=0,ts=0,ba=0,nr=null,Xe=null,za=0,xo=1/0,Bt=null,Ui=!1,$l=null,gn=null,zr=!1,un=null,Fi=0,or=0,Ol=null,ui=-1,ci=0;function ze(){return ne&6?_e():ui!==-1?ui:ui=_e()}function yn(e){return e.mode&1?ne&2&&ke!==0?ke&-ke:oy.transition!==null?(ci===0&&(ci=Vf()),ci):(e=le,e!==0||(e=window.event,e=e===void 0?16:zf(e.type)),e):1}function wt(e,t,n,o){if(50<or)throw or=0,Ol=null,Error(U(185));xr(e,n,o),(!(ne&2)||e!==Re)&&(e===Re&&(!(ne&2)&&(ts|=n),Ae===4&&ln(e,ke)),tt(e,o),n===1&&ne===0&&!(t.mode&1)&&(xo=_e()+500,Xi&&Cn()))}function tt(e,t){var n=e.callbackNode;og(e,t);var o=Ei(e,e===Re?ke:0);if(o===0)n!==null&&Cu(n),e.callbackNode=null,e.callbackPriority=0;else if(t=o&-o,e.callbackPriority!==t){if(n!=null&&Cu(n),t===1)e.tag===0?ny(hc.bind(null,e)):cp(hc.bind(null,e)),Zg(function(){!(ne&6)&&Cn()}),n=null;else{switch(Hf(o)){case 1:n=ya;break;case 4:n=Ff;break;case 16:n=vi;break;case 536870912:n=Gf;break;default:n=vi}n=am(n,tm.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function tm(e,t){if(ui=-1,ci=0,ne&6)throw Error(U(327));var n=e.callbackNode;if(ho()&&e.callbackNode!==n)return null;var o=Ei(e,e===Re?ke:0);if(o===0)return null;if(o&30||o&e.expiredLanes||t)t=Gi(e,o);else{t=o;var r=ne;ne|=2;var i=om();(Re!==e||ke!==t)&&(Bt=null,xo=_e()+500,Un(e,t));do try{Cy();break}catch(u){nm(e,u)}while(!0);Pa(),Li.current=i,ne=r,Ce!==null?t=0:(Re=null,ke=0,t=Ae)}if(t!==0){if(t===2&&(r=hl(e),r!==0&&(o=r,t=ql(e,r))),t===1)throw n=Sr,Un(e,0),ln(e,o),tt(e,_e()),n;if(t===6)ln(e,o);else{if(r=e.current.alternate,!(o&30)&&!Sy(r)&&(t=Gi(e,o),t===2&&(i=hl(e),i!==0&&(o=i,t=ql(e,i))),t===1))throw n=Sr,Un(e,0),ln(e,o),tt(e,_e()),n;switch(e.finishedWork=r,e.finishedLanes=o,t){case 0:case 1:throw Error(U(345));case 2:Rn(e,Xe,Bt);break;case 3:if(ln(e,o),(o&130023424)===o&&(t=za+500-_e(),10<t)){if(Ei(e,0)!==0)break;if(r=e.suspendedLanes,(r&o)!==o){ze(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=Cl(Rn.bind(null,e,Xe,Bt),t);break}Rn(e,Xe,Bt);break;case 4:if(ln(e,o),(o&4194240)===o)break;for(t=e.eventTimes,r=-1;0<o;){var s=31-It(o);i=1<<s,s=t[s],s>r&&(r=s),o&=~i}if(o=r,o=_e()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*_y(o/1960))-o,10<o){e.timeoutHandle=Cl(Rn.bind(null,e,Xe,Bt),o);break}Rn(e,Xe,Bt);break;case 5:Rn(e,Xe,Bt);break;default:throw Error(U(329))}}}return tt(e,_e()),e.callbackNode===n?tm.bind(null,e):null}function ql(e,t){var n=nr;return e.current.memoizedState.isDehydrated&&(Un(e,t).flags|=256),e=Gi(e,t),e!==2&&(t=Xe,Xe=n,t!==null&&bl(t)),e}function bl(e){Xe===null?Xe=e:Xe.push.apply(Xe,e)}function Sy(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var o=0;o<n.length;o++){var r=n[o],i=r.getSnapshot;r=r.value;try{if(!Rt(i(),r))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ln(e,t){for(t&=~ba,t&=~ts,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-It(t),o=1<<n;e[n]=-1,t&=~o}}function hc(e){if(ne&6)throw Error(U(327));ho();var t=Ei(e,0);if(!(t&1))return tt(e,_e()),null;var n=Gi(e,t);if(e.tag!==0&&n===2){var o=hl(e);o!==0&&(t=o,n=ql(e,o))}if(n===1)throw n=Sr,Un(e,0),ln(e,t),tt(e,_e()),n;if(n===6)throw Error(U(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Rn(e,Xe,Bt),tt(e,_e()),null}function Ja(e,t){var n=ne;ne|=1;try{return e(t)}finally{ne=n,ne===0&&(xo=_e()+500,Xi&&Cn())}}function $n(e){un!==null&&un.tag===0&&!(ne&6)&&ho();var t=ne;ne|=1;var n=mt.transition,o=le;try{if(mt.transition=null,le=1,e)return e()}finally{le=o,mt.transition=n,ne=t,!(ne&6)&&Cn()}}function Wa(){nt=so.current,ce(so)}function Un(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Xg(n)),Ce!==null)for(n=Ce.return;n!==null;){var o=n;switch(Aa(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&xi();break;case 3:To(),ce(je),ce(Be),Fa();break;case 5:Ua(o);break;case 4:To();break;case 13:ce(he);break;case 19:ce(he);break;case 10:Ma(o.type._context);break;case 22:case 23:Wa()}n=n.return}if(Re=e,Ce=e=vn(e.current,null),ke=nt=t,Ae=0,Sr=null,ba=ts=Bn=0,Xe=nr=null,Dn!==null){for(t=0;t<Dn.length;t++)if(n=Dn[t],o=n.interleaved,o!==null){n.interleaved=null;var r=o.next,i=n.pending;if(i!==null){var s=i.next;i.next=r,o.next=s}n.pending=o}Dn=null}return e}function nm(e,t){do{var n=Ce;try{if(Pa(),si.current=Di,ki){for(var o=ge.memoizedState;o!==null;){var r=o.queue;r!==null&&(r.pending=null),o=o.next}ki=!1}if(Hn=0,Ne=we=ge=null,er=!1,vr=0,qa.current=null,n===null||n.return===null){Ae=1,Sr=t,Ce=null;break}e:{var i=e,s=n.return,u=n,c=t;if(t=ke,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=u,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var h=nc(s);if(h!==null){h.flags&=-257,oc(h,s,u,i,t),h.mode&1&&tc(i,d,t),t=h,c=d;var _=t.updateQueue;if(_===null){var S=new Set;S.add(c),t.updateQueue=S}else _.add(c);break e}else{if(!(t&1)){tc(i,d,t),Ya();break e}c=Error(U(426))}}else if(fe&&u.mode&1){var C=nc(s);if(C!==null){!(C.flags&65536)&&(C.flags|=256),oc(C,s,u,i,t),Na(Co(c,u));break e}}i=c=Co(c,u),Ae!==4&&(Ae=2),nr===null?nr=[i]:nr.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var y=Hp(i,c,t);Ku(i,y);break e;case 1:u=c;var v=i.type,E=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(gn===null||!gn.has(E)))){i.flags|=65536,t&=-t,i.lanes|=t;var x=Bp(i,u,t);Ku(i,x);break e}}i=i.return}while(i!==null)}im(n)}catch(T){t=T,Ce===n&&n!==null&&(Ce=n=n.return);continue}break}while(!0)}function om(){var e=Li.current;return Li.current=Di,e===null?Di:e}function Ya(){(Ae===0||Ae===3||Ae===2)&&(Ae=4),Re===null||!(Bn&268435455)&&!(ts&268435455)||ln(Re,ke)}function Gi(e,t){var n=ne;ne|=2;var o=om();(Re!==e||ke!==t)&&(Bt=null,Un(e,t));do try{Ty();break}catch(r){nm(e,r)}while(!0);if(Pa(),ne=n,Li.current=o,Ce!==null)throw Error(U(261));return Re=null,ke=0,Ae}function Ty(){for(;Ce!==null;)rm(Ce)}function Cy(){for(;Ce!==null&&!Yh();)rm(Ce)}function rm(e){var t=lm(e.alternate,e,nt);e.memoizedProps=e.pendingProps,t===null?im(e):Ce=t,qa.current=null}function im(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=gy(n,t),n!==null){n.flags&=32767,Ce=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ae=6,Ce=null;return}}else if(n=hy(n,t,nt),n!==null){Ce=n;return}if(t=t.sibling,t!==null){Ce=t;return}Ce=t=e}while(t!==null);Ae===0&&(Ae=5)}function Rn(e,t,n){var o=le,r=mt.transition;try{mt.transition=null,le=1,xy(e,t,n,o)}finally{mt.transition=r,le=o}return null}function xy(e,t,n,o){do ho();while(un!==null);if(ne&6)throw Error(U(327));n=e.finishedWork;var r=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(U(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(rg(e,i),e===Re&&(Ce=Re=null,ke=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||zr||(zr=!0,am(vi,function(){return ho(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=mt.transition,mt.transition=null;var s=le;le=1;var u=ne;ne|=4,qa.current=null,vy(e,n),jp(n,e),bg(Sl),_i=!!_l,Sl=_l=null,e.current=n,Ey(n),Kh(),ne=u,le=s,mt.transition=i}else e.current=n;if(zr&&(zr=!1,un=e,Fi=r),i=e.pendingLanes,i===0&&(gn=null),Zh(n.stateNode),tt(e,_e()),t!==null)for(o=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],o(r.value,{componentStack:r.stack,digest:r.digest});if(Ui)throw Ui=!1,e=$l,$l=null,e;return Fi&1&&e.tag!==0&&ho(),i=e.pendingLanes,i&1?e===Ol?or++:(or=0,Ol=e):or=0,Cn(),null}function ho(){if(un!==null){var e=Hf(Fi),t=mt.transition,n=le;try{if(mt.transition=null,le=16>e?16:e,un===null)var o=!1;else{if(e=un,un=null,Fi=0,ne&6)throw Error(U(331));var r=ne;for(ne|=4,O=e.current;O!==null;){var i=O,s=i.child;if(O.flags&16){var u=i.deletions;if(u!==null){for(var c=0;c<u.length;c++){var d=u[c];for(O=d;O!==null;){var f=O;switch(f.tag){case 0:case 11:case 15:tr(8,f,i)}var m=f.child;if(m!==null)m.return=f,O=m;else for(;O!==null;){f=O;var p=f.sibling,h=f.return;if(Qp(f),f===d){O=null;break}if(p!==null){p.return=h,O=p;break}O=h}}}var _=i.alternate;if(_!==null){var S=_.child;if(S!==null){_.child=null;do{var C=S.sibling;S.sibling=null,S=C}while(S!==null)}}O=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,O=s;else e:for(;O!==null;){if(i=O,i.flags&2048)switch(i.tag){case 0:case 11:case 15:tr(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,O=y;break e}O=i.return}}var v=e.current;for(O=v;O!==null;){s=O;var E=s.child;if(s.subtreeFlags&2064&&E!==null)E.return=s,O=E;else e:for(s=v;O!==null;){if(u=O,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:es(9,u)}}catch(T){Ee(u,u.return,T)}if(u===s){O=null;break e}var x=u.sibling;if(x!==null){x.return=u.return,O=x;break e}O=u.return}}if(ne=r,Cn(),Ut&&typeof Ut.onPostCommitFiberRoot=="function")try{Ut.onPostCommitFiberRoot(Ji,e)}catch{}o=!0}return o}finally{le=n,mt.transition=t}}return!1}function gc(e,t,n){t=Co(n,t),t=Hp(e,t,1),e=hn(e,t,1),t=ze(),e!==null&&(xr(e,1,t),tt(e,t))}function Ee(e,t,n){if(e.tag===3)gc(e,e,n);else for(;t!==null;){if(t.tag===3){gc(t,e,n);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(gn===null||!gn.has(o))){e=Co(n,e),e=Bp(t,e,1),t=hn(t,e,1),e=ze(),t!==null&&(xr(t,1,e),tt(t,e));break}}t=t.return}}function Iy(e,t,n){var o=e.pingCache;o!==null&&o.delete(t),t=ze(),e.pingedLanes|=e.suspendedLanes&n,Re===e&&(ke&n)===n&&(Ae===4||Ae===3&&(ke&130023424)===ke&&500>_e()-za?Un(e,0):ba|=n),tt(e,t)}function sm(e,t){t===0&&(e.mode&1?(t=Ur,Ur<<=1,!(Ur&130023424)&&(Ur=4194304)):t=1);var n=ze();e=Wt(e,t),e!==null&&(xr(e,t,n),tt(e,n))}function wy(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),sm(e,n)}function Ay(e,t){var n=0;switch(e.tag){case 13:var o=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(U(314))}o!==null&&o.delete(t),sm(e,n)}var lm;lm=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||je.current)Ze=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ze=!1,my(e,t,n);Ze=!!(e.flags&131072)}else Ze=!1,fe&&t.flags&1048576&&dp(t,Ai,t.index);switch(t.lanes=0,t.tag){case 2:var o=t.type;ai(e,t),e=t.pendingProps;var r=Eo(t,Be.current);mo(t,n),r=Va(null,t,o,e,r,n);var i=Ha();return t.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,et(o)?(i=!0,Ii(t)):i=!1,t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Da(t),r.updater=ji,t.stateNode=r,r._reactInternals=t,Pl(t,o,e,n),t=Dl(null,t,o,!0,i,n)):(t.tag=0,fe&&i&&wa(t),be(null,t,r,n),t=t.child),t;case 16:o=t.elementType;e:{switch(ai(e,t),e=t.pendingProps,r=o._init,o=r(o._payload),t.type=o,r=t.tag=Ry(o),e=Tt(o,e),r){case 0:t=kl(null,t,o,e,n);break e;case 1:t=sc(null,t,o,e,n);break e;case 11:t=rc(null,t,o,e,n);break e;case 14:t=ic(null,t,o,Tt(o.type,e),n);break e}throw Error(U(306,o,""))}return t;case 0:return o=t.type,r=t.pendingProps,r=t.elementType===o?r:Tt(o,r),kl(e,t,o,r,n);case 1:return o=t.type,r=t.pendingProps,r=t.elementType===o?r:Tt(o,r),sc(e,t,o,r,n);case 3:e:{if(bp(t),e===null)throw Error(U(387));o=t.pendingProps,i=t.memoizedState,r=i.element,yp(e,t),Pi(t,o,null,n);var s=t.memoizedState;if(o=s.element,i.isDehydrated)if(i={element:o,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){r=Co(Error(U(423)),t),t=lc(e,t,o,n,r);break e}else if(o!==r){r=Co(Error(U(424)),t),t=lc(e,t,o,n,r);break e}else for(rt=mn(t.stateNode.containerInfo.firstChild),it=t,fe=!0,xt=null,n=hp(t,null,o,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(_o(),o===r){t=Yt(e,t,n);break e}be(e,t,o,n)}t=t.child}return t;case 5:return vp(t),e===null&&Al(t),o=t.type,r=t.pendingProps,i=e!==null?e.memoizedProps:null,s=r.children,Tl(o,r)?s=null:i!==null&&Tl(o,i)&&(t.flags|=32),qp(e,t),be(e,t,s,n),t.child;case 6:return e===null&&Al(t),null;case 13:return zp(e,t,n);case 4:return La(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=So(t,null,o,n):be(e,t,o,n),t.child;case 11:return o=t.type,r=t.pendingProps,r=t.elementType===o?r:Tt(o,r),rc(e,t,o,r,n);case 7:return be(e,t,t.pendingProps,n),t.child;case 8:return be(e,t,t.pendingProps.children,n),t.child;case 12:return be(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(o=t.type._context,r=t.pendingProps,i=t.memoizedProps,s=r.value,ae(Ni,o._currentValue),o._currentValue=s,i!==null)if(Rt(i.value,s)){if(i.children===r.children&&!je.current){t=Yt(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var u=i.dependencies;if(u!==null){s=i.child;for(var c=u.firstContext;c!==null;){if(c.context===o){if(i.tag===1){c=bt(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Nl(i.return,n,t),u.lanes|=n;break}c=c.next}}else if(i.tag===10)s=i.type===t.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(U(341));s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Nl(s,n,t),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===t){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}be(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,o=t.pendingProps.children,mo(t,n),r=gt(r),o=o(r),t.flags|=1,be(e,t,o,n),t.child;case 14:return o=t.type,r=Tt(o,t.pendingProps),r=Tt(o.type,r),ic(e,t,o,r,n);case 15:return $p(e,t,t.type,t.pendingProps,n);case 17:return o=t.type,r=t.pendingProps,r=t.elementType===o?r:Tt(o,r),ai(e,t),t.tag=1,et(o)?(e=!0,Ii(t)):e=!1,mo(t,n),Vp(t,o,r),Pl(t,o,r,n),Dl(null,t,o,!0,e,n);case 19:return Jp(e,t,n);case 22:return Op(e,t,n)}throw Error(U(156,t.tag))};function am(e,t){return Uf(e,t)}function Ny(e,t,n,o){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pt(e,t,n,o){return new Ny(e,t,n,o)}function Ka(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ry(e){if(typeof e=="function")return Ka(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ma)return 11;if(e===ha)return 14}return 2}function vn(e,t){var n=e.alternate;return n===null?(n=pt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function di(e,t,n,o,r,i){var s=2;if(o=e,typeof e=="function")Ka(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Qn:return Fn(n.children,r,i,t);case pa:s=8,r|=8;break;case el:return e=pt(12,n,t,r|2),e.elementType=el,e.lanes=i,e;case tl:return e=pt(13,n,t,r),e.elementType=tl,e.lanes=i,e;case nl:return e=pt(19,n,t,r),e.elementType=nl,e.lanes=i,e;case vf:return ns(n,r,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case gf:s=10;break e;case yf:s=9;break e;case ma:s=11;break e;case ha:s=14;break e;case on:s=16,o=null;break e}throw Error(U(130,e==null?e:typeof e,""))}return t=pt(s,n,t,r),t.elementType=e,t.type=o,t.lanes=i,t}function Fn(e,t,n,o){return e=pt(7,e,o,t),e.lanes=n,e}function ns(e,t,n,o){return e=pt(22,e,o,t),e.elementType=vf,e.lanes=n,e.stateNode={isHidden:!1},e}function zs(e,t,n){return e=pt(6,e,null,t),e.lanes=n,e}function Js(e,t,n){return t=pt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Py(e,t,n,o,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ws(0),this.expirationTimes=ws(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ws(0),this.identifierPrefix=o,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Qa(e,t,n,o,r,i,s,u,c){return e=new Py(e,t,n,u,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=pt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:o,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Da(i),e}function My(e,t,n){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Kn,key:o==null?null:""+o,children:e,containerInfo:t,implementation:n}}function um(e){if(!e)return _n;e=e._reactInternals;e:{if(qn(e)!==e||e.tag!==1)throw Error(U(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(et(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(U(171))}if(e.tag===1){var n=e.type;if(et(n))return up(e,n,t)}return t}function cm(e,t,n,o,r,i,s,u,c){return e=Qa(n,o,!0,e,r,i,s,u,c),e.context=um(null),n=e.current,o=ze(),r=yn(n),i=bt(o,r),i.callback=t??null,hn(n,i,r),e.current.lanes=r,xr(e,r,o),tt(e,o),e}function os(e,t,n,o){var r=t.current,i=ze(),s=yn(r);return n=um(n),t.context===null?t.context=n:t.pendingContext=n,t=bt(i,s),t.payload={element:e},o=o===void 0?null:o,o!==null&&(t.callback=o),e=hn(r,t,s),e!==null&&(wt(e,r,s,i),ii(e,r,s)),s}function Vi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function yc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Xa(e,t){yc(e,t),(e=e.alternate)&&yc(e,t)}function ky(){return null}var dm=typeof reportError=="function"?reportError:function(e){console.error(e)};function Za(e){this._internalRoot=e}rs.prototype.render=Za.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(U(409));os(e,t,null,null)};rs.prototype.unmount=Za.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;$n(function(){os(null,e,null,null)}),t[Jt]=null}};function rs(e){this._internalRoot=e}rs.prototype.unstable_scheduleHydration=function(e){if(e){var t=Of();e={blockedOn:null,target:e,priority:t};for(var n=0;n<sn.length&&t!==0&&t<sn[n].priority;n++);sn.splice(n,0,e),n===0&&bf(e)}};function ja(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function is(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function vc(){}function Dy(e,t,n,o,r){if(r){if(typeof o=="function"){var i=o;o=function(){var d=Vi(s);i.call(d)}}var s=cm(t,o,e,0,null,!1,!1,"",vc);return e._reactRootContainer=s,e[Jt]=s.current,pr(e.nodeType===8?e.parentNode:e),$n(),s}for(;r=e.lastChild;)e.removeChild(r);if(typeof o=="function"){var u=o;o=function(){var d=Vi(c);u.call(d)}}var c=Qa(e,0,!1,null,null,!1,!1,"",vc);return e._reactRootContainer=c,e[Jt]=c.current,pr(e.nodeType===8?e.parentNode:e),$n(function(){os(t,c,n,o)}),c}function ss(e,t,n,o,r){var i=n._reactRootContainer;if(i){var s=i;if(typeof r=="function"){var u=r;r=function(){var c=Vi(s);u.call(c)}}os(t,s,e,r)}else s=Dy(n,t,e,r,o);return Vi(s)}Bf=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Jo(t.pendingLanes);n!==0&&(va(t,n|1),tt(t,_e()),!(ne&6)&&(xo=_e()+500,Cn()))}break;case 13:$n(function(){var o=Wt(e,1);if(o!==null){var r=ze();wt(o,e,1,r)}}),Xa(e,1)}};Ea=function(e){if(e.tag===13){var t=Wt(e,134217728);if(t!==null){var n=ze();wt(t,e,134217728,n)}Xa(e,134217728)}};$f=function(e){if(e.tag===13){var t=yn(e),n=Wt(e,t);if(n!==null){var o=ze();wt(n,e,t,o)}Xa(e,t)}};Of=function(){return le};qf=function(e,t){var n=le;try{return le=e,t()}finally{le=n}};fl=function(e,t,n){switch(t){case"input":if(il(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var o=n[t];if(o!==e&&o.form===e.form){var r=Qi(o);if(!r)throw Error(U(90));_f(o),il(o,r)}}}break;case"textarea":Tf(e,n);break;case"select":t=n.value,t!=null&&uo(e,!!n.multiple,t,!1)}};Rf=Ja;Pf=$n;var Ly={usingClientEntryPoint:!1,Events:[wr,eo,Qi,Af,Nf,Ja]},Bo={findFiberByHostInstance:kn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Uy={bundleType:Bo.bundleType,version:Bo.version,rendererPackageName:Bo.rendererPackageName,rendererConfig:Bo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Df(e),e===null?null:e.stateNode},findFiberByHostInstance:Bo.findFiberByHostInstance||ky,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jr.isDisabled&&Jr.supportsFiber)try{Ji=Jr.inject(Uy),Ut=Jr}catch{}}lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ly;lt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ja(t))throw Error(U(200));return My(e,t,null,n)};lt.createRoot=function(e,t){if(!ja(e))throw Error(U(299));var n=!1,o="",r=dm;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),t=Qa(e,1,!1,null,null,n,!1,o,r),e[Jt]=t.current,pr(e.nodeType===8?e.parentNode:e),new Za(t)};lt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(U(188)):(e=Object.keys(e).join(","),Error(U(268,e)));return e=Df(t),e=e===null?null:e.stateNode,e};lt.flushSync=function(e){return $n(e)};lt.hydrate=function(e,t,n){if(!is(t))throw Error(U(200));return ss(null,e,t,!0,n)};lt.hydrateRoot=function(e,t,n){if(!ja(e))throw Error(U(405));var o=n!=null&&n.hydratedSources||null,r=!1,i="",s=dm;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=cm(t,null,e,1,n??null,r,!1,i,s),e[Jt]=t.current,pr(e),o)for(e=0;e<o.length;e++)n=o[e],r=n._getVersion,r=r(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new rs(t)};lt.render=function(e,t,n){if(!is(t))throw Error(U(200));return ss(null,e,t,!1,n)};lt.unmountComponentAtNode=function(e){if(!is(e))throw Error(U(40));return e._reactRootContainer?($n(function(){ss(null,null,e,!1,function(){e._reactRootContainer=null,e[Jt]=null})}),!0):!1};lt.unstable_batchedUpdates=Ja;lt.unstable_renderSubtreeIntoContainer=function(e,t,n,o){if(!is(n))throw Error(U(200));if(e==null||e._reactInternals===void 0)throw Error(U(38));return ss(e,t,n,!1,o)};lt.version="18.3.1-next-f1338f8080-20240426";function fm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fm)}catch(e){console.error(e)}}fm(),ff.exports=lt;var Fy=ff.exports,Ec=Fy;Zs.createRoot=Ec.createRoot,Zs.hydrateRoot=Ec.hydrateRoot;const Gy=({onSelectGame:e})=>g.jsx("div",{className:"min-h-screen bg-slate-900 flex flex-col items-center justify-center p-6 font-sans",children:g.jsxs("div",{className:"max-w-4xl w-full",children:[g.jsxs("header",{className:"text-center mb-12",children:[g.jsx("h1",{className:"text-5xl md:text-6xl font-black text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 via-purple-400 to-pink-400 mb-4 tracking-tight drop-shadow-lg",children:"GEMINI "}),g.jsx("p",{className:"text-slate-400 text-lg",children:" AI "})]}),g.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[g.jsxs("button",{onClick:()=>e("liar"),className:"group relative bg-slate-800 rounded-3xl p-1 overflow-hidden transition-all duration-300 hover:scale-105 hover:shadow-[0_0_40px_rgba(99,102,241,0.4)] text-left",children:[g.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-500 to-purple-600 opacity-10 group-hover:opacity-20 transition-opacity"}),g.jsxs("div",{className:"bg-slate-900/90 rounded-[22px] h-full p-8 flex flex-col relative z-10 border border-slate-700 group-hover:border-indigo-500/50",children:[g.jsx("div",{className:"text-6xl mb-6 group-hover:scale-110 transition-transform duration-300 origin-left",children:""}),g.jsx("h2",{className:"text-3xl font-bold text-white mb-2 group-hover:text-indigo-400 transition-colors",children:""}),g.jsx("h3",{className:"text-sm font-bold text-indigo-500 uppercase tracking-widest mb-4",children:"Liar's Dice"}),g.jsx("p",{className:"text-slate-400 mb-6 flex-1 leading-relaxed",children:""}),g.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[g.jsx("span",{className:"bg-slate-800 px-3 py-1 rounded-full border border-slate-700",children:"2-6 "}),g.jsx("span",{className:"bg-slate-800 px-3 py-1 rounded-full border border-slate-700",children:"AI "})]})]})]}),g.jsxs("button",{onClick:()=>e("rummikub"),className:"group relative bg-slate-800 rounded-3xl p-1 overflow-hidden transition-all duration-300 hover:scale-105 hover:shadow-[0_0_40px_rgba(244,63,94,0.4)] text-left",children:[g.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-rose-500 to-orange-600 opacity-10 group-hover:opacity-20 transition-opacity"}),g.jsxs("div",{className:"bg-slate-900/90 rounded-[22px] h-full p-8 flex flex-col relative z-10 border border-slate-700 group-hover:border-rose-500/50",children:[g.jsxs("div",{className:"w-16 h-20 bg-slate-100 rounded-lg mb-6 group-hover:scale-110 transition-transform duration-300 origin-left shadow-lg flex items-center justify-center border-2 border-slate-300 relative overflow-hidden",children:[g.jsx("div",{className:"absolute top-1 left-1 text-[10px] text-red-500 font-bold",children:""}),g.jsx("div",{className:"text-4xl",children:""}),g.jsx("div",{className:"absolute bottom-1 right-1 text-[10px] text-red-500 font-bold rotate-180",children:""})]}),g.jsx("h2",{className:"text-3xl font-bold text-white mb-2 group-hover:text-rose-400 transition-colors",children:""}),g.jsx("h3",{className:"text-sm font-bold text-rose-500 uppercase tracking-widest mb-4",children:"Rummikub"}),g.jsx("p",{className:"text-slate-400 mb-6 flex-1 leading-relaxed",children:""}),g.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[g.jsx("span",{className:"bg-slate-800 px-3 py-1 rounded-full border border-slate-700",children:"2-4 "}),g.jsx("span",{className:"bg-slate-800 px-3 py-1 rounded-full border border-slate-700",children:"AI "})]})]})]})]}),g.jsx("footer",{className:"mt-12 text-center text-slate-600 text-sm",children:"Designed with Gemini AI  v1.3.1"})]})}),Vy=[1,2,3,4,5,6],Hy=6,By=2,Pn=5,$y=3,Oy=["red","blue","orange","black"],Wr={1:"",2:"",3:"",4:"",5:"",6:""},cn=["bg-red-500","bg-blue-500","bg-green-500","bg-yellow-500","bg-purple-500","bg-pink-500"],fi=["","","","","","","",""],me=({children:e,variant:t="primary",isLoading:n,className:o="",disabled:r,...i})=>{const s="px-4 py-2 rounded-lg font-semibold transition-all duration-200 flex items-center justify-center gap-2 active:scale-95 disabled:opacity-50 disabled:active:scale-100 disabled:cursor-not-allowed",u={primary:"bg-indigo-600 hover:bg-indigo-500 text-white shadow-lg shadow-indigo-900/50",secondary:"bg-slate-700 hover:bg-slate-600 text-white shadow-lg shadow-slate-900/50",danger:"bg-rose-600 hover:bg-rose-500 text-white shadow-lg shadow-rose-900/50",ghost:"bg-transparent hover:bg-white/10 text-slate-300"};return g.jsx("button",{className:`${s} ${u[t]} ${o}`,disabled:n||r,...i,children:n?g.jsxs("svg",{className:"animate-spin h-5 w-5 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[g.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),g.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):e})},qy=e=>Array.from({length:e},()=>Math.floor(Math.random()*6)+1),Ws=(e,t,n)=>!e||t>e.quantity||t===e.quantity&&n>e.face,by=(e,t)=>{let n=0;return e.forEach(o=>{o.dice.forEach(r=>{(r===t||r===1)&&n++})}),n},zy=()=>{const e="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let t="";for(let n=0;n<4;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return t},eu=(e,t="liar")=>{const n=new URL(window.location.href);return n.search="",n.searchParams.set("room",e),n.searchParams.set("game",t),n.toString()},pm=()=>{const e=new URLSearchParams(window.location.search),t=e.get("room"),n=e.get("game")||"liar";return t?{roomId:t,gameType:n,isGuest:!0}:null},Jy=({initialGameType:e="liar",onStartGame:t,onBack:n})=>{const[o,r]=H.useState(""),[i,s]=H.useState("single"),[u,c]=H.useState(e),[d,f]=H.useState(3),[m,p]=H.useState("easy"),[h,_]=H.useState(""),[S,C]=H.useState(Pn),[y,v]=H.useState("classic"),[E,x]=H.useState($y),[T,P]=H.useState("standard"),[D,L]=H.useState(!1),[A,F]=H.useState(!1),J=u==="rummikub"?4:Hy;H.useEffect(()=>{const Z=pm();Z?(s("multiplayer"),_(Z.roomId),c(Z.gameType),F(!0)):(_(zy()),F(!1),c(e))},[e]);const oe=()=>{const Z=eu(h,u);navigator.clipboard.writeText(Z),L(!0),setTimeout(()=>L(!1),2e3)},re=()=>{if(!o.trim()){alert("");return}t({gameType:u,playerCount:d,startingDice:S,playerName:o||" 1",difficulty:m,mode:i,roomId:i==="multiplayer"?h:void 0,isHost:i==="single"?!0:!A,gameMode:y,maxHealth:E,rummikubVersion:T})};return g.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-slate-900 p-4 font-sans",children:g.jsxs("div",{className:"w-full max-w-md bg-slate-800 rounded-2xl shadow-2xl p-8 border border-slate-700 relative overflow-hidden animate-fade-in-up",children:[g.jsxs("div",{className:"flex items-center justify-between mb-6",children:[g.jsx(me,{variant:"ghost",onClick:n,className:"text-xs -ml-2 text-slate-500 hover:text-white",children:" "}),g.jsx("div",{className:"text-xs font-bold uppercase tracking-wider text-slate-500 bg-slate-900 px-2 py-1 rounded",children:u==="liar"?"Liar's Dice":"Rummikub"})]}),g.jsx("h1",{className:`text-4xl font-bold text-center mb-2 ${u==="liar"?"text-indigo-400":"text-rose-400"}`,children:u==="liar"?"Gemini ":""}),g.jsx("p",{className:"text-slate-400 text-center mb-6",children:i==="single"?" / AI ":A?"":""}),!A&&g.jsxs("div",{className:"flex bg-slate-900 p-1 rounded-xl mb-6 border border-slate-700",children:[g.jsx("button",{onClick:()=>s("single"),className:`flex-1 py-2 text-sm font-bold rounded-lg transition-all ${i==="single"?"bg-white/10 text-white shadow-lg":"text-slate-400 hover:text-white"}`,children:" (vs AI)"}),g.jsx("button",{onClick:()=>s("multiplayer"),className:`flex-1 py-2 text-sm font-bold rounded-lg transition-all ${i==="multiplayer"?"bg-white/10 text-white shadow-lg":"text-slate-400 hover:text-white"}`,children:""})]}),g.jsxs("div",{className:"space-y-6",children:[i==="multiplayer"&&g.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-xl border border-slate-700",children:[g.jsx("div",{className:"flex items-center justify-between mb-2",children:g.jsxs("div",{children:[g.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wider font-bold",children:" (Room ID)"}),A?g.jsx("p",{className:"text-xl font-mono text-white tracking-widest",children:h}):g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("p",{className:"text-xl font-mono text-white tracking-widest",children:h}),g.jsx(me,{variant:"ghost",onClick:oe,className:"text-xs h-8 px-2",children:D?"":""})]})]})}),!A&&g.jsx("p",{className:"text-xs text-slate-400",children:""}),A&&g.jsx("p",{className:"text-xs text-slate-400",children:""})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:"block text-sm font-medium text-slate-300",children:""}),g.jsx("input",{type:"text",value:o,onChange:Z=>r(Z.target.value),placeholder:"",className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-indigo-500 focus:outline-none"})]}),g.jsxs("div",{className:"border-t border-slate-700 my-4 pt-4 relative",children:[g.jsxs("p",{className:"text-xs font-bold text-slate-500 mb-4 uppercase tracking-wider flex justify-between",children:[g.jsx("span",{children:""}),A&&g.jsx("span",{className:"text-indigo-400 animate-pulse",children:""})]}),A&&g.jsx("div",{className:"absolute inset-0 top-10 bg-slate-900/40 z-10 cursor-not-allowed backdrop-blur-[1px] rounded-lg border border-white/5"}),u==="liar"&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:`space-y-2 mb-4 transition-opacity ${A?"opacity-50":""}`,children:[g.jsx("label",{className:"block text-sm font-medium text-slate-300",children:""}),g.jsxs("div",{className:"flex gap-2 bg-slate-900 p-1 rounded-lg",children:[g.jsx("button",{onClick:()=>!A&&v("classic"),disabled:A,className:`flex-1 py-1.5 text-xs font-bold rounded transition-colors ${y==="classic"?"bg-slate-700 text-white shadow":"text-slate-500 hover:text-slate-300"}`,children:" ()"}),g.jsx("button",{onClick:()=>!A&&v("hearts"),disabled:A,className:`flex-1 py-1.5 text-xs font-bold rounded transition-colors ${y==="hearts"?"bg-rose-900/50 text-rose-300 shadow ring-1 ring-rose-800":"text-slate-500 hover:text-slate-300"}`,children:" ()"})]})]}),y==="classic"?g.jsxs("div",{className:`space-y-2 mb-4 transition-opacity ${A?"opacity-50":""}`,children:[g.jsxs("div",{className:"flex justify-between text-sm text-slate-300",children:[g.jsx("span",{children:""}),g.jsxs("span",{className:"font-bold text-indigo-400",children:[A?"?":S," "]})]}),g.jsx("input",{type:"range",min:1,max:6,value:S,onChange:Z=>C(Number(Z.target.value)),disabled:A,className:"w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-indigo-500 disabled:cursor-not-allowed"})]}):g.jsxs("div",{className:`space-y-2 mb-4 transition-opacity ${A?"opacity-50":""}`,children:[g.jsxs("div",{className:"flex justify-between text-sm text-slate-300",children:[g.jsx("span",{children:" ()"}),g.jsxs("span",{className:"font-bold text-rose-400",children:[A?"?":E," "]})]}),g.jsx("input",{type:"range",min:1,max:10,value:E,onChange:Z=>x(Number(Z.target.value)),disabled:A,className:"w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-rose-500 disabled:cursor-not-allowed"})]})]}),u==="rummikub"&&g.jsxs("div",{className:`space-y-2 mb-4 transition-opacity ${A?"opacity-50":""}`,children:[g.jsx("label",{className:"block text-sm font-medium text-slate-300",children:""}),g.jsxs("div",{className:"flex gap-2 bg-slate-900 p-1 rounded-lg",children:[g.jsx("button",{onClick:()=>!A&&P("standard"),disabled:A,className:`flex-1 py-1.5 text-xs font-bold rounded transition-colors ${T==="standard"?"bg-slate-700 text-white shadow":"text-slate-500 hover:text-slate-300"}`,children:""}),g.jsx("button",{onClick:()=>!A&&P("face-change"),disabled:A,className:`flex-1 py-1.5 text-xs font-bold rounded transition-colors ${T==="face-change"?"bg-amber-900/50 text-amber-300 shadow ring-1 ring-amber-700":"text-slate-500 hover:text-slate-300"}`,children:" "})]}),g.jsx("p",{className:"text-[10px] text-slate-500 mt-1",children:T==="standard"?"":""})]}),g.jsxs("div",{className:`space-y-2 mb-4 transition-opacity ${A?"opacity-50":""}`,children:[g.jsxs("div",{className:"flex justify-between text-sm text-slate-300",children:[g.jsx("span",{children:" ( AI)"}),g.jsxs("span",{className:`font-bold ${u==="liar"?"text-indigo-400":"text-rose-400"}`,children:[A?"?":d," "]})]}),g.jsx("input",{type:"range",min:By,max:J,value:Math.min(d,J),onChange:Z=>f(Number(Z.target.value)),disabled:A,className:`w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer disabled:cursor-not-allowed ${u==="liar"?"accent-indigo-500":"accent-rose-500"}`})]}),g.jsxs("div",{className:`space-y-2 transition-opacity ${A?"opacity-50":""}`,children:[g.jsx("label",{className:"block text-sm font-medium text-slate-300",children:"AI "}),g.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[g.jsx("button",{onClick:()=>!A&&p("easy"),disabled:A,className:`px-4 py-2 rounded-lg border text-sm font-semibold transition-colors ${m==="easy"?"bg-green-600/20 border-green-500 text-green-400":"bg-slate-900 border-slate-700 text-slate-400"}`,children:""}),g.jsx("button",{onClick:()=>!A&&p("hard"),disabled:A,className:`px-4 py-2 rounded-lg border text-sm font-semibold transition-colors ${m==="hard"?"bg-red-600/20 border-red-500 text-red-400":"bg-slate-900 border-slate-700 text-slate-400"}`,children:"Gemini Pro"})]})]})]}),g.jsx(me,{onClick:re,className:"w-full py-3 text-lg mt-4",variant:u==="liar"?"primary":"danger",children:i==="single"?"":A?"":""}),i==="multiplayer"&&!A&&g.jsx("p",{className:"text-xs text-center text-slate-500 mt-2",children:""})]})]})})};var j=(e=>(e.LOBBY="LOBBY",e.PLAYING="PLAYING",e.ROUND_END="ROUND_END",e.GAME_OVER="GAME_OVER",e))(j||{}),Wy={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Yy,Ky;function Qy(){return{geminiUrl:Yy,vertexUrl:Ky}}function Xy(e,t,n,o){var r,i;if(!(e!=null&&e.baseUrl)){const s=Qy();return t?(r=s.vertexUrl)!==null&&r!==void 0?r:n:(i=s.geminiUrl)!==null&&i!==void 0?i:o}return e.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Xt{}function B(e,t){const n=/\{([^}]+)\}/g;return e.replace(n,(o,r)=>{if(Object.prototype.hasOwnProperty.call(t,r)){const i=t[r];return i!=null?String(i):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function a(e,t,n){for(let i=0;i<t.length-1;i++){const s=t[i];if(s.endsWith("[]")){const u=s.slice(0,-2);if(!(u in e))if(Array.isArray(n))e[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(e[u])){const c=e[u];if(Array.isArray(n))for(let d=0;d<c.length;d++){const f=c[d];a(f,t.slice(i+1),n[d])}else for(const d of c)a(d,t.slice(i+1),n)}return}else if(s.endsWith("[0]")){const u=s.slice(0,-3);u in e||(e[u]=[{}]);const c=e[u];a(c[0],t.slice(i+1),n);return}(!e[s]||typeof e[s]!="object")&&(e[s]={}),e=e[s]}const o=t[t.length-1],r=e[o];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(e,n):e[o]=n}function l(e,t,n=void 0){try{if(t.length===1&&t[0]==="_self")return e;for(let o=0;o<t.length;o++){if(typeof e!="object"||e===null)return n;const r=t[o];if(r.endsWith("[]")){const i=r.slice(0,-2);if(i in e){const s=e[i];return Array.isArray(s)?s.map(u=>l(u,t.slice(o+1),n)):n}else return n}else e=e[r]}return e}catch(o){if(o instanceof TypeError)return n;throw o}}function Zy(e,t){for(const[n,o]of Object.entries(t)){const r=n.split("."),i=o.split("."),s=new Set;let u=-1;for(let c=0;c<r.length;c++)if(r[c]==="*"){u=c;break}if(u!==-1&&i.length>u)for(let c=u;c<i.length;c++){const d=i[c];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&s.add(d)}zl(e,r,i,0,s)}}function zl(e,t,n,o,r){if(o>=t.length||typeof e!="object"||e===null)return;const i=t[o];if(i.endsWith("[]")){const s=i.slice(0,-2),u=e;if(s in u&&Array.isArray(u[s]))for(const c of u[s])zl(c,t,n,o+1,r)}else if(i==="*"){if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const s=e,u=Object.keys(s).filter(d=>!d.startsWith("_")&&!r.has(d)),c={};for(const d of u)c[d]=s[d];for(const[d,f]of Object.entries(c)){const m=[];for(const p of n.slice(o))p==="*"?m.push(d):m.push(p);a(s,m,f)}for(const d of u)delete s[d]}}else{const s=e;i in s&&zl(s[i],t,n,o+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tu(e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jy(e){const t={},n=l(e,["operationName"]);n!=null&&a(t,["operationName"],n);const o=l(e,["resourceName"]);return o!=null&&a(t,["_url","resourceName"],o),t}function ev(e){const t={},n=l(e,["name"]);n!=null&&a(t,["name"],n);const o=l(e,["metadata"]);o!=null&&a(t,["metadata"],o);const r=l(e,["done"]);r!=null&&a(t,["done"],r);const i=l(e,["error"]);i!=null&&a(t,["error"],i);const s=l(e,["response","generateVideoResponse"]);return s!=null&&a(t,["response"],nv(s)),t}function tv(e){const t={},n=l(e,["name"]);n!=null&&a(t,["name"],n);const o=l(e,["metadata"]);o!=null&&a(t,["metadata"],o);const r=l(e,["done"]);r!=null&&a(t,["done"],r);const i=l(e,["error"]);i!=null&&a(t,["error"],i);const s=l(e,["response"]);return s!=null&&a(t,["response"],ov(s)),t}function nv(e){const t={},n=l(e,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>rv(s))),a(t,["generatedVideos"],i)}const o=l(e,["raiMediaFilteredCount"]);o!=null&&a(t,["raiMediaFilteredCount"],o);const r=l(e,["raiMediaFilteredReasons"]);return r!=null&&a(t,["raiMediaFilteredReasons"],r),t}function ov(e){const t={},n=l(e,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>iv(s))),a(t,["generatedVideos"],i)}const o=l(e,["raiMediaFilteredCount"]);o!=null&&a(t,["raiMediaFilteredCount"],o);const r=l(e,["raiMediaFilteredReasons"]);return r!=null&&a(t,["raiMediaFilteredReasons"],r),t}function rv(e){const t={},n=l(e,["video"]);return n!=null&&a(t,["video"],dv(n)),t}function iv(e){const t={},n=l(e,["_self"]);return n!=null&&a(t,["video"],fv(n)),t}function sv(e){const t={},n=l(e,["operationName"]);return n!=null&&a(t,["_url","operationName"],n),t}function lv(e){const t={},n=l(e,["operationName"]);return n!=null&&a(t,["_url","operationName"],n),t}function av(e){const t={},n=l(e,["name"]);n!=null&&a(t,["name"],n);const o=l(e,["metadata"]);o!=null&&a(t,["metadata"],o);const r=l(e,["done"]);r!=null&&a(t,["done"],r);const i=l(e,["error"]);i!=null&&a(t,["error"],i);const s=l(e,["response"]);return s!=null&&a(t,["response"],uv(s)),t}function uv(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const o=l(e,["parent"]);o!=null&&a(t,["parent"],o);const r=l(e,["documentName"]);return r!=null&&a(t,["documentName"],r),t}function mm(e){const t={},n=l(e,["name"]);n!=null&&a(t,["name"],n);const o=l(e,["metadata"]);o!=null&&a(t,["metadata"],o);const r=l(e,["done"]);r!=null&&a(t,["done"],r);const i=l(e,["error"]);i!=null&&a(t,["error"],i);const s=l(e,["response"]);return s!=null&&a(t,["response"],cv(s)),t}function cv(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const o=l(e,["parent"]);o!=null&&a(t,["parent"],o);const r=l(e,["documentName"]);return r!=null&&a(t,["documentName"],r),t}function dv(e){const t={},n=l(e,["uri"]);n!=null&&a(t,["uri"],n);const o=l(e,["encodedVideo"]);o!=null&&a(t,["videoBytes"],tu(o));const r=l(e,["encoding"]);return r!=null&&a(t,["mimeType"],r),t}function fv(e){const t={},n=l(e,["gcsUri"]);n!=null&&a(t,["uri"],n);const o=l(e,["bytesBase64Encoded"]);o!=null&&a(t,["videoBytes"],tu(o));const r=l(e,["mimeType"]);return r!=null&&a(t,["mimeType"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var _c;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(_c||(_c={}));var Sc;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(Sc||(Sc={}));var Tc;(function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"})(Tc||(Tc={}));var ot;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"})(ot||(ot={}));var Cc;(function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Cc||(Cc={}));var xc;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(xc||(xc={}));var Ic;(function(e){e.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",e.HTTP_IN_QUERY="HTTP_IN_QUERY",e.HTTP_IN_HEADER="HTTP_IN_HEADER",e.HTTP_IN_PATH="HTTP_IN_PATH",e.HTTP_IN_BODY="HTTP_IN_BODY",e.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Ic||(Ic={}));var wc;(function(e){e.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",e.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",e.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",e.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(wc||(wc={}));var Ac;(function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"})(Ac||(Ac={}));var Nc;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(Nc||(Nc={}));var Rc;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"})(Rc||(Rc={}));var Pc;(function(e){e.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH",e.MINIMAL="MINIMAL"})(Pc||(Pc={}));var Mc;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Mc||(Mc={}));var kc;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(kc||(kc={}));var Dc;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(Dc||(Dc={}));var Lc;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",e.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",e.NO_IMAGE="NO_IMAGE",e.IMAGE_RECITATION="IMAGE_RECITATION",e.IMAGE_OTHER="IMAGE_OTHER"})(Lc||(Lc={}));var Uc;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(Uc||(Uc={}));var Fc;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Fc||(Fc={}));var Gc;(function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Gc||(Gc={}));var Vc;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY",e.MODEL_ARMOR="MODEL_ARMOR",e.JAILBREAK="JAILBREAK"})(Vc||(Vc={}));var Hc;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Hc||(Hc={}));var Hi;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})(Hi||(Hi={}));var Bc;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Bc||(Bc={}));var $c;(function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})($c||($c={}));var Oc;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Oc||(Oc={}));var Jl;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Jl||(Jl={}));var qc;(function(e){e.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",e.TUNING_TASK_I2V="TUNING_TASK_I2V",e.TUNING_TASK_T2V="TUNING_TASK_T2V",e.TUNING_TASK_R2V="TUNING_TASK_R2V"})(qc||(qc={}));var bc;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",e.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(bc||(bc={}));var Wl;(function(e){e.COLLECTION="COLLECTION"})(Wl||(Wl={}));var zc;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})(zc||(zc={}));var Jc;(function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Jc||(Jc={}));var Wc;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(Wc||(Wc={}));var Yc;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(Yc||(Yc={}));var Kc;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"})(Kc||(Kc={}));var Qc;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Qc||(Qc={}));var Xc;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Xc||(Xc={}));var Zc;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Zc||(Zc={}));var jc;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(jc||(jc={}));var ed;(function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"})(ed||(ed={}));var td;(function(e){e.ASSET="ASSET",e.STYLE="STYLE"})(td||(td={}));var nd;(function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"})(nd||(nd={}));var od;(function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"})(od||(od={}));var rd;(function(e){e.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",e.PREFERENCE_TUNING="PREFERENCE_TUNING",e.DISTILLATION="DISTILLATION"})(rd||(rd={}));var id;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.STATE_PENDING="STATE_PENDING",e.STATE_ACTIVE="STATE_ACTIVE",e.STATE_FAILED="STATE_FAILED"})(id||(id={}));var sd;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})(sd||(sd={}));var ld;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED",e.REGISTERED="REGISTERED"})(ld||(ld={}));var ad;(function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"})(ad||(ad={}));var ud;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(ud||(ud={}));var cd;(function(e){e.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",e.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",e.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(cd||(cd={}));var dd;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.ACTIVITY_START="ACTIVITY_START",e.ACTIVITY_END="ACTIVITY_END"})(dd||(dd={}));var fd;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(fd||(fd={}));var pd;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(pd||(pd={}));var md;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(md||(md={}));var hd;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(hd||(hd={}));var gd;(function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(gd||(gd={}));var yd;(function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"})(yd||(yd={}));var lo;(function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"})(lo||(lo={}));class Yl{constructor(t){const n={};for(const o of t.headers.entries())n[o[0]]=o[1];this.headers=n,this.responseInternal=t}json(){return this.responseInternal.json()}}class $o{get text(){var t,n,o,r,i,s,u,c;if(((r=(o=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",f=!1;const m=[];for(const p of(c=(u=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[h,_]of Object.entries(p))h!=="text"&&h!=="thought"&&h!=="thoughtSignature"&&(_!==null||_!==void 0)&&m.push(h);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;f=!0,d+=p.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?d:void 0}get data(){var t,n,o,r,i,s,u,c;if(((r=(o=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const f=[];for(const m of(c=(u=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[p,h]of Object.entries(m))p!=="inlineData"&&(h!==null||h!==void 0)&&f.push(p);m.inlineData&&typeof m.inlineData.data=="string"&&(d+=atob(m.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var t,n,o,r,i,s,u,c;if(((r=(o=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(c=(u=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var t,n,o,r,i,s,u,c,d;if(((r=(o=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(c=(u=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var t,n,o,r,i,s,u,c,d;if(((r=(o=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(c=(u=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.output}}class vd{}class Ed{}class pv{}class mv{}class hv{}class gv{}class _d{}class Sd{}class Td{}class yv{}class Bi{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const o=new Bi;let r;const i=t;return n?r=tv(i):r=ev(i),Object.assign(o,r),o}}class Cd{}class xd{}class Id{}class wd{}class vv{}class Ev{}class _v{}class nu{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const o=new nu,i=av(t);return Object.assign(o,i),o}}class Sv{}class Tv{}class Cv{}class xv{}class Ad{}class Iv{get text(){var t,n,o;let r="",i=!1;const s=[];for(const u of(o=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[c,d]of Object.entries(u))c!=="text"&&c!=="thought"&&d!==null&&s.push(c);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;i=!0,r+=u.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?r:void 0}get data(){var t,n,o;let r="";const i=[];for(const s of(o=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[u,c]of Object.entries(s))u!=="inlineData"&&c!==null&&i.push(u);s.inlineData&&typeof s.inlineData.data=="string"&&(r+=atob(s.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class wv{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class ou{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const o=new ou,i=mm(t);return Object.assign(o,i),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ie(e,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const n=t.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function hm(e,t){const n=ie(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function gm(e){return Array.isArray(e)?e.map(t=>$i(t)):[$i(e)]}function $i(e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function ym(e){const t=$i(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function vm(e){const t=$i(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Nd(e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function Em(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>Nd(t)):[Nd(e)]}function Kl(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function Rd(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function Pd(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function He(e){if(e==null)throw new Error("ContentUnion is required");return Kl(e)?e:{role:"user",parts:Em(e)}}function ru(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(n=>{const o=He(n);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(e.isVertexAI()){const n=He(t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(t)?t.map(n=>He(n)):[He(t)]}function ht(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(Rd(e)||Pd(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[He(e)]}const t=[],n=[],o=Kl(e[0]);for(const r of e){const i=Kl(r);if(i!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(i)t.push(r);else{if(Rd(r)||Pd(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return o||t.push({role:"user",parts:Em(n)}),t}function Av(e,t){e.includes("null")&&(t.nullable=!0);const n=e.filter(o=>o!=="null");if(n.length===1)t.type=Object.values(ot).includes(n[0].toUpperCase())?n[0].toUpperCase():ot.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const o of n)t.anyOf.push({type:Object.values(ot).includes(o.toUpperCase())?o.toUpperCase():ot.TYPE_UNSPECIFIED})}}function go(e){const t={},n=["items"],o=["anyOf"],r=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const i=e.anyOf;i!=null&&i.length==2&&(i[0].type==="null"?(t.nullable=!0,e=i[1]):i[1].type==="null"&&(t.nullable=!0,e=i[0])),e.type instanceof Array&&Av(e.type,t);for(const[s,u]of Object.entries(e))if(u!=null)if(s=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;t.type=Object.values(ot).includes(u.toUpperCase())?u.toUpperCase():ot.TYPE_UNSPECIFIED}else if(n.includes(s))t[s]=go(u);else if(o.includes(s)){const c=[];for(const d of u){if(d.type=="null"){t.nullable=!0;continue}c.push(go(d))}t[s]=c}else if(r.includes(s)){const c={};for(const[d,f]of Object.entries(u))c[d]=go(f);t[s]=c}else{if(s==="additionalProperties")continue;t[s]=u}return t}function iu(e){return go(e)}function su(e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function lu(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function No(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=go(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=go(t.response));return e}function Ro(e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function Nv(e,t,n,o=1){const r=!t.startsWith(`${n}/`)&&t.split("/").length===o;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:r?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:r?`${n}/${t}`:t}function Zt(e,t){if(typeof t!="string")throw new Error("name must be a string");return Nv(e,t,"cachedContents")}function _m(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function xn(e){return tu(e)}function Rv(e){return e!=null&&typeof e=="object"&&"name"in e}function Pv(e){return e!=null&&typeof e=="object"&&"video"in e}function Mv(e){return e!=null&&typeof e=="object"&&"uri"in e}function Sm(e){var t;let n;if(Rv(e)&&(n=e.name),!(Mv(e)&&(n=e.uri,n===void 0))&&!(Pv(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Tm(e,t){let n;return e.isVertexAI()?n=t?"publishers/google/models":"models":n=t?"models":"tunedModels",n}function Cm(e){for(const t of["models","tunedModels","publisherModels"])if(kv(e,t))return e[t];return[]}function kv(e,t){return e!==null&&typeof e=="object"&&t in e}function Dv(e,t={}){const n=e,o={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(o.responseJsonSchema=n.outputSchema),t.behavior&&(o.behavior=t.behavior),{functionDeclarations:[o]}}function Lv(e,t={}){const n=[],o=new Set;for(const r of e){const i=r.name;if(o.has(i))throw new Error(`Duplicate function name ${i} found in MCP tools. Please ensure function names are unique.`);o.add(i);const s=Dv(r,t);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function xm(e,t){let n;if(typeof t=="string")if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))n={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))n={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;const o=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(r>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function Uv(e){if(typeof e!="string")return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function Im(e){if(typeof e!="object"||e===null)return{};const t=e,n=t.inlinedResponses;if(typeof n!="object"||n===null)return e;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return e;let i=!1;for(const s of r){if(typeof s!="object"||s===null)continue;const c=s.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){i=!0;break}}return i&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function Po(e,t){const n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function wm(e){const t=e;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fv(e){const t={},n=l(e,["responsesFile"]);n!=null&&a(t,["fileName"],n);const o=l(e,["inlinedResponses","inlinedResponses"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>g0(s))),a(t,["inlinedResponses"],i)}const r=l(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),a(t,["inlinedEmbedContentResponses"],i)}return t}function Gv(e){const t={},n=l(e,["predictionsFormat"]);n!=null&&a(t,["format"],n);const o=l(e,["gcsDestination","outputUriPrefix"]);o!=null&&a(t,["gcsUri"],o);const r=l(e,["bigqueryDestination","outputUri"]);return r!=null&&a(t,["bigqueryUri"],r),t}function Vv(e){const t={},n=l(e,["format"]);n!=null&&a(t,["predictionsFormat"],n);const o=l(e,["gcsUri"]);o!=null&&a(t,["gcsDestination","outputUriPrefix"],o);const r=l(e,["bigqueryUri"]);if(r!=null&&a(t,["bigqueryDestination","outputUri"],r),l(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(e,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(l(e,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function pi(e){const t={},n=l(e,["name"]);n!=null&&a(t,["name"],n);const o=l(e,["metadata","displayName"]);o!=null&&a(t,["displayName"],o);const r=l(e,["metadata","state"]);r!=null&&a(t,["state"],wm(r));const i=l(e,["metadata","createTime"]);i!=null&&a(t,["createTime"],i);const s=l(e,["metadata","endTime"]);s!=null&&a(t,["endTime"],s);const u=l(e,["metadata","updateTime"]);u!=null&&a(t,["updateTime"],u);const c=l(e,["metadata","model"]);c!=null&&a(t,["model"],c);const d=l(e,["metadata","output"]);return d!=null&&a(t,["dest"],Fv(Im(d))),t}function Ql(e){const t={},n=l(e,["name"]);n!=null&&a(t,["name"],n);const o=l(e,["displayName"]);o!=null&&a(t,["displayName"],o);const r=l(e,["state"]);r!=null&&a(t,["state"],wm(r));const i=l(e,["error"]);i!=null&&a(t,["error"],i);const s=l(e,["createTime"]);s!=null&&a(t,["createTime"],s);const u=l(e,["startTime"]);u!=null&&a(t,["startTime"],u);const c=l(e,["endTime"]);c!=null&&a(t,["endTime"],c);const d=l(e,["updateTime"]);d!=null&&a(t,["updateTime"],d);const f=l(e,["model"]);f!=null&&a(t,["model"],f);const m=l(e,["inputConfig"]);m!=null&&a(t,["src"],Hv(m));const p=l(e,["outputConfig"]);p!=null&&a(t,["dest"],Gv(Im(p)));const h=l(e,["completionStats"]);return h!=null&&a(t,["completionStats"],h),t}function Hv(e){const t={},n=l(e,["instancesFormat"]);n!=null&&a(t,["format"],n);const o=l(e,["gcsSource","uris"]);o!=null&&a(t,["gcsUri"],o);const r=l(e,["bigquerySource","inputUri"]);return r!=null&&a(t,["bigqueryUri"],r),t}function Bv(e,t){const n={};if(l(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=l(t,["fileName"]);o!=null&&a(n,["fileName"],o);const r=l(t,["inlinedRequests"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>h0(e,s))),a(n,["requests","requests"],i)}return n}function $v(e){const t={},n=l(e,["format"]);n!=null&&a(t,["instancesFormat"],n);const o=l(e,["gcsUri"]);o!=null&&a(t,["gcsSource","uris"],o);const r=l(e,["bigqueryUri"]);if(r!=null&&a(t,["bigquerySource","inputUri"],r),l(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(e,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function Ov(e){const t={},n=l(e,["data"]);if(n!=null&&a(t,["data"],n),l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=l(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function qv(e,t){const n={},o=l(t,["name"]);return o!=null&&a(n,["_url","name"],Po(e,o)),n}function bv(e,t){const n={},o=l(t,["name"]);return o!=null&&a(n,["_url","name"],Po(e,o)),n}function zv(e){const t={},n=l(e,["content"]);n!=null&&a(t,["content"],n);const o=l(e,["citationMetadata"]);o!=null&&a(t,["citationMetadata"],Jv(o));const r=l(e,["tokenCount"]);r!=null&&a(t,["tokenCount"],r);const i=l(e,["finishReason"]);i!=null&&a(t,["finishReason"],i);const s=l(e,["avgLogprobs"]);s!=null&&a(t,["avgLogprobs"],s);const u=l(e,["groundingMetadata"]);u!=null&&a(t,["groundingMetadata"],u);const c=l(e,["index"]);c!=null&&a(t,["index"],c);const d=l(e,["logprobsResult"]);d!=null&&a(t,["logprobsResult"],d);const f=l(e,["safetyRatings"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(h=>h)),a(t,["safetyRatings"],p)}const m=l(e,["urlContextMetadata"]);return m!=null&&a(t,["urlContextMetadata"],m),t}function Jv(e){const t={},n=l(e,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),a(t,["citations"],o)}return t}function Am(e){const t={},n=l(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>C0(i))),a(t,["parts"],r)}const o=l(e,["role"]);return o!=null&&a(t,["role"],o),t}function Wv(e,t){const n={},o=l(e,["displayName"]);if(t!==void 0&&o!=null&&a(t,["batch","displayName"],o),l(e,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Yv(e,t){const n={},o=l(e,["displayName"]);t!==void 0&&o!=null&&a(t,["displayName"],o);const r=l(e,["dest"]);return t!==void 0&&r!=null&&a(t,["outputConfig"],Vv(Uv(r))),n}function Md(e,t){const n={},o=l(t,["model"]);o!=null&&a(n,["_url","model"],ie(e,o));const r=l(t,["src"]);r!=null&&a(n,["batch","inputConfig"],Bv(e,xm(e,r)));const i=l(t,["config"]);return i!=null&&Wv(i,n),n}function Kv(e,t){const n={},o=l(t,["model"]);o!=null&&a(n,["model"],ie(e,o));const r=l(t,["src"]);r!=null&&a(n,["inputConfig"],$v(xm(e,r)));const i=l(t,["config"]);return i!=null&&Yv(i,n),n}function Qv(e,t){const n={},o=l(e,["displayName"]);return t!==void 0&&o!=null&&a(t,["batch","displayName"],o),n}function Xv(e,t){const n={},o=l(t,["model"]);o!=null&&a(n,["_url","model"],ie(e,o));const r=l(t,["src"]);r!=null&&a(n,["batch","inputConfig"],r0(e,r));const i=l(t,["config"]);return i!=null&&Qv(i,n),n}function Zv(e,t){const n={},o=l(t,["name"]);return o!=null&&a(n,["_url","name"],Po(e,o)),n}function jv(e,t){const n={},o=l(t,["name"]);return o!=null&&a(n,["_url","name"],Po(e,o)),n}function e0(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const o=l(e,["name"]);o!=null&&a(t,["name"],o);const r=l(e,["done"]);r!=null&&a(t,["done"],r);const i=l(e,["error"]);return i!=null&&a(t,["error"],i),t}function t0(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const o=l(e,["name"]);o!=null&&a(t,["name"],o);const r=l(e,["done"]);r!=null&&a(t,["done"],r);const i=l(e,["error"]);return i!=null&&a(t,["error"],i),t}function n0(e,t){const n={},o=l(t,["contents"]);if(o!=null){let i=ru(e,o);Array.isArray(i)&&(i=i.map(s=>s)),a(n,["requests[]","request","content"],i)}const r=l(t,["config"]);return r!=null&&(a(n,["_self"],o0(r,n)),Zy(n,{"requests[].*":"requests[].request.*"})),n}function o0(e,t){const n={},o=l(e,["taskType"]);t!==void 0&&o!=null&&a(t,["requests[]","taskType"],o);const r=l(e,["title"]);t!==void 0&&r!=null&&a(t,["requests[]","title"],r);const i=l(e,["outputDimensionality"]);if(t!==void 0&&i!=null&&a(t,["requests[]","outputDimensionality"],i),l(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function r0(e,t){const n={},o=l(t,["fileName"]);o!=null&&a(n,["file_name"],o);const r=l(t,["inlinedRequests"]);return r!=null&&a(n,["requests"],n0(e,r)),n}function i0(e){const t={};if(l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const o=l(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function s0(e){const t={},n=l(e,["id"]);n!=null&&a(t,["id"],n);const o=l(e,["args"]);o!=null&&a(t,["args"],o);const r=l(e,["name"]);if(r!=null&&a(t,["name"],r),l(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function l0(e){const t={},n=l(e,["allowedFunctionNames"]);n!=null&&a(t,["allowedFunctionNames"],n);const o=l(e,["mode"]);if(o!=null&&a(t,["mode"],o),l(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function a0(e,t,n){const o={},r=l(t,["systemInstruction"]);n!==void 0&&r!=null&&a(n,["systemInstruction"],Am(He(r)));const i=l(t,["temperature"]);i!=null&&a(o,["temperature"],i);const s=l(t,["topP"]);s!=null&&a(o,["topP"],s);const u=l(t,["topK"]);u!=null&&a(o,["topK"],u);const c=l(t,["candidateCount"]);c!=null&&a(o,["candidateCount"],c);const d=l(t,["maxOutputTokens"]);d!=null&&a(o,["maxOutputTokens"],d);const f=l(t,["stopSequences"]);f!=null&&a(o,["stopSequences"],f);const m=l(t,["responseLogprobs"]);m!=null&&a(o,["responseLogprobs"],m);const p=l(t,["logprobs"]);p!=null&&a(o,["logprobs"],p);const h=l(t,["presencePenalty"]);h!=null&&a(o,["presencePenalty"],h);const _=l(t,["frequencyPenalty"]);_!=null&&a(o,["frequencyPenalty"],_);const S=l(t,["seed"]);S!=null&&a(o,["seed"],S);const C=l(t,["responseMimeType"]);C!=null&&a(o,["responseMimeType"],C);const y=l(t,["responseSchema"]);y!=null&&a(o,["responseSchema"],iu(y));const v=l(t,["responseJsonSchema"]);if(v!=null&&a(o,["responseJsonSchema"],v),l(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const E=l(t,["safetySettings"]);if(n!==void 0&&E!=null){let re=E;Array.isArray(re)&&(re=re.map(Z=>x0(Z))),a(n,["safetySettings"],re)}const x=l(t,["tools"]);if(n!==void 0&&x!=null){let re=Ro(x);Array.isArray(re)&&(re=re.map(Z=>w0(No(Z)))),a(n,["tools"],re)}const T=l(t,["toolConfig"]);if(n!==void 0&&T!=null&&a(n,["toolConfig"],I0(T)),l(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const P=l(t,["cachedContent"]);n!==void 0&&P!=null&&a(n,["cachedContent"],Zt(e,P));const D=l(t,["responseModalities"]);D!=null&&a(o,["responseModalities"],D);const L=l(t,["mediaResolution"]);L!=null&&a(o,["mediaResolution"],L);const A=l(t,["speechConfig"]);if(A!=null&&a(o,["speechConfig"],su(A)),l(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const F=l(t,["thinkingConfig"]);F!=null&&a(o,["thinkingConfig"],F);const J=l(t,["imageConfig"]);J!=null&&a(o,["imageConfig"],m0(J));const oe=l(t,["enableEnhancedCivicAnswers"]);if(oe!=null&&a(o,["enableEnhancedCivicAnswers"],oe),l(t,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return o}function u0(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const o=l(e,["candidates"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>zv(d))),a(t,["candidates"],c)}const r=l(e,["modelVersion"]);r!=null&&a(t,["modelVersion"],r);const i=l(e,["promptFeedback"]);i!=null&&a(t,["promptFeedback"],i);const s=l(e,["responseId"]);s!=null&&a(t,["responseId"],s);const u=l(e,["usageMetadata"]);return u!=null&&a(t,["usageMetadata"],u),t}function c0(e,t){const n={},o=l(t,["name"]);return o!=null&&a(n,["_url","name"],Po(e,o)),n}function d0(e,t){const n={},o=l(t,["name"]);return o!=null&&a(n,["_url","name"],Po(e,o)),n}function f0(e){const t={};if(l(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(e,["enableWidget"]);return n!=null&&a(t,["enableWidget"],n),t}function p0(e){const t={};if(l(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(e,["timeRangeFilter"]);return n!=null&&a(t,["timeRangeFilter"],n),t}function m0(e){const t={},n=l(e,["aspectRatio"]);n!=null&&a(t,["aspectRatio"],n);const o=l(e,["imageSize"]);if(o!=null&&a(t,["imageSize"],o),l(e,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(l(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(l(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function h0(e,t){const n={},o=l(t,["model"]);o!=null&&a(n,["request","model"],ie(e,o));const r=l(t,["contents"]);if(r!=null){let u=ht(r);Array.isArray(u)&&(u=u.map(c=>Am(c))),a(n,["request","contents"],u)}const i=l(t,["metadata"]);i!=null&&a(n,["metadata"],i);const s=l(t,["config"]);return s!=null&&a(n,["request","generationConfig"],a0(e,s,l(n,["request"],{}))),n}function g0(e){const t={},n=l(e,["response"]);n!=null&&a(t,["response"],u0(n));const o=l(e,["metadata"]);o!=null&&a(t,["metadata"],o);const r=l(e,["error"]);return r!=null&&a(t,["error"],r),t}function y0(e,t){const n={},o=l(e,["pageSize"]);t!==void 0&&o!=null&&a(t,["_query","pageSize"],o);const r=l(e,["pageToken"]);if(t!==void 0&&r!=null&&a(t,["_query","pageToken"],r),l(e,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function v0(e,t){const n={},o=l(e,["pageSize"]);t!==void 0&&o!=null&&a(t,["_query","pageSize"],o);const r=l(e,["pageToken"]);t!==void 0&&r!=null&&a(t,["_query","pageToken"],r);const i=l(e,["filter"]);return t!==void 0&&i!=null&&a(t,["_query","filter"],i),n}function E0(e){const t={},n=l(e,["config"]);return n!=null&&y0(n,t),t}function _0(e){const t={},n=l(e,["config"]);return n!=null&&v0(n,t),t}function S0(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const o=l(e,["nextPageToken"]);o!=null&&a(t,["nextPageToken"],o);const r=l(e,["operations"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>pi(s))),a(t,["batchJobs"],i)}return t}function T0(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const o=l(e,["nextPageToken"]);o!=null&&a(t,["nextPageToken"],o);const r=l(e,["batchPredictionJobs"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>Ql(s))),a(t,["batchJobs"],i)}return t}function C0(e){const t={},n=l(e,["mediaResolution"]);n!=null&&a(t,["mediaResolution"],n);const o=l(e,["codeExecutionResult"]);o!=null&&a(t,["codeExecutionResult"],o);const r=l(e,["executableCode"]);r!=null&&a(t,["executableCode"],r);const i=l(e,["fileData"]);i!=null&&a(t,["fileData"],i0(i));const s=l(e,["functionCall"]);s!=null&&a(t,["functionCall"],s0(s));const u=l(e,["functionResponse"]);u!=null&&a(t,["functionResponse"],u);const c=l(e,["inlineData"]);c!=null&&a(t,["inlineData"],Ov(c));const d=l(e,["text"]);d!=null&&a(t,["text"],d);const f=l(e,["thought"]);f!=null&&a(t,["thought"],f);const m=l(e,["thoughtSignature"]);m!=null&&a(t,["thoughtSignature"],m);const p=l(e,["videoMetadata"]);return p!=null&&a(t,["videoMetadata"],p),t}function x0(e){const t={},n=l(e,["category"]);if(n!=null&&a(t,["category"],n),l(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=l(e,["threshold"]);return o!=null&&a(t,["threshold"],o),t}function I0(e){const t={},n=l(e,["retrievalConfig"]);n!=null&&a(t,["retrievalConfig"],n);const o=l(e,["functionCallingConfig"]);return o!=null&&a(t,["functionCallingConfig"],l0(o)),t}function w0(e){const t={};if(l(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=l(e,["computerUse"]);n!=null&&a(t,["computerUse"],n);const o=l(e,["fileSearch"]);o!=null&&a(t,["fileSearch"],o);const r=l(e,["codeExecution"]);if(r!=null&&a(t,["codeExecution"],r),l(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=l(e,["functionDeclarations"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(m=>m)),a(t,["functionDeclarations"],f)}const s=l(e,["googleMaps"]);s!=null&&a(t,["googleMaps"],f0(s));const u=l(e,["googleSearch"]);u!=null&&a(t,["googleSearch"],p0(u));const c=l(e,["googleSearchRetrieval"]);c!=null&&a(t,["googleSearchRetrieval"],c);const d=l(e,["urlContext"]);return d!=null&&a(t,["urlContext"],d),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Kt;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents",e.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",e.PAGED_ITEM_DOCUMENTS="documents"})(Kt||(Kt={}));class bn{constructor(t,n,o,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(t,o,r)}init(t,n,o){var r,i;this.nameInternal=t,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!o||Object.keys(o).length===0?s={config:{}}:typeof o=="object"?s=Object.assign({},o):s=o,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(i=(r=s.config)===null||r===void 0?void 0:r.pageSize)!==null&&i!==void 0?i:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class A0 extends Xt{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new bn(Kt.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(t){const n=Md(this.apiClient,t),o=n._url,r=B("{model}:batchGenerateContent",o),u=n.batch.inputConfig.requests,c=u.requests,d=[];for(const f of c){const m=Object.assign({},f);if(m.systemInstruction){const p=m.systemInstruction;delete m.systemInstruction;const h=m.request;h.systemInstruction=p,m.request=h}d.push(m)}return u.requests=d,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,n){const o=n?Object.assign({},n):{},r=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${r}`),o.dest===void 0){const i=this.getGcsUri(t),s=this.getBigqueryUri(t);if(i)i.endsWith(".jsonl")?o.dest=`${i.slice(0,-6)}/dest`:o.dest=`${i}_dest_${r}`;else if(s)o.dest=`${s}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(t){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Kv(this.apiClient,t);return u=B("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Ql(f))}else{const d=Md(this.apiClient,t);return u=B("{model}:batchGenerateContent",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>pi(f))}}async createEmbeddingsInternal(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Xv(this.apiClient,t);return i=B("{model}:asyncBatchEmbedContent",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>pi(c))}}async get(t){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=d0(this.apiClient,t);return u=B("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Ql(f))}else{const d=c0(this.apiClient,t);return u=B("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>pi(f))}}async cancel(t){var n,o,r,i;let s="",u={};if(this.apiClient.isVertexAI()){const c=bv(this.apiClient,t);s=B("batchPredictionJobs/{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal})}else{const c=qv(this.apiClient,t);s=B("batches/{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(t){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=_0(t);return u=B("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const m=T0(f),p=new Ad;return Object.assign(p,m),p})}else{const d=E0(t);return u=B("batches",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const m=S0(f),p=new Ad;return Object.assign(p,m),p})}}async delete(t){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=jv(this.apiClient,t);return u=B("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>t0(f))}else{const d=Zv(this.apiClient,t);return u=B("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>e0(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function N0(e){const t={},n=l(e,["data"]);if(n!=null&&a(t,["data"],n),l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=l(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function kd(e){const t={},n=l(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>X0(i))),a(t,["parts"],r)}const o=l(e,["role"]);return o!=null&&a(t,["role"],o),t}function R0(e,t){const n={},o=l(e,["ttl"]);t!==void 0&&o!=null&&a(t,["ttl"],o);const r=l(e,["expireTime"]);t!==void 0&&r!=null&&a(t,["expireTime"],r);const i=l(e,["displayName"]);t!==void 0&&i!=null&&a(t,["displayName"],i);const s=l(e,["contents"]);if(t!==void 0&&s!=null){let f=ht(s);Array.isArray(f)&&(f=f.map(m=>kd(m))),a(t,["contents"],f)}const u=l(e,["systemInstruction"]);t!==void 0&&u!=null&&a(t,["systemInstruction"],kd(He(u)));const c=l(e,["tools"]);if(t!==void 0&&c!=null){let f=c;Array.isArray(f)&&(f=f.map(m=>j0(m))),a(t,["tools"],f)}const d=l(e,["toolConfig"]);if(t!==void 0&&d!=null&&a(t,["toolConfig"],Z0(d)),l(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function P0(e,t){const n={},o=l(e,["ttl"]);t!==void 0&&o!=null&&a(t,["ttl"],o);const r=l(e,["expireTime"]);t!==void 0&&r!=null&&a(t,["expireTime"],r);const i=l(e,["displayName"]);t!==void 0&&i!=null&&a(t,["displayName"],i);const s=l(e,["contents"]);if(t!==void 0&&s!=null){let m=ht(s);Array.isArray(m)&&(m=m.map(p=>p)),a(t,["contents"],m)}const u=l(e,["systemInstruction"]);t!==void 0&&u!=null&&a(t,["systemInstruction"],He(u));const c=l(e,["tools"]);if(t!==void 0&&c!=null){let m=c;Array.isArray(m)&&(m=m.map(p=>eE(p))),a(t,["tools"],m)}const d=l(e,["toolConfig"]);t!==void 0&&d!=null&&a(t,["toolConfig"],d);const f=l(e,["kmsKeyName"]);return t!==void 0&&f!=null&&a(t,["encryption_spec","kmsKeyName"],f),n}function M0(e,t){const n={},o=l(t,["model"]);o!=null&&a(n,["model"],hm(e,o));const r=l(t,["config"]);return r!=null&&R0(r,n),n}function k0(e,t){const n={},o=l(t,["model"]);o!=null&&a(n,["model"],hm(e,o));const r=l(t,["config"]);return r!=null&&P0(r,n),n}function D0(e,t){const n={},o=l(t,["name"]);return o!=null&&a(n,["_url","name"],Zt(e,o)),n}function L0(e,t){const n={},o=l(t,["name"]);return o!=null&&a(n,["_url","name"],Zt(e,o)),n}function U0(e){const t={},n=l(e,["sdkHttpResponse"]);return n!=null&&a(t,["sdkHttpResponse"],n),t}function F0(e){const t={},n=l(e,["sdkHttpResponse"]);return n!=null&&a(t,["sdkHttpResponse"],n),t}function G0(e){const t={};if(l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const o=l(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function V0(e){const t={},n=l(e,["id"]);n!=null&&a(t,["id"],n);const o=l(e,["args"]);o!=null&&a(t,["args"],o);const r=l(e,["name"]);if(r!=null&&a(t,["name"],r),l(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function H0(e){const t={},n=l(e,["allowedFunctionNames"]);n!=null&&a(t,["allowedFunctionNames"],n);const o=l(e,["mode"]);if(o!=null&&a(t,["mode"],o),l(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function B0(e){const t={},n=l(e,["description"]);n!=null&&a(t,["description"],n);const o=l(e,["name"]);o!=null&&a(t,["name"],o);const r=l(e,["parameters"]);r!=null&&a(t,["parameters"],r);const i=l(e,["parametersJsonSchema"]);i!=null&&a(t,["parametersJsonSchema"],i);const s=l(e,["response"]);s!=null&&a(t,["response"],s);const u=l(e,["responseJsonSchema"]);if(u!=null&&a(t,["responseJsonSchema"],u),l(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function $0(e,t){const n={},o=l(t,["name"]);return o!=null&&a(n,["_url","name"],Zt(e,o)),n}function O0(e,t){const n={},o=l(t,["name"]);return o!=null&&a(n,["_url","name"],Zt(e,o)),n}function q0(e){const t={};if(l(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(e,["enableWidget"]);return n!=null&&a(t,["enableWidget"],n),t}function b0(e){const t={};if(l(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(e,["timeRangeFilter"]);return n!=null&&a(t,["timeRangeFilter"],n),t}function z0(e,t){const n={},o=l(e,["pageSize"]);t!==void 0&&o!=null&&a(t,["_query","pageSize"],o);const r=l(e,["pageToken"]);return t!==void 0&&r!=null&&a(t,["_query","pageToken"],r),n}function J0(e,t){const n={},o=l(e,["pageSize"]);t!==void 0&&o!=null&&a(t,["_query","pageSize"],o);const r=l(e,["pageToken"]);return t!==void 0&&r!=null&&a(t,["_query","pageToken"],r),n}function W0(e){const t={},n=l(e,["config"]);return n!=null&&z0(n,t),t}function Y0(e){const t={},n=l(e,["config"]);return n!=null&&J0(n,t),t}function K0(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const o=l(e,["nextPageToken"]);o!=null&&a(t,["nextPageToken"],o);const r=l(e,["cachedContents"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),a(t,["cachedContents"],i)}return t}function Q0(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const o=l(e,["nextPageToken"]);o!=null&&a(t,["nextPageToken"],o);const r=l(e,["cachedContents"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),a(t,["cachedContents"],i)}return t}function X0(e){const t={},n=l(e,["mediaResolution"]);n!=null&&a(t,["mediaResolution"],n);const o=l(e,["codeExecutionResult"]);o!=null&&a(t,["codeExecutionResult"],o);const r=l(e,["executableCode"]);r!=null&&a(t,["executableCode"],r);const i=l(e,["fileData"]);i!=null&&a(t,["fileData"],G0(i));const s=l(e,["functionCall"]);s!=null&&a(t,["functionCall"],V0(s));const u=l(e,["functionResponse"]);u!=null&&a(t,["functionResponse"],u);const c=l(e,["inlineData"]);c!=null&&a(t,["inlineData"],N0(c));const d=l(e,["text"]);d!=null&&a(t,["text"],d);const f=l(e,["thought"]);f!=null&&a(t,["thought"],f);const m=l(e,["thoughtSignature"]);m!=null&&a(t,["thoughtSignature"],m);const p=l(e,["videoMetadata"]);return p!=null&&a(t,["videoMetadata"],p),t}function Z0(e){const t={},n=l(e,["retrievalConfig"]);n!=null&&a(t,["retrievalConfig"],n);const o=l(e,["functionCallingConfig"]);return o!=null&&a(t,["functionCallingConfig"],H0(o)),t}function j0(e){const t={};if(l(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=l(e,["computerUse"]);n!=null&&a(t,["computerUse"],n);const o=l(e,["fileSearch"]);o!=null&&a(t,["fileSearch"],o);const r=l(e,["codeExecution"]);if(r!=null&&a(t,["codeExecution"],r),l(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=l(e,["functionDeclarations"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(m=>m)),a(t,["functionDeclarations"],f)}const s=l(e,["googleMaps"]);s!=null&&a(t,["googleMaps"],q0(s));const u=l(e,["googleSearch"]);u!=null&&a(t,["googleSearch"],b0(u));const c=l(e,["googleSearchRetrieval"]);c!=null&&a(t,["googleSearchRetrieval"],c);const d=l(e,["urlContext"]);return d!=null&&a(t,["urlContext"],d),t}function eE(e){const t={},n=l(e,["retrieval"]);n!=null&&a(t,["retrieval"],n);const o=l(e,["computerUse"]);if(o!=null&&a(t,["computerUse"],o),l(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=l(e,["codeExecution"]);r!=null&&a(t,["codeExecution"],r);const i=l(e,["enterpriseWebSearch"]);i!=null&&a(t,["enterpriseWebSearch"],i);const s=l(e,["functionDeclarations"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(p=>B0(p))),a(t,["functionDeclarations"],m)}const u=l(e,["googleMaps"]);u!=null&&a(t,["googleMaps"],u);const c=l(e,["googleSearch"]);c!=null&&a(t,["googleSearch"],c);const d=l(e,["googleSearchRetrieval"]);d!=null&&a(t,["googleSearchRetrieval"],d);const f=l(e,["urlContext"]);return f!=null&&a(t,["urlContext"],f),t}function tE(e,t){const n={},o=l(e,["ttl"]);t!==void 0&&o!=null&&a(t,["ttl"],o);const r=l(e,["expireTime"]);return t!==void 0&&r!=null&&a(t,["expireTime"],r),n}function nE(e,t){const n={},o=l(e,["ttl"]);t!==void 0&&o!=null&&a(t,["ttl"],o);const r=l(e,["expireTime"]);return t!==void 0&&r!=null&&a(t,["expireTime"],r),n}function oE(e,t){const n={},o=l(t,["name"]);o!=null&&a(n,["_url","name"],Zt(e,o));const r=l(t,["config"]);return r!=null&&tE(r,n),n}function rE(e,t){const n={},o=l(t,["name"]);o!=null&&a(n,["_url","name"],Zt(e,o));const r=l(t,["config"]);return r!=null&&nE(r,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class iE extends Xt{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new bn(Kt.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(n),n)}async create(t){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=k0(this.apiClient,t);return u=B("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const d=M0(this.apiClient,t);return u=B("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async get(t){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=O0(this.apiClient,t);return u=B("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const d=$0(this.apiClient,t);return u=B("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(t){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=L0(this.apiClient,t);return u=B("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const m=F0(f),p=new Id;return Object.assign(p,m),p})}else{const d=D0(this.apiClient,t);return u=B("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const m=U0(f),p=new Id;return Object.assign(p,m),p})}}async update(t){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=rE(this.apiClient,t);return u=B("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const d=oE(this.apiClient,t);return u=B("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async listInternal(t){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Y0(t);return u=B("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const m=Q0(f),p=new wd;return Object.assign(p,m),p})}else{const d=W0(t);return u=B("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const m=K0(f),p=new wd;return Object.assign(p,m),p})}}}function Oi(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n}function Dd(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Y(e){return this instanceof Y?(this.v=e,this):new Y(e)}function At(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(e,t||[]),r,i=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(h){return function(_){return Promise.resolve(_).then(h,m)}}function u(h,_){o[h]&&(r[h]=function(S){return new Promise(function(C,y){i.push([h,S,C,y])>1||c(h,S)})},_&&(r[h]=_(r[h])))}function c(h,_){try{d(o[h](_))}catch(S){p(i[0][3],S)}}function d(h){h.value instanceof Y?Promise.resolve(h.value.v).then(f,m):p(i[0][2],h)}function f(h){c("next",h)}function m(h){c("throw",h)}function p(h,_){h(_),i.shift(),i.length&&c(i[0][0],i[0][1])}}function Nt(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Dd=="function"?Dd(e):e[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(i){n[i]=e[i]&&function(s){return new Promise(function(u,c){s=e[i](s),r(u,c,s.done,s.value)})}}function r(i,s,u,c){Promise.resolve(c).then(function(d){i({value:d,done:u})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sE(e){var t;if(e.candidates==null||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;return n===void 0?!1:Nm(n)}function Nm(e){if(e.parts===void 0||e.parts.length===0)return!1;for(const t of e.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function lE(e){if(e.length!==0){for(const t of e)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function Ld(e){if(e===void 0||e.length===0)return[];const t=[],n=e.length;let o=0;for(;o<n;)if(e[o].role==="user")t.push(e[o]),o++;else{const r=[];let i=!0;for(;o<n&&e[o].role==="model";)r.push(e[o]),i&&!Nm(e[o])&&(i=!1),o++;i?t.push(...r):t.pop()}return t}class aE{constructor(t,n){this.modelsModule=t,this.apiClient=n}create(t){return new uE(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class uE{constructor(t,n,o,r={},i=[]){this.apiClient=t,this.modelsModule=n,this.model=o,this.config=r,this.history=i,this.sendPromise=Promise.resolve(),lE(i)}async sendMessage(t){var n;await this.sendPromise;const o=He(t.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=t.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var i,s,u;const c=await r,d=(s=(i=c.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content,f=c.automaticFunctionCallingHistory,m=this.getHistory(!0).length;let p=[];f!=null&&(p=(u=f.slice(m))!==null&&u!==void 0?u:[]);const h=d?[d]:[];this.recordHistory(o,h,p)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(t){var n;await this.sendPromise;const o=He(t.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=t.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const i=await r;return this.processStreamResponse(i,o)}getHistory(t=!1){const n=t?Ld(this.history):this.history;return structuredClone(n)}processStreamResponse(t,n){return At(this,arguments,function*(){var r,i,s,u,c,d;const f=[];try{for(var m=!0,p=Nt(t),h;h=yield Y(p.next()),r=h.done,!r;m=!0){u=h.value,m=!1;const _=u;if(sE(_)){const S=(d=(c=_.candidates)===null||c===void 0?void 0:c[0])===null||d===void 0?void 0:d.content;S!==void 0&&f.push(S)}yield yield Y(_)}}catch(_){i={error:_}}finally{try{!m&&!r&&(s=p.return)&&(yield Y(s.call(p)))}finally{if(i)throw i.error}}this.recordHistory(n,f)})}recordHistory(t,n,o){let r=[];n.length>0&&n.every(i=>i.role!==void 0)?r=n:r.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...Ld(o)):this.history.push(t),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tr extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,Tr.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cE(e){const t={},n=l(e,["file"]);return n!=null&&a(t,["file"],n),t}function dE(e){const t={},n=l(e,["sdkHttpResponse"]);return n!=null&&a(t,["sdkHttpResponse"],n),t}function fE(e){const t={},n=l(e,["name"]);return n!=null&&a(t,["_url","file"],Sm(n)),t}function pE(e){const t={},n=l(e,["sdkHttpResponse"]);return n!=null&&a(t,["sdkHttpResponse"],n),t}function mE(e){const t={},n=l(e,["name"]);return n!=null&&a(t,["_url","file"],Sm(n)),t}function hE(e){const t={},n=l(e,["uris"]);return n!=null&&a(t,["uris"],n),t}function gE(e,t){const n={},o=l(e,["pageSize"]);t!==void 0&&o!=null&&a(t,["_query","pageSize"],o);const r=l(e,["pageToken"]);return t!==void 0&&r!=null&&a(t,["_query","pageToken"],r),n}function yE(e){const t={},n=l(e,["config"]);return n!=null&&gE(n,t),t}function vE(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const o=l(e,["nextPageToken"]);o!=null&&a(t,["nextPageToken"],o);const r=l(e,["files"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),a(t,["files"],i)}return t}function EE(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const o=l(e,["files"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>i)),a(t,["files"],r)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _E extends Xt{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new bn(Kt.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(n),n)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(n=>n)}async download(t){await this.apiClient.downloadFile(t)}async registerFiles(t){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(t){return this.registerFilesInternal(t)}async listInternal(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=yE(t);return i=B("files",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=vE(c),f=new Sv;return Object.assign(f,d),f})}}async createInternal(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=cE(t);return i=B("upload/v1beta/files",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=dE(c),f=new Tv;return Object.assign(f,d),f})}}async get(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=mE(t);return i=B("files/{file}",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async delete(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=fE(t);return i=B("files/{file}",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=pE(c),f=new Cv;return Object.assign(f,d),f})}}async registerFilesInternal(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=hE(t);return i=B("files:register",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=EE(c),f=new xv;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mi(e){const t={},n=l(e,["data"]);if(n!=null&&a(t,["data"],n),l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=l(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function SE(e){const t={},n=l(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>GE(i))),a(t,["parts"],r)}const o=l(e,["role"]);return o!=null&&a(t,["role"],o),t}function TE(e){const t={};if(l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const o=l(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function CE(e){const t={},n=l(e,["id"]);n!=null&&a(t,["id"],n);const o=l(e,["args"]);o!=null&&a(t,["args"],o);const r=l(e,["name"]);if(r!=null&&a(t,["name"],r),l(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function xE(e){const t={},n=l(e,["description"]);n!=null&&a(t,["description"],n);const o=l(e,["name"]);o!=null&&a(t,["name"],o);const r=l(e,["parameters"]);r!=null&&a(t,["parameters"],r);const i=l(e,["parametersJsonSchema"]);i!=null&&a(t,["parametersJsonSchema"],i);const s=l(e,["response"]);s!=null&&a(t,["response"],s);const u=l(e,["responseJsonSchema"]);if(u!=null&&a(t,["responseJsonSchema"],u),l(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function IE(e){const t={},n=l(e,["modelSelectionConfig"]);n!=null&&a(t,["modelConfig"],n);const o=l(e,["responseJsonSchema"]);o!=null&&a(t,["responseJsonSchema"],o);const r=l(e,["audioTimestamp"]);r!=null&&a(t,["audioTimestamp"],r);const i=l(e,["candidateCount"]);i!=null&&a(t,["candidateCount"],i);const s=l(e,["enableAffectiveDialog"]);s!=null&&a(t,["enableAffectiveDialog"],s);const u=l(e,["frequencyPenalty"]);u!=null&&a(t,["frequencyPenalty"],u);const c=l(e,["logprobs"]);c!=null&&a(t,["logprobs"],c);const d=l(e,["maxOutputTokens"]);d!=null&&a(t,["maxOutputTokens"],d);const f=l(e,["mediaResolution"]);f!=null&&a(t,["mediaResolution"],f);const m=l(e,["presencePenalty"]);m!=null&&a(t,["presencePenalty"],m);const p=l(e,["responseLogprobs"]);p!=null&&a(t,["responseLogprobs"],p);const h=l(e,["responseMimeType"]);h!=null&&a(t,["responseMimeType"],h);const _=l(e,["responseModalities"]);_!=null&&a(t,["responseModalities"],_);const S=l(e,["responseSchema"]);S!=null&&a(t,["responseSchema"],S);const C=l(e,["routingConfig"]);C!=null&&a(t,["routingConfig"],C);const y=l(e,["seed"]);y!=null&&a(t,["seed"],y);const v=l(e,["speechConfig"]);v!=null&&a(t,["speechConfig"],v);const E=l(e,["stopSequences"]);E!=null&&a(t,["stopSequences"],E);const x=l(e,["temperature"]);x!=null&&a(t,["temperature"],x);const T=l(e,["thinkingConfig"]);T!=null&&a(t,["thinkingConfig"],T);const P=l(e,["topK"]);P!=null&&a(t,["topK"],P);const D=l(e,["topP"]);if(D!=null&&a(t,["topP"],D),l(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function wE(e){const t={};if(l(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(e,["enableWidget"]);return n!=null&&a(t,["enableWidget"],n),t}function AE(e){const t={};if(l(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(e,["timeRangeFilter"]);return n!=null&&a(t,["timeRangeFilter"],n),t}function NE(e,t){const n={},o=l(e,["generationConfig"]);t!==void 0&&o!=null&&a(t,["setup","generationConfig"],o);const r=l(e,["responseModalities"]);t!==void 0&&r!=null&&a(t,["setup","generationConfig","responseModalities"],r);const i=l(e,["temperature"]);t!==void 0&&i!=null&&a(t,["setup","generationConfig","temperature"],i);const s=l(e,["topP"]);t!==void 0&&s!=null&&a(t,["setup","generationConfig","topP"],s);const u=l(e,["topK"]);t!==void 0&&u!=null&&a(t,["setup","generationConfig","topK"],u);const c=l(e,["maxOutputTokens"]);t!==void 0&&c!=null&&a(t,["setup","generationConfig","maxOutputTokens"],c);const d=l(e,["mediaResolution"]);t!==void 0&&d!=null&&a(t,["setup","generationConfig","mediaResolution"],d);const f=l(e,["seed"]);t!==void 0&&f!=null&&a(t,["setup","generationConfig","seed"],f);const m=l(e,["speechConfig"]);t!==void 0&&m!=null&&a(t,["setup","generationConfig","speechConfig"],lu(m));const p=l(e,["thinkingConfig"]);t!==void 0&&p!=null&&a(t,["setup","generationConfig","thinkingConfig"],p);const h=l(e,["enableAffectiveDialog"]);t!==void 0&&h!=null&&a(t,["setup","generationConfig","enableAffectiveDialog"],h);const _=l(e,["systemInstruction"]);t!==void 0&&_!=null&&a(t,["setup","systemInstruction"],SE(He(_)));const S=l(e,["tools"]);if(t!==void 0&&S!=null){let P=Ro(S);Array.isArray(P)&&(P=P.map(D=>HE(No(D)))),a(t,["setup","tools"],P)}const C=l(e,["sessionResumption"]);t!==void 0&&C!=null&&a(t,["setup","sessionResumption"],VE(C));const y=l(e,["inputAudioTranscription"]);t!==void 0&&y!=null&&a(t,["setup","inputAudioTranscription"],y);const v=l(e,["outputAudioTranscription"]);t!==void 0&&v!=null&&a(t,["setup","outputAudioTranscription"],v);const E=l(e,["realtimeInputConfig"]);t!==void 0&&E!=null&&a(t,["setup","realtimeInputConfig"],E);const x=l(e,["contextWindowCompression"]);t!==void 0&&x!=null&&a(t,["setup","contextWindowCompression"],x);const T=l(e,["proactivity"]);if(t!==void 0&&T!=null&&a(t,["setup","proactivity"],T),l(e,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function RE(e,t){const n={},o=l(e,["generationConfig"]);t!==void 0&&o!=null&&a(t,["setup","generationConfig"],IE(o));const r=l(e,["responseModalities"]);t!==void 0&&r!=null&&a(t,["setup","generationConfig","responseModalities"],r);const i=l(e,["temperature"]);t!==void 0&&i!=null&&a(t,["setup","generationConfig","temperature"],i);const s=l(e,["topP"]);t!==void 0&&s!=null&&a(t,["setup","generationConfig","topP"],s);const u=l(e,["topK"]);t!==void 0&&u!=null&&a(t,["setup","generationConfig","topK"],u);const c=l(e,["maxOutputTokens"]);t!==void 0&&c!=null&&a(t,["setup","generationConfig","maxOutputTokens"],c);const d=l(e,["mediaResolution"]);t!==void 0&&d!=null&&a(t,["setup","generationConfig","mediaResolution"],d);const f=l(e,["seed"]);t!==void 0&&f!=null&&a(t,["setup","generationConfig","seed"],f);const m=l(e,["speechConfig"]);t!==void 0&&m!=null&&a(t,["setup","generationConfig","speechConfig"],lu(m));const p=l(e,["thinkingConfig"]);t!==void 0&&p!=null&&a(t,["setup","generationConfig","thinkingConfig"],p);const h=l(e,["enableAffectiveDialog"]);t!==void 0&&h!=null&&a(t,["setup","generationConfig","enableAffectiveDialog"],h);const _=l(e,["systemInstruction"]);t!==void 0&&_!=null&&a(t,["setup","systemInstruction"],He(_));const S=l(e,["tools"]);if(t!==void 0&&S!=null){let D=Ro(S);Array.isArray(D)&&(D=D.map(L=>BE(No(L)))),a(t,["setup","tools"],D)}const C=l(e,["sessionResumption"]);t!==void 0&&C!=null&&a(t,["setup","sessionResumption"],C);const y=l(e,["inputAudioTranscription"]);t!==void 0&&y!=null&&a(t,["setup","inputAudioTranscription"],y);const v=l(e,["outputAudioTranscription"]);t!==void 0&&v!=null&&a(t,["setup","outputAudioTranscription"],v);const E=l(e,["realtimeInputConfig"]);t!==void 0&&E!=null&&a(t,["setup","realtimeInputConfig"],E);const x=l(e,["contextWindowCompression"]);t!==void 0&&x!=null&&a(t,["setup","contextWindowCompression"],x);const T=l(e,["proactivity"]);t!==void 0&&T!=null&&a(t,["setup","proactivity"],T);const P=l(e,["explicitVadSignal"]);return t!==void 0&&P!=null&&a(t,["setup","explicitVadSignal"],P),n}function PE(e,t){const n={},o=l(t,["model"]);o!=null&&a(n,["setup","model"],ie(e,o));const r=l(t,["config"]);return r!=null&&a(n,["config"],NE(r,n)),n}function ME(e,t){const n={},o=l(t,["model"]);o!=null&&a(n,["setup","model"],ie(e,o));const r=l(t,["config"]);return r!=null&&a(n,["config"],RE(r,n)),n}function kE(e){const t={},n=l(e,["musicGenerationConfig"]);return n!=null&&a(t,["musicGenerationConfig"],n),t}function DE(e){const t={},n=l(e,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),a(t,["weightedPrompts"],o)}return t}function LE(e){const t={},n=l(e,["media"]);if(n!=null){let d=gm(n);Array.isArray(d)&&(d=d.map(f=>mi(f))),a(t,["mediaChunks"],d)}const o=l(e,["audio"]);o!=null&&a(t,["audio"],mi(vm(o)));const r=l(e,["audioStreamEnd"]);r!=null&&a(t,["audioStreamEnd"],r);const i=l(e,["video"]);i!=null&&a(t,["video"],mi(ym(i)));const s=l(e,["text"]);s!=null&&a(t,["text"],s);const u=l(e,["activityStart"]);u!=null&&a(t,["activityStart"],u);const c=l(e,["activityEnd"]);return c!=null&&a(t,["activityEnd"],c),t}function UE(e){const t={},n=l(e,["media"]);if(n!=null){let d=gm(n);Array.isArray(d)&&(d=d.map(f=>f)),a(t,["mediaChunks"],d)}const o=l(e,["audio"]);o!=null&&a(t,["audio"],vm(o));const r=l(e,["audioStreamEnd"]);r!=null&&a(t,["audioStreamEnd"],r);const i=l(e,["video"]);i!=null&&a(t,["video"],ym(i));const s=l(e,["text"]);s!=null&&a(t,["text"],s);const u=l(e,["activityStart"]);u!=null&&a(t,["activityStart"],u);const c=l(e,["activityEnd"]);return c!=null&&a(t,["activityEnd"],c),t}function FE(e){const t={},n=l(e,["setupComplete"]);n!=null&&a(t,["setupComplete"],n);const o=l(e,["serverContent"]);o!=null&&a(t,["serverContent"],o);const r=l(e,["toolCall"]);r!=null&&a(t,["toolCall"],r);const i=l(e,["toolCallCancellation"]);i!=null&&a(t,["toolCallCancellation"],i);const s=l(e,["usageMetadata"]);s!=null&&a(t,["usageMetadata"],$E(s));const u=l(e,["goAway"]);u!=null&&a(t,["goAway"],u);const c=l(e,["sessionResumptionUpdate"]);c!=null&&a(t,["sessionResumptionUpdate"],c);const d=l(e,["voiceActivityDetectionSignal"]);d!=null&&a(t,["voiceActivityDetectionSignal"],d);const f=l(e,["voiceActivity"]);return f!=null&&a(t,["voiceActivity"],OE(f)),t}function GE(e){const t={},n=l(e,["mediaResolution"]);n!=null&&a(t,["mediaResolution"],n);const o=l(e,["codeExecutionResult"]);o!=null&&a(t,["codeExecutionResult"],o);const r=l(e,["executableCode"]);r!=null&&a(t,["executableCode"],r);const i=l(e,["fileData"]);i!=null&&a(t,["fileData"],TE(i));const s=l(e,["functionCall"]);s!=null&&a(t,["functionCall"],CE(s));const u=l(e,["functionResponse"]);u!=null&&a(t,["functionResponse"],u);const c=l(e,["inlineData"]);c!=null&&a(t,["inlineData"],mi(c));const d=l(e,["text"]);d!=null&&a(t,["text"],d);const f=l(e,["thought"]);f!=null&&a(t,["thought"],f);const m=l(e,["thoughtSignature"]);m!=null&&a(t,["thoughtSignature"],m);const p=l(e,["videoMetadata"]);return p!=null&&a(t,["videoMetadata"],p),t}function VE(e){const t={},n=l(e,["handle"]);if(n!=null&&a(t,["handle"],n),l(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function HE(e){const t={};if(l(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=l(e,["computerUse"]);n!=null&&a(t,["computerUse"],n);const o=l(e,["fileSearch"]);o!=null&&a(t,["fileSearch"],o);const r=l(e,["codeExecution"]);if(r!=null&&a(t,["codeExecution"],r),l(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=l(e,["functionDeclarations"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(m=>m)),a(t,["functionDeclarations"],f)}const s=l(e,["googleMaps"]);s!=null&&a(t,["googleMaps"],wE(s));const u=l(e,["googleSearch"]);u!=null&&a(t,["googleSearch"],AE(u));const c=l(e,["googleSearchRetrieval"]);c!=null&&a(t,["googleSearchRetrieval"],c);const d=l(e,["urlContext"]);return d!=null&&a(t,["urlContext"],d),t}function BE(e){const t={},n=l(e,["retrieval"]);n!=null&&a(t,["retrieval"],n);const o=l(e,["computerUse"]);if(o!=null&&a(t,["computerUse"],o),l(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=l(e,["codeExecution"]);r!=null&&a(t,["codeExecution"],r);const i=l(e,["enterpriseWebSearch"]);i!=null&&a(t,["enterpriseWebSearch"],i);const s=l(e,["functionDeclarations"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(p=>xE(p))),a(t,["functionDeclarations"],m)}const u=l(e,["googleMaps"]);u!=null&&a(t,["googleMaps"],u);const c=l(e,["googleSearch"]);c!=null&&a(t,["googleSearch"],c);const d=l(e,["googleSearchRetrieval"]);d!=null&&a(t,["googleSearchRetrieval"],d);const f=l(e,["urlContext"]);return f!=null&&a(t,["urlContext"],f),t}function $E(e){const t={},n=l(e,["promptTokenCount"]);n!=null&&a(t,["promptTokenCount"],n);const o=l(e,["cachedContentTokenCount"]);o!=null&&a(t,["cachedContentTokenCount"],o);const r=l(e,["candidatesTokenCount"]);r!=null&&a(t,["responseTokenCount"],r);const i=l(e,["toolUsePromptTokenCount"]);i!=null&&a(t,["toolUsePromptTokenCount"],i);const s=l(e,["thoughtsTokenCount"]);s!=null&&a(t,["thoughtsTokenCount"],s);const u=l(e,["totalTokenCount"]);u!=null&&a(t,["totalTokenCount"],u);const c=l(e,["promptTokensDetails"]);if(c!=null){let h=c;Array.isArray(h)&&(h=h.map(_=>_)),a(t,["promptTokensDetails"],h)}const d=l(e,["cacheTokensDetails"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(_=>_)),a(t,["cacheTokensDetails"],h)}const f=l(e,["candidatesTokensDetails"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(_=>_)),a(t,["responseTokensDetails"],h)}const m=l(e,["toolUsePromptTokensDetails"]);if(m!=null){let h=m;Array.isArray(h)&&(h=h.map(_=>_)),a(t,["toolUsePromptTokensDetails"],h)}const p=l(e,["trafficType"]);return p!=null&&a(t,["trafficType"],p),t}function OE(e){const t={},n=l(e,["type"]);return n!=null&&a(t,["voiceActivityType"],n),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qE(e,t){const n={},o=l(e,["data"]);if(o!=null&&a(n,["data"],o),l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(e,["mimeType"]);return r!=null&&a(n,["mimeType"],r),n}function bE(e,t){const n={},o=l(e,["content"]);o!=null&&a(n,["content"],o);const r=l(e,["citationMetadata"]);r!=null&&a(n,["citationMetadata"],zE(r));const i=l(e,["tokenCount"]);i!=null&&a(n,["tokenCount"],i);const s=l(e,["finishReason"]);s!=null&&a(n,["finishReason"],s);const u=l(e,["avgLogprobs"]);u!=null&&a(n,["avgLogprobs"],u);const c=l(e,["groundingMetadata"]);c!=null&&a(n,["groundingMetadata"],c);const d=l(e,["index"]);d!=null&&a(n,["index"],d);const f=l(e,["logprobsResult"]);f!=null&&a(n,["logprobsResult"],f);const m=l(e,["safetyRatings"]);if(m!=null){let h=m;Array.isArray(h)&&(h=h.map(_=>_)),a(n,["safetyRatings"],h)}const p=l(e,["urlContextMetadata"]);return p!=null&&a(n,["urlContextMetadata"],p),n}function zE(e,t){const n={},o=l(e,["citationSources"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>i)),a(n,["citations"],r)}return n}function JE(e,t,n){const o={},r=l(t,["model"]);r!=null&&a(o,["_url","model"],ie(e,r));const i=l(t,["contents"]);if(i!=null){let s=ht(i);Array.isArray(s)&&(s=s.map(u=>u)),a(o,["contents"],s)}return o}function WE(e,t){const n={},o=l(e,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const r=l(e,["tokensInfo"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),a(n,["tokensInfo"],i)}return n}function YE(e,t){const n={},o=l(e,["values"]);o!=null&&a(n,["values"],o);const r=l(e,["statistics"]);return r!=null&&a(n,["statistics"],KE(r)),n}function KE(e,t){const n={},o=l(e,["truncated"]);o!=null&&a(n,["truncated"],o);const r=l(e,["token_count"]);return r!=null&&a(n,["tokenCount"],r),n}function ls(e,t){const n={},o=l(e,["parts"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>rS(s))),a(n,["parts"],i)}const r=l(e,["role"]);return r!=null&&a(n,["role"],r),n}function QE(e,t){const n={},o=l(e,["controlType"]);o!=null&&a(n,["controlType"],o);const r=l(e,["enableControlImageComputation"]);return r!=null&&a(n,["computeControl"],r),n}function XE(e,t){const n={};if(l(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(l(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(l(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return n}function ZE(e,t,n){const o={},r=l(e,["systemInstruction"]);t!==void 0&&r!=null&&a(t,["systemInstruction"],He(r));const i=l(e,["tools"]);if(t!==void 0&&i!=null){let u=i;Array.isArray(u)&&(u=u.map(c=>km(c))),a(t,["tools"],u)}const s=l(e,["generationConfig"]);return t!==void 0&&s!=null&&a(t,["generationConfig"],q_(s)),o}function jE(e,t,n){const o={},r=l(t,["model"]);r!=null&&a(o,["_url","model"],ie(e,r));const i=l(t,["contents"]);if(i!=null){let u=ht(i);Array.isArray(u)&&(u=u.map(c=>ls(c))),a(o,["contents"],u)}const s=l(t,["config"]);return s!=null&&XE(s),o}function e_(e,t,n){const o={},r=l(t,["model"]);r!=null&&a(o,["_url","model"],ie(e,r));const i=l(t,["contents"]);if(i!=null){let u=ht(i);Array.isArray(u)&&(u=u.map(c=>c)),a(o,["contents"],u)}const s=l(t,["config"]);return s!=null&&ZE(s,o),o}function t_(e,t){const n={},o=l(e,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const r=l(e,["totalTokens"]);r!=null&&a(n,["totalTokens"],r);const i=l(e,["cachedContentTokenCount"]);return i!=null&&a(n,["cachedContentTokenCount"],i),n}function n_(e,t){const n={},o=l(e,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const r=l(e,["totalTokens"]);return r!=null&&a(n,["totalTokens"],r),n}function o_(e,t,n){const o={},r=l(t,["model"]);return r!=null&&a(o,["_url","name"],ie(e,r)),o}function r_(e,t,n){const o={},r=l(t,["model"]);return r!=null&&a(o,["_url","name"],ie(e,r)),o}function i_(e,t){const n={},o=l(e,["sdkHttpResponse"]);return o!=null&&a(n,["sdkHttpResponse"],o),n}function s_(e,t){const n={},o=l(e,["sdkHttpResponse"]);return o!=null&&a(n,["sdkHttpResponse"],o),n}function l_(e,t,n){const o={},r=l(e,["outputGcsUri"]);t!==void 0&&r!=null&&a(t,["parameters","storageUri"],r);const i=l(e,["negativePrompt"]);t!==void 0&&i!=null&&a(t,["parameters","negativePrompt"],i);const s=l(e,["numberOfImages"]);t!==void 0&&s!=null&&a(t,["parameters","sampleCount"],s);const u=l(e,["aspectRatio"]);t!==void 0&&u!=null&&a(t,["parameters","aspectRatio"],u);const c=l(e,["guidanceScale"]);t!==void 0&&c!=null&&a(t,["parameters","guidanceScale"],c);const d=l(e,["seed"]);t!==void 0&&d!=null&&a(t,["parameters","seed"],d);const f=l(e,["safetyFilterLevel"]);t!==void 0&&f!=null&&a(t,["parameters","safetySetting"],f);const m=l(e,["personGeneration"]);t!==void 0&&m!=null&&a(t,["parameters","personGeneration"],m);const p=l(e,["includeSafetyAttributes"]);t!==void 0&&p!=null&&a(t,["parameters","includeSafetyAttributes"],p);const h=l(e,["includeRaiReason"]);t!==void 0&&h!=null&&a(t,["parameters","includeRaiReason"],h);const _=l(e,["language"]);t!==void 0&&_!=null&&a(t,["parameters","language"],_);const S=l(e,["outputMimeType"]);t!==void 0&&S!=null&&a(t,["parameters","outputOptions","mimeType"],S);const C=l(e,["outputCompressionQuality"]);t!==void 0&&C!=null&&a(t,["parameters","outputOptions","compressionQuality"],C);const y=l(e,["addWatermark"]);t!==void 0&&y!=null&&a(t,["parameters","addWatermark"],y);const v=l(e,["labels"]);t!==void 0&&v!=null&&a(t,["labels"],v);const E=l(e,["editMode"]);t!==void 0&&E!=null&&a(t,["parameters","editMode"],E);const x=l(e,["baseSteps"]);return t!==void 0&&x!=null&&a(t,["parameters","editConfig","baseSteps"],x),o}function a_(e,t,n){const o={},r=l(t,["model"]);r!=null&&a(o,["_url","model"],ie(e,r));const i=l(t,["prompt"]);i!=null&&a(o,["instances[0]","prompt"],i);const s=l(t,["referenceImages"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(d=>cS(d))),a(o,["instances[0]","referenceImages"],c)}const u=l(t,["config"]);return u!=null&&l_(u,o),o}function u_(e,t){const n={},o=l(e,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const r=l(e,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>as(s))),a(n,["generatedImages"],i)}return n}function c_(e,t,n){const o={},r=l(e,["taskType"]);t!==void 0&&r!=null&&a(t,["requests[]","taskType"],r);const i=l(e,["title"]);t!==void 0&&i!=null&&a(t,["requests[]","title"],i);const s=l(e,["outputDimensionality"]);if(t!==void 0&&s!=null&&a(t,["requests[]","outputDimensionality"],s),l(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function d_(e,t,n){const o={},r=l(e,["taskType"]);t!==void 0&&r!=null&&a(t,["instances[]","task_type"],r);const i=l(e,["title"]);t!==void 0&&i!=null&&a(t,["instances[]","title"],i);const s=l(e,["outputDimensionality"]);t!==void 0&&s!=null&&a(t,["parameters","outputDimensionality"],s);const u=l(e,["mimeType"]);t!==void 0&&u!=null&&a(t,["instances[]","mimeType"],u);const c=l(e,["autoTruncate"]);return t!==void 0&&c!=null&&a(t,["parameters","autoTruncate"],c),o}function f_(e,t,n){const o={},r=l(t,["model"]);r!=null&&a(o,["_url","model"],ie(e,r));const i=l(t,["contents"]);if(i!=null){let c=ru(e,i);Array.isArray(c)&&(c=c.map(d=>d)),a(o,["requests[]","content"],c)}const s=l(t,["config"]);s!=null&&c_(s,o);const u=l(t,["model"]);return u!==void 0&&a(o,["requests[]","model"],ie(e,u)),o}function p_(e,t,n){const o={},r=l(t,["model"]);r!=null&&a(o,["_url","model"],ie(e,r));const i=l(t,["contents"]);if(i!=null){let u=ru(e,i);Array.isArray(u)&&(u=u.map(c=>c)),a(o,["instances[]","content"],u)}const s=l(t,["config"]);return s!=null&&d_(s,o),o}function m_(e,t){const n={},o=l(e,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const r=l(e,["embeddings"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(u=>u)),a(n,["embeddings"],s)}const i=l(e,["metadata"]);return i!=null&&a(n,["metadata"],i),n}function h_(e,t){const n={},o=l(e,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const r=l(e,["predictions[]","embeddings"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(u=>YE(u))),a(n,["embeddings"],s)}const i=l(e,["metadata"]);return i!=null&&a(n,["metadata"],i),n}function g_(e,t){const n={},o=l(e,["endpoint"]);o!=null&&a(n,["name"],o);const r=l(e,["deployedModelId"]);return r!=null&&a(n,["deployedModelId"],r),n}function y_(e,t){const n={};if(l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=l(e,["fileUri"]);o!=null&&a(n,["fileUri"],o);const r=l(e,["mimeType"]);return r!=null&&a(n,["mimeType"],r),n}function v_(e,t){const n={},o=l(e,["id"]);o!=null&&a(n,["id"],o);const r=l(e,["args"]);r!=null&&a(n,["args"],r);const i=l(e,["name"]);if(i!=null&&a(n,["name"],i),l(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return n}function E_(e,t){const n={},o=l(e,["allowedFunctionNames"]);o!=null&&a(n,["allowedFunctionNames"],o);const r=l(e,["mode"]);if(r!=null&&a(n,["mode"],r),l(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return n}function __(e,t){const n={},o=l(e,["description"]);o!=null&&a(n,["description"],o);const r=l(e,["name"]);r!=null&&a(n,["name"],r);const i=l(e,["parameters"]);i!=null&&a(n,["parameters"],i);const s=l(e,["parametersJsonSchema"]);s!=null&&a(n,["parametersJsonSchema"],s);const u=l(e,["response"]);u!=null&&a(n,["response"],u);const c=l(e,["responseJsonSchema"]);if(c!=null&&a(n,["responseJsonSchema"],c),l(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return n}function S_(e,t,n,o){const r={},i=l(t,["systemInstruction"]);n!==void 0&&i!=null&&a(n,["systemInstruction"],ls(He(i)));const s=l(t,["temperature"]);s!=null&&a(r,["temperature"],s);const u=l(t,["topP"]);u!=null&&a(r,["topP"],u);const c=l(t,["topK"]);c!=null&&a(r,["topK"],c);const d=l(t,["candidateCount"]);d!=null&&a(r,["candidateCount"],d);const f=l(t,["maxOutputTokens"]);f!=null&&a(r,["maxOutputTokens"],f);const m=l(t,["stopSequences"]);m!=null&&a(r,["stopSequences"],m);const p=l(t,["responseLogprobs"]);p!=null&&a(r,["responseLogprobs"],p);const h=l(t,["logprobs"]);h!=null&&a(r,["logprobs"],h);const _=l(t,["presencePenalty"]);_!=null&&a(r,["presencePenalty"],_);const S=l(t,["frequencyPenalty"]);S!=null&&a(r,["frequencyPenalty"],S);const C=l(t,["seed"]);C!=null&&a(r,["seed"],C);const y=l(t,["responseMimeType"]);y!=null&&a(r,["responseMimeType"],y);const v=l(t,["responseSchema"]);v!=null&&a(r,["responseSchema"],iu(v));const E=l(t,["responseJsonSchema"]);if(E!=null&&a(r,["responseJsonSchema"],E),l(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const x=l(t,["safetySettings"]);if(n!==void 0&&x!=null){let Z=x;Array.isArray(Z)&&(Z=Z.map(ve=>dS(ve))),a(n,["safetySettings"],Z)}const T=l(t,["tools"]);if(n!==void 0&&T!=null){let Z=Ro(T);Array.isArray(Z)&&(Z=Z.map(ve=>vS(No(ve)))),a(n,["tools"],Z)}const P=l(t,["toolConfig"]);if(n!==void 0&&P!=null&&a(n,["toolConfig"],yS(P)),l(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const D=l(t,["cachedContent"]);n!==void 0&&D!=null&&a(n,["cachedContent"],Zt(e,D));const L=l(t,["responseModalities"]);L!=null&&a(r,["responseModalities"],L);const A=l(t,["mediaResolution"]);A!=null&&a(r,["mediaResolution"],A);const F=l(t,["speechConfig"]);if(F!=null&&a(r,["speechConfig"],su(F)),l(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const J=l(t,["thinkingConfig"]);J!=null&&a(r,["thinkingConfig"],J);const oe=l(t,["imageConfig"]);oe!=null&&a(r,["imageConfig"],Y_(oe));const re=l(t,["enableEnhancedCivicAnswers"]);if(re!=null&&a(r,["enableEnhancedCivicAnswers"],re),l(t,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function T_(e,t,n,o){const r={},i=l(t,["systemInstruction"]);n!==void 0&&i!=null&&a(n,["systemInstruction"],He(i));const s=l(t,["temperature"]);s!=null&&a(r,["temperature"],s);const u=l(t,["topP"]);u!=null&&a(r,["topP"],u);const c=l(t,["topK"]);c!=null&&a(r,["topK"],c);const d=l(t,["candidateCount"]);d!=null&&a(r,["candidateCount"],d);const f=l(t,["maxOutputTokens"]);f!=null&&a(r,["maxOutputTokens"],f);const m=l(t,["stopSequences"]);m!=null&&a(r,["stopSequences"],m);const p=l(t,["responseLogprobs"]);p!=null&&a(r,["responseLogprobs"],p);const h=l(t,["logprobs"]);h!=null&&a(r,["logprobs"],h);const _=l(t,["presencePenalty"]);_!=null&&a(r,["presencePenalty"],_);const S=l(t,["frequencyPenalty"]);S!=null&&a(r,["frequencyPenalty"],S);const C=l(t,["seed"]);C!=null&&a(r,["seed"],C);const y=l(t,["responseMimeType"]);y!=null&&a(r,["responseMimeType"],y);const v=l(t,["responseSchema"]);v!=null&&a(r,["responseSchema"],iu(v));const E=l(t,["responseJsonSchema"]);E!=null&&a(r,["responseJsonSchema"],E);const x=l(t,["routingConfig"]);x!=null&&a(r,["routingConfig"],x);const T=l(t,["modelSelectionConfig"]);T!=null&&a(r,["modelConfig"],T);const P=l(t,["safetySettings"]);if(n!==void 0&&P!=null){let V=P;Array.isArray(V)&&(V=V.map(z=>z)),a(n,["safetySettings"],V)}const D=l(t,["tools"]);if(n!==void 0&&D!=null){let V=Ro(D);Array.isArray(V)&&(V=V.map(z=>km(No(z)))),a(n,["tools"],V)}const L=l(t,["toolConfig"]);n!==void 0&&L!=null&&a(n,["toolConfig"],L);const A=l(t,["labels"]);n!==void 0&&A!=null&&a(n,["labels"],A);const F=l(t,["cachedContent"]);n!==void 0&&F!=null&&a(n,["cachedContent"],Zt(e,F));const J=l(t,["responseModalities"]);J!=null&&a(r,["responseModalities"],J);const oe=l(t,["mediaResolution"]);oe!=null&&a(r,["mediaResolution"],oe);const re=l(t,["speechConfig"]);re!=null&&a(r,["speechConfig"],su(re));const Z=l(t,["audioTimestamp"]);Z!=null&&a(r,["audioTimestamp"],Z);const ve=l(t,["thinkingConfig"]);ve!=null&&a(r,["thinkingConfig"],ve);const ut=l(t,["imageConfig"]);if(ut!=null&&a(r,["imageConfig"],K_(ut)),l(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const Et=l(t,["modelArmorConfig"]);return n!==void 0&&Et!=null&&a(n,["modelArmorConfig"],Et),r}function Ud(e,t,n){const o={},r=l(t,["model"]);r!=null&&a(o,["_url","model"],ie(e,r));const i=l(t,["contents"]);if(i!=null){let u=ht(i);Array.isArray(u)&&(u=u.map(c=>ls(c))),a(o,["contents"],u)}const s=l(t,["config"]);return s!=null&&a(o,["generationConfig"],S_(e,s,o)),o}function Fd(e,t,n){const o={},r=l(t,["model"]);r!=null&&a(o,["_url","model"],ie(e,r));const i=l(t,["contents"]);if(i!=null){let u=ht(i);Array.isArray(u)&&(u=u.map(c=>c)),a(o,["contents"],u)}const s=l(t,["config"]);return s!=null&&a(o,["generationConfig"],T_(e,s,o)),o}function Gd(e,t){const n={},o=l(e,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const r=l(e,["candidates"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(f=>bE(f))),a(n,["candidates"],d)}const i=l(e,["modelVersion"]);i!=null&&a(n,["modelVersion"],i);const s=l(e,["promptFeedback"]);s!=null&&a(n,["promptFeedback"],s);const u=l(e,["responseId"]);u!=null&&a(n,["responseId"],u);const c=l(e,["usageMetadata"]);return c!=null&&a(n,["usageMetadata"],c),n}function Vd(e,t){const n={},o=l(e,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const r=l(e,["candidates"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(m=>m)),a(n,["candidates"],f)}const i=l(e,["createTime"]);i!=null&&a(n,["createTime"],i);const s=l(e,["modelVersion"]);s!=null&&a(n,["modelVersion"],s);const u=l(e,["promptFeedback"]);u!=null&&a(n,["promptFeedback"],u);const c=l(e,["responseId"]);c!=null&&a(n,["responseId"],c);const d=l(e,["usageMetadata"]);return d!=null&&a(n,["usageMetadata"],d),n}function C_(e,t,n){const o={};if(l(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=l(e,["numberOfImages"]);t!==void 0&&r!=null&&a(t,["parameters","sampleCount"],r);const i=l(e,["aspectRatio"]);t!==void 0&&i!=null&&a(t,["parameters","aspectRatio"],i);const s=l(e,["guidanceScale"]);if(t!==void 0&&s!=null&&a(t,["parameters","guidanceScale"],s),l(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=l(e,["safetyFilterLevel"]);t!==void 0&&u!=null&&a(t,["parameters","safetySetting"],u);const c=l(e,["personGeneration"]);t!==void 0&&c!=null&&a(t,["parameters","personGeneration"],c);const d=l(e,["includeSafetyAttributes"]);t!==void 0&&d!=null&&a(t,["parameters","includeSafetyAttributes"],d);const f=l(e,["includeRaiReason"]);t!==void 0&&f!=null&&a(t,["parameters","includeRaiReason"],f);const m=l(e,["language"]);t!==void 0&&m!=null&&a(t,["parameters","language"],m);const p=l(e,["outputMimeType"]);t!==void 0&&p!=null&&a(t,["parameters","outputOptions","mimeType"],p);const h=l(e,["outputCompressionQuality"]);if(t!==void 0&&h!=null&&a(t,["parameters","outputOptions","compressionQuality"],h),l(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const _=l(e,["imageSize"]);if(t!==void 0&&_!=null&&a(t,["parameters","sampleImageSize"],_),l(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return o}function x_(e,t,n){const o={},r=l(e,["outputGcsUri"]);t!==void 0&&r!=null&&a(t,["parameters","storageUri"],r);const i=l(e,["negativePrompt"]);t!==void 0&&i!=null&&a(t,["parameters","negativePrompt"],i);const s=l(e,["numberOfImages"]);t!==void 0&&s!=null&&a(t,["parameters","sampleCount"],s);const u=l(e,["aspectRatio"]);t!==void 0&&u!=null&&a(t,["parameters","aspectRatio"],u);const c=l(e,["guidanceScale"]);t!==void 0&&c!=null&&a(t,["parameters","guidanceScale"],c);const d=l(e,["seed"]);t!==void 0&&d!=null&&a(t,["parameters","seed"],d);const f=l(e,["safetyFilterLevel"]);t!==void 0&&f!=null&&a(t,["parameters","safetySetting"],f);const m=l(e,["personGeneration"]);t!==void 0&&m!=null&&a(t,["parameters","personGeneration"],m);const p=l(e,["includeSafetyAttributes"]);t!==void 0&&p!=null&&a(t,["parameters","includeSafetyAttributes"],p);const h=l(e,["includeRaiReason"]);t!==void 0&&h!=null&&a(t,["parameters","includeRaiReason"],h);const _=l(e,["language"]);t!==void 0&&_!=null&&a(t,["parameters","language"],_);const S=l(e,["outputMimeType"]);t!==void 0&&S!=null&&a(t,["parameters","outputOptions","mimeType"],S);const C=l(e,["outputCompressionQuality"]);t!==void 0&&C!=null&&a(t,["parameters","outputOptions","compressionQuality"],C);const y=l(e,["addWatermark"]);t!==void 0&&y!=null&&a(t,["parameters","addWatermark"],y);const v=l(e,["labels"]);t!==void 0&&v!=null&&a(t,["labels"],v);const E=l(e,["imageSize"]);t!==void 0&&E!=null&&a(t,["parameters","sampleImageSize"],E);const x=l(e,["enhancePrompt"]);return t!==void 0&&x!=null&&a(t,["parameters","enhancePrompt"],x),o}function I_(e,t,n){const o={},r=l(t,["model"]);r!=null&&a(o,["_url","model"],ie(e,r));const i=l(t,["prompt"]);i!=null&&a(o,["instances[0]","prompt"],i);const s=l(t,["config"]);return s!=null&&C_(s,o),o}function w_(e,t,n){const o={},r=l(t,["model"]);r!=null&&a(o,["_url","model"],ie(e,r));const i=l(t,["prompt"]);i!=null&&a(o,["instances[0]","prompt"],i);const s=l(t,["config"]);return s!=null&&x_(s,o),o}function A_(e,t){const n={},o=l(e,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const r=l(e,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(u=>H_(u))),a(n,["generatedImages"],s)}const i=l(e,["positivePromptSafetyAttributes"]);return i!=null&&a(n,["positivePromptSafetyAttributes"],Pm(i)),n}function N_(e,t){const n={},o=l(e,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const r=l(e,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(u=>as(u))),a(n,["generatedImages"],s)}const i=l(e,["positivePromptSafetyAttributes"]);return i!=null&&a(n,["positivePromptSafetyAttributes"],Mm(i)),n}function R_(e,t,n){const o={},r=l(e,["numberOfVideos"]);if(t!==void 0&&r!=null&&a(t,["parameters","sampleCount"],r),l(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=l(e,["durationSeconds"]);if(t!==void 0&&i!=null&&a(t,["parameters","durationSeconds"],i),l(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=l(e,["aspectRatio"]);t!==void 0&&s!=null&&a(t,["parameters","aspectRatio"],s);const u=l(e,["resolution"]);t!==void 0&&u!=null&&a(t,["parameters","resolution"],u);const c=l(e,["personGeneration"]);if(t!==void 0&&c!=null&&a(t,["parameters","personGeneration"],c),l(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=l(e,["negativePrompt"]);t!==void 0&&d!=null&&a(t,["parameters","negativePrompt"],d);const f=l(e,["enhancePrompt"]);if(t!==void 0&&f!=null&&a(t,["parameters","enhancePrompt"],f),l(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const m=l(e,["lastFrame"]);t!==void 0&&m!=null&&a(t,["instances[0]","lastFrame"],us(m));const p=l(e,["referenceImages"]);if(t!==void 0&&p!=null){let h=p;Array.isArray(h)&&(h=h.map(_=>MS(_))),a(t,["instances[0]","referenceImages"],h)}if(l(e,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(l(e,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return o}function P_(e,t,n){const o={},r=l(e,["numberOfVideos"]);t!==void 0&&r!=null&&a(t,["parameters","sampleCount"],r);const i=l(e,["outputGcsUri"]);t!==void 0&&i!=null&&a(t,["parameters","storageUri"],i);const s=l(e,["fps"]);t!==void 0&&s!=null&&a(t,["parameters","fps"],s);const u=l(e,["durationSeconds"]);t!==void 0&&u!=null&&a(t,["parameters","durationSeconds"],u);const c=l(e,["seed"]);t!==void 0&&c!=null&&a(t,["parameters","seed"],c);const d=l(e,["aspectRatio"]);t!==void 0&&d!=null&&a(t,["parameters","aspectRatio"],d);const f=l(e,["resolution"]);t!==void 0&&f!=null&&a(t,["parameters","resolution"],f);const m=l(e,["personGeneration"]);t!==void 0&&m!=null&&a(t,["parameters","personGeneration"],m);const p=l(e,["pubsubTopic"]);t!==void 0&&p!=null&&a(t,["parameters","pubsubTopic"],p);const h=l(e,["negativePrompt"]);t!==void 0&&h!=null&&a(t,["parameters","negativePrompt"],h);const _=l(e,["enhancePrompt"]);t!==void 0&&_!=null&&a(t,["parameters","enhancePrompt"],_);const S=l(e,["generateAudio"]);t!==void 0&&S!=null&&a(t,["parameters","generateAudio"],S);const C=l(e,["lastFrame"]);t!==void 0&&C!=null&&a(t,["instances[0]","lastFrame"],Pt(C));const y=l(e,["referenceImages"]);if(t!==void 0&&y!=null){let x=y;Array.isArray(x)&&(x=x.map(T=>kS(T))),a(t,["instances[0]","referenceImages"],x)}const v=l(e,["mask"]);t!==void 0&&v!=null&&a(t,["instances[0]","mask"],PS(v));const E=l(e,["compressionQuality"]);return t!==void 0&&E!=null&&a(t,["parameters","compressionQuality"],E),o}function M_(e,t){const n={},o=l(e,["name"]);o!=null&&a(n,["name"],o);const r=l(e,["metadata"]);r!=null&&a(n,["metadata"],r);const i=l(e,["done"]);i!=null&&a(n,["done"],i);const s=l(e,["error"]);s!=null&&a(n,["error"],s);const u=l(e,["response","generateVideoResponse"]);return u!=null&&a(n,["response"],U_(u)),n}function k_(e,t){const n={},o=l(e,["name"]);o!=null&&a(n,["name"],o);const r=l(e,["metadata"]);r!=null&&a(n,["metadata"],r);const i=l(e,["done"]);i!=null&&a(n,["done"],i);const s=l(e,["error"]);s!=null&&a(n,["error"],s);const u=l(e,["response"]);return u!=null&&a(n,["response"],F_(u)),n}function D_(e,t,n){const o={},r=l(t,["model"]);r!=null&&a(o,["_url","model"],ie(e,r));const i=l(t,["prompt"]);i!=null&&a(o,["instances[0]","prompt"],i);const s=l(t,["image"]);s!=null&&a(o,["instances[0]","image"],us(s));const u=l(t,["video"]);u!=null&&a(o,["instances[0]","video"],Dm(u));const c=l(t,["source"]);c!=null&&G_(c,o);const d=l(t,["config"]);return d!=null&&R_(d,o),o}function L_(e,t,n){const o={},r=l(t,["model"]);r!=null&&a(o,["_url","model"],ie(e,r));const i=l(t,["prompt"]);i!=null&&a(o,["instances[0]","prompt"],i);const s=l(t,["image"]);s!=null&&a(o,["instances[0]","image"],Pt(s));const u=l(t,["video"]);u!=null&&a(o,["instances[0]","video"],Lm(u));const c=l(t,["source"]);c!=null&&V_(c,o);const d=l(t,["config"]);return d!=null&&P_(d,o),o}function U_(e,t){const n={},o=l(e,["generatedSamples"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(u=>$_(u))),a(n,["generatedVideos"],s)}const r=l(e,["raiMediaFilteredCount"]);r!=null&&a(n,["raiMediaFilteredCount"],r);const i=l(e,["raiMediaFilteredReasons"]);return i!=null&&a(n,["raiMediaFilteredReasons"],i),n}function F_(e,t){const n={},o=l(e,["videos"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(u=>O_(u))),a(n,["generatedVideos"],s)}const r=l(e,["raiMediaFilteredCount"]);r!=null&&a(n,["raiMediaFilteredCount"],r);const i=l(e,["raiMediaFilteredReasons"]);return i!=null&&a(n,["raiMediaFilteredReasons"],i),n}function G_(e,t,n){const o={},r=l(e,["prompt"]);t!==void 0&&r!=null&&a(t,["instances[0]","prompt"],r);const i=l(e,["image"]);t!==void 0&&i!=null&&a(t,["instances[0]","image"],us(i));const s=l(e,["video"]);return t!==void 0&&s!=null&&a(t,["instances[0]","video"],Dm(s)),o}function V_(e,t,n){const o={},r=l(e,["prompt"]);t!==void 0&&r!=null&&a(t,["instances[0]","prompt"],r);const i=l(e,["image"]);t!==void 0&&i!=null&&a(t,["instances[0]","image"],Pt(i));const s=l(e,["video"]);return t!==void 0&&s!=null&&a(t,["instances[0]","video"],Lm(s)),o}function H_(e,t){const n={},o=l(e,["_self"]);o!=null&&a(n,["image"],Q_(o));const r=l(e,["raiFilteredReason"]);r!=null&&a(n,["raiFilteredReason"],r);const i=l(e,["_self"]);return i!=null&&a(n,["safetyAttributes"],Pm(i)),n}function as(e,t){const n={},o=l(e,["_self"]);o!=null&&a(n,["image"],Rm(o));const r=l(e,["raiFilteredReason"]);r!=null&&a(n,["raiFilteredReason"],r);const i=l(e,["_self"]);i!=null&&a(n,["safetyAttributes"],Mm(i));const s=l(e,["prompt"]);return s!=null&&a(n,["enhancedPrompt"],s),n}function B_(e,t){const n={},o=l(e,["_self"]);o!=null&&a(n,["mask"],Rm(o));const r=l(e,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),a(n,["labels"],i)}return n}function $_(e,t){const n={},o=l(e,["video"]);return o!=null&&a(n,["video"],NS(o)),n}function O_(e,t){const n={},o=l(e,["_self"]);return o!=null&&a(n,["video"],RS(o)),n}function q_(e,t){const n={},o=l(e,["modelSelectionConfig"]);o!=null&&a(n,["modelConfig"],o);const r=l(e,["responseJsonSchema"]);r!=null&&a(n,["responseJsonSchema"],r);const i=l(e,["audioTimestamp"]);i!=null&&a(n,["audioTimestamp"],i);const s=l(e,["candidateCount"]);s!=null&&a(n,["candidateCount"],s);const u=l(e,["enableAffectiveDialog"]);u!=null&&a(n,["enableAffectiveDialog"],u);const c=l(e,["frequencyPenalty"]);c!=null&&a(n,["frequencyPenalty"],c);const d=l(e,["logprobs"]);d!=null&&a(n,["logprobs"],d);const f=l(e,["maxOutputTokens"]);f!=null&&a(n,["maxOutputTokens"],f);const m=l(e,["mediaResolution"]);m!=null&&a(n,["mediaResolution"],m);const p=l(e,["presencePenalty"]);p!=null&&a(n,["presencePenalty"],p);const h=l(e,["responseLogprobs"]);h!=null&&a(n,["responseLogprobs"],h);const _=l(e,["responseMimeType"]);_!=null&&a(n,["responseMimeType"],_);const S=l(e,["responseModalities"]);S!=null&&a(n,["responseModalities"],S);const C=l(e,["responseSchema"]);C!=null&&a(n,["responseSchema"],C);const y=l(e,["routingConfig"]);y!=null&&a(n,["routingConfig"],y);const v=l(e,["seed"]);v!=null&&a(n,["seed"],v);const E=l(e,["speechConfig"]);E!=null&&a(n,["speechConfig"],E);const x=l(e,["stopSequences"]);x!=null&&a(n,["stopSequences"],x);const T=l(e,["temperature"]);T!=null&&a(n,["temperature"],T);const P=l(e,["thinkingConfig"]);P!=null&&a(n,["thinkingConfig"],P);const D=l(e,["topK"]);D!=null&&a(n,["topK"],D);const L=l(e,["topP"]);if(L!=null&&a(n,["topP"],L),l(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return n}function b_(e,t,n){const o={},r=l(t,["model"]);return r!=null&&a(o,["_url","name"],ie(e,r)),o}function z_(e,t,n){const o={},r=l(t,["model"]);return r!=null&&a(o,["_url","name"],ie(e,r)),o}function J_(e,t){const n={};if(l(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=l(e,["enableWidget"]);return o!=null&&a(n,["enableWidget"],o),n}function W_(e,t){const n={};if(l(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=l(e,["timeRangeFilter"]);return o!=null&&a(n,["timeRangeFilter"],o),n}function Y_(e,t){const n={},o=l(e,["aspectRatio"]);o!=null&&a(n,["aspectRatio"],o);const r=l(e,["imageSize"]);if(r!=null&&a(n,["imageSize"],r),l(e,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(l(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(l(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return n}function K_(e,t){const n={},o=l(e,["aspectRatio"]);o!=null&&a(n,["aspectRatio"],o);const r=l(e,["imageSize"]);r!=null&&a(n,["imageSize"],r);const i=l(e,["personGeneration"]);i!=null&&a(n,["personGeneration"],i);const s=l(e,["outputMimeType"]);s!=null&&a(n,["imageOutputOptions","mimeType"],s);const u=l(e,["outputCompressionQuality"]);return u!=null&&a(n,["imageOutputOptions","compressionQuality"],u),n}function Q_(e,t){const n={},o=l(e,["bytesBase64Encoded"]);o!=null&&a(n,["imageBytes"],xn(o));const r=l(e,["mimeType"]);return r!=null&&a(n,["mimeType"],r),n}function Rm(e,t){const n={},o=l(e,["gcsUri"]);o!=null&&a(n,["gcsUri"],o);const r=l(e,["bytesBase64Encoded"]);r!=null&&a(n,["imageBytes"],xn(r));const i=l(e,["mimeType"]);return i!=null&&a(n,["mimeType"],i),n}function us(e,t){const n={};if(l(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const o=l(e,["imageBytes"]);o!=null&&a(n,["bytesBase64Encoded"],xn(o));const r=l(e,["mimeType"]);return r!=null&&a(n,["mimeType"],r),n}function Pt(e,t){const n={},o=l(e,["gcsUri"]);o!=null&&a(n,["gcsUri"],o);const r=l(e,["imageBytes"]);r!=null&&a(n,["bytesBase64Encoded"],xn(r));const i=l(e,["mimeType"]);return i!=null&&a(n,["mimeType"],i),n}function X_(e,t,n,o){const r={},i=l(t,["pageSize"]);n!==void 0&&i!=null&&a(n,["_query","pageSize"],i);const s=l(t,["pageToken"]);n!==void 0&&s!=null&&a(n,["_query","pageToken"],s);const u=l(t,["filter"]);n!==void 0&&u!=null&&a(n,["_query","filter"],u);const c=l(t,["queryBase"]);return n!==void 0&&c!=null&&a(n,["_url","models_url"],Tm(e,c)),r}function Z_(e,t,n,o){const r={},i=l(t,["pageSize"]);n!==void 0&&i!=null&&a(n,["_query","pageSize"],i);const s=l(t,["pageToken"]);n!==void 0&&s!=null&&a(n,["_query","pageToken"],s);const u=l(t,["filter"]);n!==void 0&&u!=null&&a(n,["_query","filter"],u);const c=l(t,["queryBase"]);return n!==void 0&&c!=null&&a(n,["_url","models_url"],Tm(e,c)),r}function j_(e,t,n){const o={},r=l(t,["config"]);return r!=null&&X_(e,r,o),o}function eS(e,t,n){const o={},r=l(t,["config"]);return r!=null&&Z_(e,r,o),o}function tS(e,t){const n={},o=l(e,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const r=l(e,["nextPageToken"]);r!=null&&a(n,["nextPageToken"],r);const i=l(e,["_self"]);if(i!=null){let s=Cm(i);Array.isArray(s)&&(s=s.map(u=>Xl(u))),a(n,["models"],s)}return n}function nS(e,t){const n={},o=l(e,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const r=l(e,["nextPageToken"]);r!=null&&a(n,["nextPageToken"],r);const i=l(e,["_self"]);if(i!=null){let s=Cm(i);Array.isArray(s)&&(s=s.map(u=>Zl(u))),a(n,["models"],s)}return n}function oS(e,t){const n={},o=l(e,["maskMode"]);o!=null&&a(n,["maskMode"],o);const r=l(e,["segmentationClasses"]);r!=null&&a(n,["maskClasses"],r);const i=l(e,["maskDilation"]);return i!=null&&a(n,["dilation"],i),n}function Xl(e,t){const n={},o=l(e,["name"]);o!=null&&a(n,["name"],o);const r=l(e,["displayName"]);r!=null&&a(n,["displayName"],r);const i=l(e,["description"]);i!=null&&a(n,["description"],i);const s=l(e,["version"]);s!=null&&a(n,["version"],s);const u=l(e,["_self"]);u!=null&&a(n,["tunedModelInfo"],ES(u));const c=l(e,["inputTokenLimit"]);c!=null&&a(n,["inputTokenLimit"],c);const d=l(e,["outputTokenLimit"]);d!=null&&a(n,["outputTokenLimit"],d);const f=l(e,["supportedGenerationMethods"]);f!=null&&a(n,["supportedActions"],f);const m=l(e,["temperature"]);m!=null&&a(n,["temperature"],m);const p=l(e,["maxTemperature"]);p!=null&&a(n,["maxTemperature"],p);const h=l(e,["topP"]);h!=null&&a(n,["topP"],h);const _=l(e,["topK"]);_!=null&&a(n,["topK"],_);const S=l(e,["thinking"]);return S!=null&&a(n,["thinking"],S),n}function Zl(e,t){const n={},o=l(e,["name"]);o!=null&&a(n,["name"],o);const r=l(e,["displayName"]);r!=null&&a(n,["displayName"],r);const i=l(e,["description"]);i!=null&&a(n,["description"],i);const s=l(e,["versionId"]);s!=null&&a(n,["version"],s);const u=l(e,["deployedModels"]);if(u!=null){let p=u;Array.isArray(p)&&(p=p.map(h=>g_(h))),a(n,["endpoints"],p)}const c=l(e,["labels"]);c!=null&&a(n,["labels"],c);const d=l(e,["_self"]);d!=null&&a(n,["tunedModelInfo"],_S(d));const f=l(e,["defaultCheckpointId"]);f!=null&&a(n,["defaultCheckpointId"],f);const m=l(e,["checkpoints"]);if(m!=null){let p=m;Array.isArray(p)&&(p=p.map(h=>h)),a(n,["checkpoints"],p)}return n}function rS(e,t){const n={},o=l(e,["mediaResolution"]);o!=null&&a(n,["mediaResolution"],o);const r=l(e,["codeExecutionResult"]);r!=null&&a(n,["codeExecutionResult"],r);const i=l(e,["executableCode"]);i!=null&&a(n,["executableCode"],i);const s=l(e,["fileData"]);s!=null&&a(n,["fileData"],y_(s));const u=l(e,["functionCall"]);u!=null&&a(n,["functionCall"],v_(u));const c=l(e,["functionResponse"]);c!=null&&a(n,["functionResponse"],c);const d=l(e,["inlineData"]);d!=null&&a(n,["inlineData"],qE(d));const f=l(e,["text"]);f!=null&&a(n,["text"],f);const m=l(e,["thought"]);m!=null&&a(n,["thought"],m);const p=l(e,["thoughtSignature"]);p!=null&&a(n,["thoughtSignature"],p);const h=l(e,["videoMetadata"]);return h!=null&&a(n,["videoMetadata"],h),n}function iS(e,t){const n={},o=l(e,["productImage"]);return o!=null&&a(n,["image"],Pt(o)),n}function sS(e,t,n){const o={},r=l(e,["numberOfImages"]);t!==void 0&&r!=null&&a(t,["parameters","sampleCount"],r);const i=l(e,["baseSteps"]);t!==void 0&&i!=null&&a(t,["parameters","baseSteps"],i);const s=l(e,["outputGcsUri"]);t!==void 0&&s!=null&&a(t,["parameters","storageUri"],s);const u=l(e,["seed"]);t!==void 0&&u!=null&&a(t,["parameters","seed"],u);const c=l(e,["safetyFilterLevel"]);t!==void 0&&c!=null&&a(t,["parameters","safetySetting"],c);const d=l(e,["personGeneration"]);t!==void 0&&d!=null&&a(t,["parameters","personGeneration"],d);const f=l(e,["addWatermark"]);t!==void 0&&f!=null&&a(t,["parameters","addWatermark"],f);const m=l(e,["outputMimeType"]);t!==void 0&&m!=null&&a(t,["parameters","outputOptions","mimeType"],m);const p=l(e,["outputCompressionQuality"]);t!==void 0&&p!=null&&a(t,["parameters","outputOptions","compressionQuality"],p);const h=l(e,["enhancePrompt"]);t!==void 0&&h!=null&&a(t,["parameters","enhancePrompt"],h);const _=l(e,["labels"]);return t!==void 0&&_!=null&&a(t,["labels"],_),o}function lS(e,t,n){const o={},r=l(t,["model"]);r!=null&&a(o,["_url","model"],ie(e,r));const i=l(t,["source"]);i!=null&&uS(i,o);const s=l(t,["config"]);return s!=null&&sS(s,o),o}function aS(e,t){const n={},o=l(e,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>as(i))),a(n,["generatedImages"],r)}return n}function uS(e,t,n){const o={},r=l(e,["prompt"]);t!==void 0&&r!=null&&a(t,["instances[0]","prompt"],r);const i=l(e,["personImage"]);t!==void 0&&i!=null&&a(t,["instances[0]","personImage","image"],Pt(i));const s=l(e,["productImages"]);if(t!==void 0&&s!=null){let u=s;Array.isArray(u)&&(u=u.map(c=>iS(c))),a(t,["instances[0]","productImages"],u)}return o}function cS(e,t){const n={},o=l(e,["referenceImage"]);o!=null&&a(n,["referenceImage"],Pt(o));const r=l(e,["referenceId"]);r!=null&&a(n,["referenceId"],r);const i=l(e,["referenceType"]);i!=null&&a(n,["referenceType"],i);const s=l(e,["maskImageConfig"]);s!=null&&a(n,["maskImageConfig"],oS(s));const u=l(e,["controlImageConfig"]);u!=null&&a(n,["controlImageConfig"],QE(u));const c=l(e,["styleImageConfig"]);c!=null&&a(n,["styleImageConfig"],c);const d=l(e,["subjectImageConfig"]);return d!=null&&a(n,["subjectImageConfig"],d),n}function Pm(e,t){const n={},o=l(e,["safetyAttributes","categories"]);o!=null&&a(n,["categories"],o);const r=l(e,["safetyAttributes","scores"]);r!=null&&a(n,["scores"],r);const i=l(e,["contentType"]);return i!=null&&a(n,["contentType"],i),n}function Mm(e,t){const n={},o=l(e,["safetyAttributes","categories"]);o!=null&&a(n,["categories"],o);const r=l(e,["safetyAttributes","scores"]);r!=null&&a(n,["scores"],r);const i=l(e,["contentType"]);return i!=null&&a(n,["contentType"],i),n}function dS(e,t){const n={},o=l(e,["category"]);if(o!=null&&a(n,["category"],o),l(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=l(e,["threshold"]);return r!=null&&a(n,["threshold"],r),n}function fS(e,t){const n={},o=l(e,["image"]);return o!=null&&a(n,["image"],Pt(o)),n}function pS(e,t,n){const o={},r=l(e,["mode"]);t!==void 0&&r!=null&&a(t,["parameters","mode"],r);const i=l(e,["maxPredictions"]);t!==void 0&&i!=null&&a(t,["parameters","maxPredictions"],i);const s=l(e,["confidenceThreshold"]);t!==void 0&&s!=null&&a(t,["parameters","confidenceThreshold"],s);const u=l(e,["maskDilation"]);t!==void 0&&u!=null&&a(t,["parameters","maskDilation"],u);const c=l(e,["binaryColorThreshold"]);t!==void 0&&c!=null&&a(t,["parameters","binaryColorThreshold"],c);const d=l(e,["labels"]);return t!==void 0&&d!=null&&a(t,["labels"],d),o}function mS(e,t,n){const o={},r=l(t,["model"]);r!=null&&a(o,["_url","model"],ie(e,r));const i=l(t,["source"]);i!=null&&gS(i,o);const s=l(t,["config"]);return s!=null&&pS(s,o),o}function hS(e,t){const n={},o=l(e,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>B_(i))),a(n,["generatedMasks"],r)}return n}function gS(e,t,n){const o={},r=l(e,["prompt"]);t!==void 0&&r!=null&&a(t,["instances[0]","prompt"],r);const i=l(e,["image"]);t!==void 0&&i!=null&&a(t,["instances[0]","image"],Pt(i));const s=l(e,["scribbleImage"]);return t!==void 0&&s!=null&&a(t,["instances[0]","scribble"],fS(s)),o}function yS(e,t){const n={},o=l(e,["retrievalConfig"]);o!=null&&a(n,["retrievalConfig"],o);const r=l(e,["functionCallingConfig"]);return r!=null&&a(n,["functionCallingConfig"],E_(r)),n}function vS(e,t){const n={};if(l(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=l(e,["computerUse"]);o!=null&&a(n,["computerUse"],o);const r=l(e,["fileSearch"]);r!=null&&a(n,["fileSearch"],r);const i=l(e,["codeExecution"]);if(i!=null&&a(n,["codeExecution"],i),l(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=l(e,["functionDeclarations"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(p=>p)),a(n,["functionDeclarations"],m)}const u=l(e,["googleMaps"]);u!=null&&a(n,["googleMaps"],J_(u));const c=l(e,["googleSearch"]);c!=null&&a(n,["googleSearch"],W_(c));const d=l(e,["googleSearchRetrieval"]);d!=null&&a(n,["googleSearchRetrieval"],d);const f=l(e,["urlContext"]);return f!=null&&a(n,["urlContext"],f),n}function km(e,t){const n={},o=l(e,["retrieval"]);o!=null&&a(n,["retrieval"],o);const r=l(e,["computerUse"]);if(r!=null&&a(n,["computerUse"],r),l(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=l(e,["codeExecution"]);i!=null&&a(n,["codeExecution"],i);const s=l(e,["enterpriseWebSearch"]);s!=null&&a(n,["enterpriseWebSearch"],s);const u=l(e,["functionDeclarations"]);if(u!=null){let p=u;Array.isArray(p)&&(p=p.map(h=>__(h))),a(n,["functionDeclarations"],p)}const c=l(e,["googleMaps"]);c!=null&&a(n,["googleMaps"],c);const d=l(e,["googleSearch"]);d!=null&&a(n,["googleSearch"],d);const f=l(e,["googleSearchRetrieval"]);f!=null&&a(n,["googleSearchRetrieval"],f);const m=l(e,["urlContext"]);return m!=null&&a(n,["urlContext"],m),n}function ES(e,t){const n={},o=l(e,["baseModel"]);o!=null&&a(n,["baseModel"],o);const r=l(e,["createTime"]);r!=null&&a(n,["createTime"],r);const i=l(e,["updateTime"]);return i!=null&&a(n,["updateTime"],i),n}function _S(e,t){const n={},o=l(e,["labels","google-vertex-llm-tuning-base-model-id"]);o!=null&&a(n,["baseModel"],o);const r=l(e,["createTime"]);r!=null&&a(n,["createTime"],r);const i=l(e,["updateTime"]);return i!=null&&a(n,["updateTime"],i),n}function SS(e,t,n){const o={},r=l(e,["displayName"]);t!==void 0&&r!=null&&a(t,["displayName"],r);const i=l(e,["description"]);t!==void 0&&i!=null&&a(t,["description"],i);const s=l(e,["defaultCheckpointId"]);return t!==void 0&&s!=null&&a(t,["defaultCheckpointId"],s),o}function TS(e,t,n){const o={},r=l(e,["displayName"]);t!==void 0&&r!=null&&a(t,["displayName"],r);const i=l(e,["description"]);t!==void 0&&i!=null&&a(t,["description"],i);const s=l(e,["defaultCheckpointId"]);return t!==void 0&&s!=null&&a(t,["defaultCheckpointId"],s),o}function CS(e,t,n){const o={},r=l(t,["model"]);r!=null&&a(o,["_url","name"],ie(e,r));const i=l(t,["config"]);return i!=null&&SS(i,o),o}function xS(e,t,n){const o={},r=l(t,["model"]);r!=null&&a(o,["_url","model"],ie(e,r));const i=l(t,["config"]);return i!=null&&TS(i,o),o}function IS(e,t,n){const o={},r=l(e,["outputGcsUri"]);t!==void 0&&r!=null&&a(t,["parameters","storageUri"],r);const i=l(e,["safetyFilterLevel"]);t!==void 0&&i!=null&&a(t,["parameters","safetySetting"],i);const s=l(e,["personGeneration"]);t!==void 0&&s!=null&&a(t,["parameters","personGeneration"],s);const u=l(e,["includeRaiReason"]);t!==void 0&&u!=null&&a(t,["parameters","includeRaiReason"],u);const c=l(e,["outputMimeType"]);t!==void 0&&c!=null&&a(t,["parameters","outputOptions","mimeType"],c);const d=l(e,["outputCompressionQuality"]);t!==void 0&&d!=null&&a(t,["parameters","outputOptions","compressionQuality"],d);const f=l(e,["enhanceInputImage"]);t!==void 0&&f!=null&&a(t,["parameters","upscaleConfig","enhanceInputImage"],f);const m=l(e,["imagePreservationFactor"]);t!==void 0&&m!=null&&a(t,["parameters","upscaleConfig","imagePreservationFactor"],m);const p=l(e,["labels"]);t!==void 0&&p!=null&&a(t,["labels"],p);const h=l(e,["numberOfImages"]);t!==void 0&&h!=null&&a(t,["parameters","sampleCount"],h);const _=l(e,["mode"]);return t!==void 0&&_!=null&&a(t,["parameters","mode"],_),o}function wS(e,t,n){const o={},r=l(t,["model"]);r!=null&&a(o,["_url","model"],ie(e,r));const i=l(t,["image"]);i!=null&&a(o,["instances[0]","image"],Pt(i));const s=l(t,["upscaleFactor"]);s!=null&&a(o,["parameters","upscaleConfig","upscaleFactor"],s);const u=l(t,["config"]);return u!=null&&IS(u,o),o}function AS(e,t){const n={},o=l(e,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const r=l(e,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>as(s))),a(n,["generatedImages"],i)}return n}function NS(e,t){const n={},o=l(e,["uri"]);o!=null&&a(n,["uri"],o);const r=l(e,["encodedVideo"]);r!=null&&a(n,["videoBytes"],xn(r));const i=l(e,["encoding"]);return i!=null&&a(n,["mimeType"],i),n}function RS(e,t){const n={},o=l(e,["gcsUri"]);o!=null&&a(n,["uri"],o);const r=l(e,["bytesBase64Encoded"]);r!=null&&a(n,["videoBytes"],xn(r));const i=l(e,["mimeType"]);return i!=null&&a(n,["mimeType"],i),n}function PS(e,t){const n={},o=l(e,["image"]);o!=null&&a(n,["_self"],Pt(o));const r=l(e,["maskMode"]);return r!=null&&a(n,["maskMode"],r),n}function MS(e,t){const n={},o=l(e,["image"]);o!=null&&a(n,["image"],us(o));const r=l(e,["referenceType"]);return r!=null&&a(n,["referenceType"],r),n}function kS(e,t){const n={},o=l(e,["image"]);o!=null&&a(n,["image"],Pt(o));const r=l(e,["referenceType"]);return r!=null&&a(n,["referenceType"],r),n}function Dm(e,t){const n={},o=l(e,["uri"]);o!=null&&a(n,["uri"],o);const r=l(e,["videoBytes"]);r!=null&&a(n,["encodedVideo"],xn(r));const i=l(e,["mimeType"]);return i!=null&&a(n,["encoding"],i),n}function Lm(e,t){const n={},o=l(e,["uri"]);o!=null&&a(n,["gcsUri"],o);const r=l(e,["videoBytes"]);r!=null&&a(n,["bytesBase64Encoded"],xn(r));const i=l(e,["mimeType"]);return i!=null&&a(n,["mimeType"],i),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DS(e,t){const n={},o=l(e,["displayName"]);return t!==void 0&&o!=null&&a(t,["displayName"],o),n}function LS(e){const t={},n=l(e,["config"]);return n!=null&&DS(n,t),t}function US(e,t){const n={},o=l(e,["force"]);return t!==void 0&&o!=null&&a(t,["_query","force"],o),n}function FS(e){const t={},n=l(e,["name"]);n!=null&&a(t,["_url","name"],n);const o=l(e,["config"]);return o!=null&&US(o,t),t}function GS(e){const t={},n=l(e,["name"]);return n!=null&&a(t,["_url","name"],n),t}function VS(e,t){const n={},o=l(e,["customMetadata"]);if(t!==void 0&&o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),a(t,["customMetadata"],i)}const r=l(e,["chunkingConfig"]);return t!==void 0&&r!=null&&a(t,["chunkingConfig"],r),n}function HS(e){const t={},n=l(e,["name"]);n!=null&&a(t,["name"],n);const o=l(e,["metadata"]);o!=null&&a(t,["metadata"],o);const r=l(e,["done"]);r!=null&&a(t,["done"],r);const i=l(e,["error"]);i!=null&&a(t,["error"],i);const s=l(e,["response"]);return s!=null&&a(t,["response"],$S(s)),t}function BS(e){const t={},n=l(e,["fileSearchStoreName"]);n!=null&&a(t,["_url","file_search_store_name"],n);const o=l(e,["fileName"]);o!=null&&a(t,["fileName"],o);const r=l(e,["config"]);return r!=null&&VS(r,t),t}function $S(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const o=l(e,["parent"]);o!=null&&a(t,["parent"],o);const r=l(e,["documentName"]);return r!=null&&a(t,["documentName"],r),t}function OS(e,t){const n={},o=l(e,["pageSize"]);t!==void 0&&o!=null&&a(t,["_query","pageSize"],o);const r=l(e,["pageToken"]);return t!==void 0&&r!=null&&a(t,["_query","pageToken"],r),n}function qS(e){const t={},n=l(e,["config"]);return n!=null&&OS(n,t),t}function bS(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const o=l(e,["nextPageToken"]);o!=null&&a(t,["nextPageToken"],o);const r=l(e,["fileSearchStores"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),a(t,["fileSearchStores"],i)}return t}function Um(e,t){const n={},o=l(e,["mimeType"]);t!==void 0&&o!=null&&a(t,["mimeType"],o);const r=l(e,["displayName"]);t!==void 0&&r!=null&&a(t,["displayName"],r);const i=l(e,["customMetadata"]);if(t!==void 0&&i!=null){let u=i;Array.isArray(u)&&(u=u.map(c=>c)),a(t,["customMetadata"],u)}const s=l(e,["chunkingConfig"]);return t!==void 0&&s!=null&&a(t,["chunkingConfig"],s),n}function zS(e){const t={},n=l(e,["fileSearchStoreName"]);n!=null&&a(t,["_url","file_search_store_name"],n);const o=l(e,["config"]);return o!=null&&Um(o,t),t}function JS(e){const t={},n=l(e,["sdkHttpResponse"]);return n!=null&&a(t,["sdkHttpResponse"],n),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const WS="Content-Type",YS="X-Server-Timeout",KS="User-Agent",jl="x-goog-api-client",QS="1.39.0",XS=`google-genai-sdk/${QS}`,ZS="v1beta1",jS="v1beta";class eT{constructor(t){var n,o,r;this.clientOptions=Object.assign({},t),this.customBaseUrl=(n=t.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const i={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const u=t.project&&t.location||!!t.apiKey;this.customBaseUrl&&!u?(i.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?i.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(i.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),i.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:ZS}else{if(!this.clientOptions.apiKey)throw new Tr({message:"API key must be set when using the Gemini API.",status:403});i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:jS,i.baseUrl="https://generativelanguage.googleapis.com/"}i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,t.httpOptions))}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const t=new Headers;return await this.clientOptions.auth.addAuthHeaders(t),t}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&o.push(t.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),n=new URL(t);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,n,o){const r=[this.getRequestUrlInternal(n)];return o&&r.push(this.getBaseResourcePath()),t!==""&&r.push(t),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(t,n){return!(n.baseUrl&&n.baseUrlResourceScope===Wl.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const o=this.shouldPrependVertexProjectPath(t,n),r=this.constructUrl(t.path,n,o);if(t.queryParams)for(const[s,u]of Object.entries(t.queryParams))r.searchParams.append(s,String(u));let i={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=t.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,n,r.toString(),t.abortSignal),this.unaryApiCall(r,i,t.httpMethod)}patchHttpOptions(t,n){const o=JSON.parse(JSON.stringify(t));for(const[r,i]of Object.entries(n))typeof i=="object"?o[r]=Object.assign(Object.assign({},o[r]),i):i!==void 0&&(o[r]=i);return o}async requestStream(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const o=this.shouldPrependVertexProjectPath(t,n),r=this.constructUrl(t.path,n,o);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let i={};return i.body=t.body,i=await this.includeExtraHttpOptionsToRequestInit(i,n,r.toString(),t.abortSignal),this.streamApiCall(r,i,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,n,o,r){if(n&&n.timeout||r){const i=new AbortController,s=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const u=setTimeout(()=>i.abort(),n.timeout);u&&typeof u.unref=="function"&&u.unref()}r&&r.addEventListener("abort",()=>{i.abort()}),t.signal=s}return n&&n.extraBody!==null&&tT(t,n.extraBody),t.headers=await this.getHeadersInternal(n,o),t}async unaryApiCall(t,n,o){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:o})).then(async r=>(await Hd(r),new Yl(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(t,n,o){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:o})).then(async r=>(await Hd(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(t){return At(this,arguments,function*(){var o;const r=(o=t==null?void 0:t.body)===null||o===void 0?void 0:o.getReader(),i=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let s="";const u="data:",c=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:d,value:f}=yield Y(r.read());if(d){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=i.decode(f,{stream:!0});try{const _=JSON.parse(m);if("error"in _){const S=JSON.parse(JSON.stringify(_.error)),C=S.status,y=S.code,v=`got status: ${C}. ${JSON.stringify(_)}`;if(y>=400&&y<600)throw new Tr({message:v,status:y})}}catch(_){if(_.name==="ApiError")throw _}s+=m;let p=-1,h=0;for(;;){p=-1,h=0;for(const C of c){const y=s.indexOf(C);y!==-1&&(p===-1||y<p)&&(p=y,h=C.length)}if(p===-1)break;const _=s.substring(0,p);s=s.substring(p+h);const S=_.trim();if(S.startsWith(u)){const C=S.substring(u.length).trim();try{const y=new Response(C,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield Y(new Yl(y))}catch(y){throw new Error(`exception parsing stream chunk ${C}. ${y}`)}}}}}finally{r.releaseLock()}})}async apiCall(t,n){return fetch(t,n).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const t={},n=XS+" "+this.clientOptions.userAgentExtra;return t[KS]=n,t[jl]=n,t[WS]="application/json",t}async getHeadersInternal(t,n){const o=new Headers;if(t&&t.headers){for(const[r,i]of Object.entries(t.headers))o.append(r,i);t.timeout&&t.timeout>0&&o.append(YS,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,n),o}getFileName(t){var n;let o="";return typeof t=="string"&&(o=t.replace(/[/\\]+$/,""),o=(n=o.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),o}async uploadFile(t,n){var o;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const i=this.clientOptions.uploader,s=await i.stat(t);r.sizeBytes=String(s.size);const u=(o=n==null?void 0:n.mimeType)!==null&&o!==void 0?o:s.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=u;const c={file:r},d=this.getFileName(t),f=B("upload/v1beta/files",c._url),m=await this.fetchUploadUrl(f,r.sizeBytes,r.mimeType,d,c,n==null?void 0:n.httpOptions);return i.upload(t,m,this)}async uploadFileToFileSearchStore(t,n,o){var r;const i=this.clientOptions.uploader,s=await i.stat(n),u=String(s.size),c=(r=o==null?void 0:o.mimeType)!==null&&r!==void 0?r:s.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const d=`upload/v1beta/${t}:uploadToFileSearchStore`,f=this.getFileName(n),m={};o!=null&&Um(o,m);const p=await this.fetchUploadUrl(d,u,c,f,m,o==null?void 0:o.httpOptions);return i.uploadToFileSearchStore(n,p,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,n,o,r,i,s){var u;let c={};s?c=s:c={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${o}`},r?{"X-Goog-Upload-File-Name":r}:{})};const d=await this.request({path:t,body:JSON.stringify(i),httpMethod:"POST",httpOptions:c});if(!d||!(d!=null&&d.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(u=d==null?void 0:d.headers)===null||u===void 0?void 0:u["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function Hd(e){var t;if(e===void 0)throw new Error("response is undefined");if(!e.ok){const n=e.status;let o;!((t=e.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?o=await e.json():o={error:{message:await e.text(),code:e.status,status:e.statusText}};const r=JSON.stringify(o);throw n>=400&&n<600?new Tr({message:r,status:n}):new Error(r)}}function tT(e,t){if(!t||Object.keys(t).length===0)return;if(e.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof e.body=="string"&&e.body.length>0)try{const i=JSON.parse(e.body);if(typeof i=="object"&&i!==null&&!Array.isArray(i))n=i;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(i,s){const u=Object.assign({},i);for(const c in s)if(Object.prototype.hasOwnProperty.call(s,c)){const d=s[c],f=u[c];d&&typeof d=="object"&&!Array.isArray(d)&&f&&typeof f=="object"&&!Array.isArray(f)?u[c]=o(f,d):(f&&d&&typeof f!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof f}, New type: ${typeof d}. Overwriting.`),u[c]=d)}return u}const r=o(n,t);e.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nT="mcp_used/unknown";let oT=!1;function Fm(e){for(const t of e)if(rT(t)||typeof t=="object"&&"inputSchema"in t)return!0;return oT}function Gm(e){var t;const n=(t=e[jl])!==null&&t!==void 0?t:"";e[jl]=(n+` ${nT}`).trimStart()}function rT(e){return e!==null&&typeof e=="object"&&e instanceof au}function iT(e){return At(this,arguments,function*(n,o=100){let r,i=0;for(;i<o;){const s=yield Y(n.listTools({cursor:r}));for(const u of s.tools)yield yield Y(u),i++;if(!s.nextCursor)break;r=s.nextCursor}})}class au{constructor(t=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=n}static create(t,n){return new au(t,n)}async initialize(){var t,n,o,r;if(this.mcpTools.length>0)return;const i={},s=[];for(const f of this.mcpClients)try{for(var u=!0,c=(n=void 0,Nt(iT(f))),d;d=await c.next(),t=d.done,!t;u=!0){r=d.value,u=!1;const m=r;s.push(m);const p=m.name;if(i[p])throw new Error(`Duplicate function name ${p} found in MCP tools. Please ensure function names are unique.`);i[p]=f}}catch(m){n={error:m}}finally{try{!u&&!t&&(o=c.return)&&await o.call(c)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),Lv(this.mcpTools,this.config)}async callTool(t){await this.initialize();const n=[];for(const o of t)if(o.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[o.name];let i;this.config.timeout&&(i={timeout:this.config.timeout});const s=await r.callTool({name:o.name,arguments:o.args},void 0,i);n.push({functionResponse:{name:o.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function sT(e,t,n){const o=new wv;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(o,r),t(o)}class lT{constructor(t,n,o){this.apiClient=t,this.auth=n,this.webSocketFactory=o}async connect(t){var n,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),s=cT(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),c=`${r}/ws/google.ai.generativelanguage.${i}.GenerativeService.BidiGenerateMusic?key=${u}`;let d=()=>{};const f=new Promise(E=>{d=E}),m=t.callbacks,p=function(){d({})},h=this.apiClient,_={onopen:p,onmessage:E=>{sT(h,m.onmessage,E)},onerror:(n=m==null?void 0:m.onerror)!==null&&n!==void 0?n:function(E){},onclose:(o=m==null?void 0:m.onclose)!==null&&o!==void 0?o:function(E){}},S=this.webSocketFactory.create(c,uT(s),_);S.connect(),await f;const v={setup:{model:ie(this.apiClient,t.model)}};return S.send(JSON.stringify(v)),new aT(S,this.apiClient)}}class aT{constructor(t,n){this.conn=t,this.apiClient=n}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=DE(t);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const n=kE(t);this.conn.send(JSON.stringify(n))}sendPlaybackControl(t){const n={playbackControl:t};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(lo.PLAY)}pause(){this.sendPlaybackControl(lo.PAUSE)}stop(){this.sendPlaybackControl(lo.STOP)}resetContext(){this.sendPlaybackControl(lo.RESET_CONTEXT)}close(){this.conn.close()}}function uT(e){const t={};return e.forEach((n,o)=>{t[o]=n}),t}function cT(e){const t=new Headers;for(const[n,o]of Object.entries(e))t.append(n,o);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dT="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function fT(e,t,n){const o=new Iv;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const i=JSON.parse(r);if(e.isVertexAI()){const s=FE(i);Object.assign(o,s)}else Object.assign(o,i);t(o)}class pT{constructor(t,n,o){this.apiClient=t,this.auth=n,this.webSocketFactory=o,this.music=new lT(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var n,o,r,i,s,u;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let f;const m=this.apiClient.getHeaders();t.config&&t.config.tools&&Fm(t.config.tools)&&Gm(m);const p=yT(m);if(this.apiClient.isVertexAI()){const A=this.apiClient.getProject(),F=this.apiClient.getLocation(),J=this.apiClient.getApiKey(),oe=!!A&&!!F||!!J;this.apiClient.getCustomBaseUrl()&&!oe?f=c:(f=`${c}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(p,f))}else{const A=this.apiClient.getApiKey();let F="BidiGenerateContent",J="key";A!=null&&A.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),F="BidiGenerateContentConstrained",J="access_token"),f=`${c}/ws/google.ai.generativelanguage.${d}.GenerativeService.${F}?${J}=${A}`}let h=()=>{};const _=new Promise(A=>{h=A}),S=t.callbacks,C=function(){var A;(A=S==null?void 0:S.onopen)===null||A===void 0||A.call(S),h({})},y=this.apiClient,v={onopen:C,onmessage:A=>{fT(y,S.onmessage,A)},onerror:(n=S==null?void 0:S.onerror)!==null&&n!==void 0?n:function(A){},onclose:(o=S==null?void 0:S.onclose)!==null&&o!==void 0?o:function(A){}},E=this.webSocketFactory.create(f,gT(p),v);E.connect(),await _;let x=ie(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&x.startsWith("publishers/")){const A=this.apiClient.getProject(),F=this.apiClient.getLocation();A&&F&&(x=`projects/${A}/locations/${F}/`+x)}let T={};this.apiClient.isVertexAI()&&((r=t.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[Hi.AUDIO]}:t.config.responseModalities=[Hi.AUDIO]),!((i=t.config)===null||i===void 0)&&i.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const P=(u=(s=t.config)===null||s===void 0?void 0:s.tools)!==null&&u!==void 0?u:[],D=[];for(const A of P)if(this.isCallableTool(A)){const F=A;D.push(await F.tool())}else D.push(A);D.length>0&&(t.config.tools=D);const L={model:x,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?T=ME(this.apiClient,L):T=PE(this.apiClient,L),delete T.config,E.send(JSON.stringify(T)),new hT(E,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const mT={turnComplete:!0};class hT{constructor(t,n){this.conn=t,this.apiClient=n}tLiveClientContent(t,n){if(n.turns!==null&&n.turns!==void 0){let o=[];try{o=ht(n.turns),t.isVertexAI()||(o=o.map(r=>ls(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:o,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(t,n){let o=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?o=n.functionResponses:o=[n.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const i of o){if(typeof i!="object"||i===null||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!t.isVertexAI()&&!("id"in i))throw new Error(dT)}return{toolResponse:{functionResponses:o}}}sendClientContent(t){t=Object.assign(Object.assign({},mT),t);const n=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendRealtimeInput(t){let n={};this.apiClient.isVertexAI()?n={realtimeInput:UE(t)}:n={realtimeInput:LE(t)},this.conn.send(JSON.stringify(n))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function gT(e){const t={};return e.forEach((n,o)=>{t[o]=n}),t}function yT(e){const t=new Headers;for(const[n,o]of Object.entries(e))t.append(n,o);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Bd=10;function $d(e){var t,n,o;if(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let r=!1;for(const s of(n=e==null?void 0:e.tools)!==null&&n!==void 0?n:[])if(yo(s)){r=!0;break}if(!r)return!0;const i=(o=e==null?void 0:e.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return i&&(i<0||!Number.isInteger(i))||i==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0):!1}function yo(e){return"callTool"in e&&typeof e.callTool=="function"}function vT(e){var t,n,o;return(o=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(r=>yo(r)))!==null&&o!==void 0?o:!1}function Od(e){var t;const n=[];return!((t=e==null?void 0:e.config)===null||t===void 0)&&t.tools&&e.config.tools.forEach((o,r)=>{if(yo(o))return;const i=o;i.functionDeclarations&&i.functionDeclarations.length>0&&n.push(r)}),n}function qd(e){var t;return!(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ET extends Xt{constructor(t){super(),this.apiClient=t,this.generateContent=async n=>{var o,r,i,s,u;const c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!vT(n)||$d(n.config))return await this.generateContentInternal(c);const d=Od(n);if(d.length>0){const S=d.map(C=>`tools[${C}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${S}.`)}let f,m;const p=ht(c.contents),h=(i=(r=(o=c.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:Bd;let _=0;for(;_<h&&(f=await this.generateContentInternal(c),!(!f.functionCalls||f.functionCalls.length===0));){const S=f.candidates[0].content,C=[];for(const y of(u=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&u!==void 0?u:[])if(yo(y)){const E=await y.callTool(f.functionCalls);C.push(...E)}_++,m={role:"user",parts:C},c.contents=ht(c.contents),c.contents.push(S),c.contents.push(m),qd(c.config)&&(p.push(S),p.push(m))}return qd(c.config)&&(f.automaticFunctionCallingHistory=p),f},this.generateContentStream=async n=>{var o,r,i,s,u;if(this.maybeMoveToResponseJsonSchem(n),$d(n.config)){const m=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(m)}const c=Od(n);if(c.length>0){const m=c.map(p=>`tools[${p}]`).join(", ");throw new Error(`Incompatible tools found at ${m}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const d=(i=(r=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||i===void 0?void 0:i.streamFunctionCallArguments,f=(u=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||u===void 0?void 0:u.disable;if(d&&!f)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(o=>{var r;let i;const s=[];if(o!=null&&o.generatedImages)for(const c of o.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((r=c==null?void 0:c.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?i=c==null?void 0:c.safetyAttributes:s.push(c);let u;return i?u={generatedImages:s,positivePromptSafetyAttributes:i,sdkHttpResponse:o.sdkHttpResponse}:u={generatedImages:s,sdkHttpResponse:o.sdkHttpResponse},u}),this.list=async n=>{var o;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((o=s.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new bn(Kt.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(s),s)},this.editImage=async n=>{const o={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(o.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async n=>{let o={numberOfImages:1,mode:"upscale"};n.config&&(o=Object.assign(Object.assign({},o),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:o};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var o,r,i,s,u,c;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=n.video)===null||o===void 0)&&o.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((s=(i=n.source)===null||i===void 0?void 0:i.video)===null||s===void 0)&&s.uri&&(!((c=(u=n.source)===null||u===void 0?void 0:u.video)===null||c===void 0)&&c.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var n,o,r;const i=(n=t.config)===null||n===void 0?void 0:n.tools;if(!i)return t;const s=await Promise.all(i.map(async c=>yo(c)?await c.tool():c)),u={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:s})};if(u.config.tools=s,t.config&&t.config.tools&&Fm(t.config.tools)){const c=(r=(o=t.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&r!==void 0?r:{};let d=Object.assign({},c);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),Gm(d),u.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:d})}return u}async initAfcToolsMap(t){var n,o,r;const i=new Map;for(const s of(o=(n=t.config)===null||n===void 0?void 0:n.tools)!==null&&o!==void 0?o:[])if(yo(s)){const u=s,c=await u.tool();for(const d of(r=c.functionDeclarations)!==null&&r!==void 0?r:[]){if(!d.name)throw new Error("Function declaration name is required.");if(i.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);i.set(d.name,u)}}return i}async processAfcStream(t){var n,o,r;const i=(r=(o=(n=t.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:Bd;let s=!1,u=0;const c=await this.initAfcToolsMap(t);return function(d,f,m){return At(this,arguments,function*(){for(var p,h,_,S,C,y;u<i;){s&&(u++,s=!1);const T=yield Y(d.processParamsMaybeAddMcpUsage(m)),P=yield Y(d.generateContentStreamInternal(T)),D=[],L=[];try{for(var v=!0,E=(h=void 0,Nt(P)),x;x=yield Y(E.next()),p=x.done,!p;v=!0){S=x.value,v=!1;const A=S;if(yield yield Y(A),A.candidates&&(!((C=A.candidates[0])===null||C===void 0)&&C.content)){L.push(A.candidates[0].content);for(const F of(y=A.candidates[0].content.parts)!==null&&y!==void 0?y:[])if(u<i&&F.functionCall){if(!F.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(F.functionCall.name)){const J=yield Y(f.get(F.functionCall.name).callTool([F.functionCall]));D.push(...J)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${F.functionCall.name}`)}}}}catch(A){h={error:A}}finally{try{!v&&!p&&(_=E.return)&&(yield Y(_.call(E)))}finally{if(h)throw h.error}}if(D.length>0){s=!0;const A=new $o;A.candidates=[{content:{role:"user",parts:D}}],yield yield Y(A);const F=[];F.push(...L),F.push({role:"user",parts:D});const J=ht(m.contents).concat(F);m.contents=J}else break}})}(this,c,t)}async generateContentInternal(t){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Fd(this.apiClient,t);return u=B("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const m=Vd(f),p=new $o;return Object.assign(p,m),p})}else{const d=Ud(this.apiClient,t);return u=B("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const m=Gd(f),p=new $o;return Object.assign(p,m),p})}}async generateContentStreamInternal(t){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Fd(this.apiClient,t);return u=B("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(m){return At(this,arguments,function*(){var p,h,_,S;try{for(var C=!0,y=Nt(m),v;v=yield Y(y.next()),p=v.done,!p;C=!0){S=v.value,C=!1;const E=S,x=Vd(yield Y(E.json()),t);x.sdkHttpResponse={headers:E.headers};const T=new $o;Object.assign(T,x),yield yield Y(T)}}catch(E){h={error:E}}finally{try{!C&&!p&&(_=y.return)&&(yield Y(_.call(y)))}finally{if(h)throw h.error}}})})}else{const d=Ud(this.apiClient,t);return u=B("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}),s.then(function(m){return At(this,arguments,function*(){var p,h,_,S;try{for(var C=!0,y=Nt(m),v;v=yield Y(y.next()),p=v.done,!p;C=!0){S=v.value,C=!1;const E=S,x=Gd(yield Y(E.json()),t);x.sdkHttpResponse={headers:E.headers};const T=new $o;Object.assign(T,x),yield yield Y(T)}}catch(E){h={error:E}}finally{try{!C&&!p&&(_=y.return)&&(yield Y(_.call(y)))}finally{if(h)throw h.error}}})})}}async embedContent(t){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=p_(this.apiClient,t);return u=B("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const m=h_(f),p=new vd;return Object.assign(p,m),p})}else{const d=f_(this.apiClient,t);return u=B("{model}:batchEmbedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const m=m_(f),p=new vd;return Object.assign(p,m),p})}}async generateImagesInternal(t){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=w_(this.apiClient,t);return u=B("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const m=N_(f),p=new Ed;return Object.assign(p,m),p})}else{const d=I_(this.apiClient,t);return u=B("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const m=A_(f),p=new Ed;return Object.assign(p,m),p})}}async editImageInternal(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const u=a_(this.apiClient,t);return i=B("{model}:predict",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=u_(c),f=new pv;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const u=wS(this.apiClient,t);return i=B("{model}:predict",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=AS(c),f=new mv;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const u=lS(this.apiClient,t);return i=B("{model}:predict",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=aS(c),f=new hv;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const u=mS(this.apiClient,t);return i=B("{model}:predict",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=hS(c),f=new gv;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=z_(this.apiClient,t);return u=B("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Zl(f))}else{const d=b_(this.apiClient,t);return u=B("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Xl(f))}}async listInternal(t){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=eS(this.apiClient,t);return u=B("{models_url}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const m=nS(f),p=new _d;return Object.assign(p,m),p})}else{const d=j_(this.apiClient,t);return u=B("{models_url}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const m=tS(f),p=new _d;return Object.assign(p,m),p})}}async update(t){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=xS(this.apiClient,t);return u=B("{model}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Zl(f))}else{const d=CS(this.apiClient,t);return u=B("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Xl(f))}}async delete(t){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=r_(this.apiClient,t);return u=B("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const m=s_(f),p=new Sd;return Object.assign(p,m),p})}else{const d=o_(this.apiClient,t);return u=B("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const m=i_(f),p=new Sd;return Object.assign(p,m),p})}}async countTokens(t){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=e_(this.apiClient,t);return u=B("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const m=n_(f),p=new Td;return Object.assign(p,m),p})}else{const d=jE(this.apiClient,t);return u=B("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const m=t_(f),p=new Td;return Object.assign(p,m),p})}}async computeTokens(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const u=JE(this.apiClient,t);return i=B("{model}:computeTokens",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=WE(c),f=new yv;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=L_(this.apiClient,t);return u=B("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>{const m=k_(f),p=new Bi;return Object.assign(p,m),p})}else{const d=D_(this.apiClient,t);return u=B("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const m=M_(f),p=new Bi;return Object.assign(p,m),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _T extends Xt{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const n=t.operation,o=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let i;o&&"httpOptions"in o&&(i=o.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(t){const n=t.operation,o=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let i;o&&"httpOptions"in o&&(i=o.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(t){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=lv(t);return u=B("{operationName}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s}else{const d=sv(t);return u=B("{operationName}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s}}async fetchPredictVideosOperationInternal(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const u=jy(t);return i=B("{resourceName}:fetchPredictOperation",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ST(e){const t={},n=l(e,["data"]);if(n!=null&&a(t,["data"],n),l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=l(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function TT(e){const t={},n=l(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>MT(i))),a(t,["parts"],r)}const o=l(e,["role"]);return o!=null&&a(t,["role"],o),t}function CT(e,t,n){const o={},r=l(t,["expireTime"]);n!==void 0&&r!=null&&a(n,["expireTime"],r);const i=l(t,["newSessionExpireTime"]);n!==void 0&&i!=null&&a(n,["newSessionExpireTime"],i);const s=l(t,["uses"]);n!==void 0&&s!=null&&a(n,["uses"],s);const u=l(t,["liveConnectConstraints"]);n!==void 0&&u!=null&&a(n,["bidiGenerateContentSetup"],PT(e,u));const c=l(t,["lockAdditionalFields"]);return n!==void 0&&c!=null&&a(n,["fieldMask"],c),o}function xT(e,t){const n={},o=l(t,["config"]);return o!=null&&a(n,["config"],CT(e,o,n)),n}function IT(e){const t={};if(l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const o=l(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function wT(e){const t={},n=l(e,["id"]);n!=null&&a(t,["id"],n);const o=l(e,["args"]);o!=null&&a(t,["args"],o);const r=l(e,["name"]);if(r!=null&&a(t,["name"],r),l(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function AT(e){const t={};if(l(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(e,["enableWidget"]);return n!=null&&a(t,["enableWidget"],n),t}function NT(e){const t={};if(l(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(e,["timeRangeFilter"]);return n!=null&&a(t,["timeRangeFilter"],n),t}function RT(e,t){const n={},o=l(e,["generationConfig"]);t!==void 0&&o!=null&&a(t,["setup","generationConfig"],o);const r=l(e,["responseModalities"]);t!==void 0&&r!=null&&a(t,["setup","generationConfig","responseModalities"],r);const i=l(e,["temperature"]);t!==void 0&&i!=null&&a(t,["setup","generationConfig","temperature"],i);const s=l(e,["topP"]);t!==void 0&&s!=null&&a(t,["setup","generationConfig","topP"],s);const u=l(e,["topK"]);t!==void 0&&u!=null&&a(t,["setup","generationConfig","topK"],u);const c=l(e,["maxOutputTokens"]);t!==void 0&&c!=null&&a(t,["setup","generationConfig","maxOutputTokens"],c);const d=l(e,["mediaResolution"]);t!==void 0&&d!=null&&a(t,["setup","generationConfig","mediaResolution"],d);const f=l(e,["seed"]);t!==void 0&&f!=null&&a(t,["setup","generationConfig","seed"],f);const m=l(e,["speechConfig"]);t!==void 0&&m!=null&&a(t,["setup","generationConfig","speechConfig"],lu(m));const p=l(e,["thinkingConfig"]);t!==void 0&&p!=null&&a(t,["setup","generationConfig","thinkingConfig"],p);const h=l(e,["enableAffectiveDialog"]);t!==void 0&&h!=null&&a(t,["setup","generationConfig","enableAffectiveDialog"],h);const _=l(e,["systemInstruction"]);t!==void 0&&_!=null&&a(t,["setup","systemInstruction"],TT(He(_)));const S=l(e,["tools"]);if(t!==void 0&&S!=null){let P=Ro(S);Array.isArray(P)&&(P=P.map(D=>DT(No(D)))),a(t,["setup","tools"],P)}const C=l(e,["sessionResumption"]);t!==void 0&&C!=null&&a(t,["setup","sessionResumption"],kT(C));const y=l(e,["inputAudioTranscription"]);t!==void 0&&y!=null&&a(t,["setup","inputAudioTranscription"],y);const v=l(e,["outputAudioTranscription"]);t!==void 0&&v!=null&&a(t,["setup","outputAudioTranscription"],v);const E=l(e,["realtimeInputConfig"]);t!==void 0&&E!=null&&a(t,["setup","realtimeInputConfig"],E);const x=l(e,["contextWindowCompression"]);t!==void 0&&x!=null&&a(t,["setup","contextWindowCompression"],x);const T=l(e,["proactivity"]);if(t!==void 0&&T!=null&&a(t,["setup","proactivity"],T),l(e,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function PT(e,t){const n={},o=l(t,["model"]);o!=null&&a(n,["setup","model"],ie(e,o));const r=l(t,["config"]);return r!=null&&a(n,["config"],RT(r,n)),n}function MT(e){const t={},n=l(e,["mediaResolution"]);n!=null&&a(t,["mediaResolution"],n);const o=l(e,["codeExecutionResult"]);o!=null&&a(t,["codeExecutionResult"],o);const r=l(e,["executableCode"]);r!=null&&a(t,["executableCode"],r);const i=l(e,["fileData"]);i!=null&&a(t,["fileData"],IT(i));const s=l(e,["functionCall"]);s!=null&&a(t,["functionCall"],wT(s));const u=l(e,["functionResponse"]);u!=null&&a(t,["functionResponse"],u);const c=l(e,["inlineData"]);c!=null&&a(t,["inlineData"],ST(c));const d=l(e,["text"]);d!=null&&a(t,["text"],d);const f=l(e,["thought"]);f!=null&&a(t,["thought"],f);const m=l(e,["thoughtSignature"]);m!=null&&a(t,["thoughtSignature"],m);const p=l(e,["videoMetadata"]);return p!=null&&a(t,["videoMetadata"],p),t}function kT(e){const t={},n=l(e,["handle"]);if(n!=null&&a(t,["handle"],n),l(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function DT(e){const t={};if(l(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=l(e,["computerUse"]);n!=null&&a(t,["computerUse"],n);const o=l(e,["fileSearch"]);o!=null&&a(t,["fileSearch"],o);const r=l(e,["codeExecution"]);if(r!=null&&a(t,["codeExecution"],r),l(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=l(e,["functionDeclarations"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(m=>m)),a(t,["functionDeclarations"],f)}const s=l(e,["googleMaps"]);s!=null&&a(t,["googleMaps"],AT(s));const u=l(e,["googleSearch"]);u!=null&&a(t,["googleSearch"],NT(u));const c=l(e,["googleSearchRetrieval"]);c!=null&&a(t,["googleSearchRetrieval"],c);const d=l(e,["urlContext"]);return d!=null&&a(t,["urlContext"],d),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function LT(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const o=e[n];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const r=Object.keys(o).map(i=>`${n}.${i}`);t.push(...r)}else t.push(n)}return t.join(",")}function UT(e,t){let n=null;const o=e.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const i=o.setup;typeof i=="object"&&i!==null?(e.bidiGenerateContentSetup=i,n=i):delete e.bidiGenerateContentSetup}else o!==void 0&&delete e.bidiGenerateContentSetup;const r=e.fieldMask;if(n){const i=LT(n);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)i?e.fieldMask=i:delete e.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];r.length>0&&(u=r.map(d=>s.includes(d)?`generationConfig.${d}`:d));const c=[];i&&c.push(i),u.length>0&&c.push(...u),c.length>0?e.fieldMask=c.join(","):delete e.fieldMask}else delete e.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?e.fieldMask=r.join(","):delete e.fieldMask;return e}class FT extends Xt{constructor(t){super(),this.apiClient=t}async create(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=xT(this.apiClient,t);i=B("auth_tokens",u._url),s=u._query,delete u.config,delete u._url,delete u._query;const c=UT(u,t.config);return r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>d)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GT(e,t){const n={},o=l(e,["force"]);return t!==void 0&&o!=null&&a(t,["_query","force"],o),n}function VT(e){const t={},n=l(e,["name"]);n!=null&&a(t,["_url","name"],n);const o=l(e,["config"]);return o!=null&&GT(o,t),t}function HT(e){const t={},n=l(e,["name"]);return n!=null&&a(t,["_url","name"],n),t}function BT(e,t){const n={},o=l(e,["pageSize"]);t!==void 0&&o!=null&&a(t,["_query","pageSize"],o);const r=l(e,["pageToken"]);return t!==void 0&&r!=null&&a(t,["_query","pageToken"],r),n}function $T(e){const t={},n=l(e,["parent"]);n!=null&&a(t,["_url","parent"],n);const o=l(e,["config"]);return o!=null&&BT(o,t),t}function OT(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const o=l(e,["nextPageToken"]);o!=null&&a(t,["nextPageToken"],o);const r=l(e,["documents"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),a(t,["documents"],i)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qT extends Xt{constructor(t){super(),this.apiClient=t,this.list=async n=>new bn(Kt.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:n.parent,config:o.config}),await this.listInternal(n),n)}async get(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=HT(t);return i=B("{name}",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async delete(t){var n,o;let r="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=VT(t);r=B("{name}",s._url),i=s._query,delete s._url,delete s._query,await this.apiClient.request({path:r,queryParams:i,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=$T(t);return i=B("{parent}/documents",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=OT(c),f=new vv;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bT extends Xt{constructor(t,n=new qT(t)){super(),this.apiClient=t,this.documents=n,this.list=async(o={})=>new bn(Kt.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(o),o)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=LS(t);return i=B("fileSearchStores",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async get(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=GS(t);return i=B("{name}",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async delete(t){var n,o;let r="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=FS(t);r=B("{name}",s._url),i=s._query,delete s._url,delete s._query,await this.apiClient.request({path:r,queryParams:i,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=qS(t);return i=B("fileSearchStores",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=bS(c),f=new Ev;return Object.assign(f,d),f})}}async uploadToFileSearchStoreInternal(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=zS(t);return i=B("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=JS(c),f=new _v;return Object.assign(f,d),f})}}async importFile(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=BS(t);return i=B("{file_search_store_name}:importFile",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=HS(c),f=new nu;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Vm=function(){const{crypto:e}=globalThis;if(e!=null&&e.randomUUID)return Vm=e.randomUUID.bind(e),e.randomUUID();const t=new Uint8Array(1),n=e?()=>e.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^n()&15>>+o/4).toString(16))};const zT=()=>Vm();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ea(e){return typeof e=="object"&&e!==null&&("name"in e&&e.name==="AbortError"||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}const ta=e=>{if(e instanceof Error)return e;if(typeof e=="object"&&e!==null){try{if(Object.prototype.toString.call(e)==="[object Error]"){const t=new Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch{}try{return new Error(JSON.stringify(e))}catch{}}return new Error(e)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vt extends Error{}class Je extends vt{constructor(t,n,o,r){super(`${Je.makeMessage(t,n,o)}`),this.status=t,this.headers=r,this.error=n}static makeMessage(t,n,o){const r=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):o;return t&&r?`${t} ${r}`:t?`${t} status code (no body)`:r||"(no status code or body)"}static generate(t,n,o,r){if(!t||!r)return new cs({message:o,cause:ta(n)});const i=n;return t===400?new Bm(t,i,o,r):t===401?new $m(t,i,o,r):t===403?new Om(t,i,o,r):t===404?new qm(t,i,o,r):t===409?new bm(t,i,o,r):t===422?new zm(t,i,o,r):t===429?new Jm(t,i,o,r):t>=500?new Wm(t,i,o,r):new Je(t,i,o,r)}}class na extends Je{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class cs extends Je{constructor({message:t,cause:n}){super(void 0,void 0,t||"Connection error.",void 0),n&&(this.cause=n)}}class Hm extends cs{constructor({message:t}={}){super({message:t??"Request timed out."})}}class Bm extends Je{}class $m extends Je{}class Om extends Je{}class qm extends Je{}class bm extends Je{}class zm extends Je{}class Jm extends Je{}class Wm extends Je{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const JT=/^[a-z][a-z0-9+.-]*:/i,WT=e=>JT.test(e);let oa=e=>(oa=Array.isArray,oa(e));const YT=oa;let KT=YT;const bd=KT;function QT(e){if(!e)return!0;for(const t in e)return!1;return!0}function XT(e,t){return Object.prototype.hasOwnProperty.call(e,t)}const ZT=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new vt(`${e} must be an integer`);if(t<0)throw new vt(`${e} must be a positive integer`);return t},jT=e=>{try{return JSON.parse(e)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const eC=e=>new Promise(t=>setTimeout(t,e));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Yn="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tC(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const nC=()=>{var e,t,n,o,r;const i=tC();if(i==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Yn,"X-Stainless-OS":Jd(Deno.build.os),"X-Stainless-Arch":zd(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(t=(e=Deno.version)===null||e===void 0?void 0:e.deno)!==null&&t!==void 0?t:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Yn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(i==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Yn,"X-Stainless-OS":Jd((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":zd((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const s=oC();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Yn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Yn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function oC(){if(typeof navigator>"u"||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const o=n.exec(navigator.userAgent);if(o){const r=o[1]||0,i=o[2]||0,s=o[3]||0;return{browser:t,version:`${r}.${i}.${s}`}}}return null}const zd=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",Jd=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown");let Yr;const rC=()=>Yr??(Yr=nC());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iC(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Ym(...e){const t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function sC(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return Ym({start(){},async pull(n){const{done:o,value:r}=await t.next();o?n.close():n.enqueue(r)},async cancel(){var n;await((n=t.return)===null||n===void 0?void 0:n.call(t))}})}function Km(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const n=await t.read();return n!=null&&n.done&&t.releaseLock(),n}catch(n){throw t.releaseLock(),n}},async return(){const n=t.cancel();return t.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function lC(e){var t,n;if(e===null||typeof e!="object")return;if(e[Symbol.asyncIterator]){await((n=(t=e[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(t));return}const o=e.getReader(),r=o.cancel();o.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const aC=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Qm=()=>{var e;if(typeof File>"u"){const{process:t}=globalThis,n=typeof((e=t==null?void 0:t.versions)===null||e===void 0?void 0:e.node)=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Ys(e,t,n){return Qm(),new File(e,t??"unknown_file",n)}function uC(e){return(typeof e=="object"&&e!==null&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}const cC=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Xm=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",dC=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&Xm(e),fC=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function";async function pC(e,t,n){if(Qm(),e=await e,dC(e))return e instanceof File?e:Ys([await e.arrayBuffer()],e.name);if(fC(e)){const r=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),Ys(await ra(r),t,n)}const o=await ra(e);if(t||(t=uC(e)),!(n!=null&&n.type)){const r=o.find(i=>typeof i=="object"&&"type"in i&&i.type);typeof r=="string"&&(n=Object.assign(Object.assign({},n),{type:r}))}return Ys(o,t,n)}async function ra(e){var t,n,o,r,i;let s=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)s.push(e);else if(Xm(e))s.push(e instanceof Blob?e:await e.arrayBuffer());else if(cC(e))try{for(var u=!0,c=Nt(e),d;d=await c.next(),t=d.done,!t;u=!0){r=d.value,u=!1;const f=r;s.push(...await ra(f))}}catch(f){n={error:f}}finally{try{!u&&!t&&(o=c.return)&&await o.call(c)}finally{if(n)throw n.error}}else{const f=(i=e==null?void 0:e.constructor)===null||i===void 0?void 0:i.name;throw new Error(`Unexpected data type: ${typeof e}${f?`; constructor: ${f}`:""}${mC(e)}`)}return s}function mC(e){return typeof e!="object"||e===null?"":`; props: [${Object.getOwnPropertyNames(e).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zm{constructor(t){this._client=t}}Zm._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jm(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Wd=Object.freeze(Object.create(null)),hC=(e=jm)=>function(n,...o){if(n.length===1)return n[0];let r=!1;const i=[],s=n.reduce((f,m,p)=>{var h,_,S;/[?#]/.test(m)&&(r=!0);const C=o[p];let y=(r?encodeURIComponent:e)(""+C);return p!==o.length&&(C==null||typeof C=="object"&&C.toString===((S=Object.getPrototypeOf((_=Object.getPrototypeOf((h=C.hasOwnProperty)!==null&&h!==void 0?h:Wd))!==null&&_!==void 0?_:Wd))===null||S===void 0?void 0:S.toString))&&(y=C+"",i.push({start:f.length+m.length,length:y.length,error:`Value of type ${Object.prototype.toString.call(C).slice(8,-1)} is not a valid path parameter`})),f+m+(p===o.length?"":y)},""),u=s.split(/[?#]/,1)[0],c=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=c.exec(u))!==null;)i.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(i.sort((f,m)=>f.start-m.start),i.length>0){let f=0;const m=i.reduce((p,h)=>{const _=" ".repeat(h.start-f),S="^".repeat(h.length);return f=h.start+h.length,p+_+S},"");throw new vt(`Path parameters result in path with invalid segments:
${i.map(p=>p.error).join(`
`)}
${s}
${m}`)}return s},Kr=hC(jm);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eh extends Zm{create(t,n){var o;const{api_version:r=this._client.apiVersion}=t,i=Oi(t,["api_version"]);if("model"in i&&"agent_config"in i)throw new vt("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in i&&"generation_config"in i)throw new vt("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Kr`/${r}/interactions`,Object.assign(Object.assign({body:i},n),{stream:(o=t.stream)!==null&&o!==void 0?o:!1}))}delete(t,n={},o){const{api_version:r=this._client.apiVersion}=n??{};return this._client.delete(Kr`/${r}/interactions/${t}`,o)}cancel(t,n={},o){const{api_version:r=this._client.apiVersion}=n??{};return this._client.post(Kr`/${r}/interactions/${t}/cancel`,o)}get(t,n={},o){var r;const i=n??{},{api_version:s=this._client.apiVersion}=i,u=Oi(i,["api_version"]);return this._client.get(Kr`/${s}/interactions/${t}`,Object.assign(Object.assign({query:u},o),{stream:(r=n==null?void 0:n.stream)!==null&&r!==void 0?r:!1}))}}eh._key=Object.freeze(["interactions"]);class th extends eh{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gC(e){let t=0;for(const r of e)t+=r.length;const n=new Uint8Array(t);let o=0;for(const r of e)n.set(r,o),o+=r.length;return n}let Qr;function uu(e){let t;return(Qr??(t=new globalThis.TextEncoder,Qr=t.encode.bind(t)))(e)}let Xr;function Yd(e){let t;return(Xr??(t=new globalThis.TextDecoder,Xr=t.decode.bind(t)))(e)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ds{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(t){if(t==null)return[];const n=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?uu(t):t;this.buffer=gC([this.buffer,n]);const o=[];let r;for(;(r=yC(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){o.push(Yd(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const i=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,s=Yd(this.buffer.subarray(0,i));o.push(s),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}}ds.NEWLINE_CHARS=new Set([`
`,"\r"]);ds.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function yC(e,t){for(let r=t??0;r<e.length;r++){if(e[r]===10)return{preceding:r,index:r+1,carriage:!1};if(e[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function vC(e){for(let o=0;o<e.length-1;o++){if(e[o]===10&&e[o+1]===10||e[o]===13&&e[o+1]===13)return o+2;if(e[o]===13&&e[o+1]===10&&o+3<e.length&&e[o+2]===13&&e[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qi={off:0,error:200,warn:300,info:400,debug:500},Kd=(e,t,n)=>{if(e){if(XT(qi,e))return e;qe(n).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(qi))}`)}};function Yo(){}function Zr(e,t,n){return!t||qi[e]>qi[n]?Yo:t[e].bind(t)}const EC={error:Yo,warn:Yo,info:Yo,debug:Yo};let Qd=new WeakMap;function qe(e){var t;const n=e.logger,o=(t=e.logLevel)!==null&&t!==void 0?t:"off";if(!n)return EC;const r=Qd.get(n);if(r&&r[0]===o)return r[1];const i={error:Zr("error",n,o),warn:Zr("warn",n,o),info:Zr("info",n,o),debug:Zr("debug",n,o)};return Qd.set(n,[o,i]),i}const Mn=e=>(e.options&&(e.options=Object.assign({},e.options),delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([t,n])=>[t,t.toLowerCase()==="x-goog-api-key"||t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ao{constructor(t,n,o){this.iterator=t,this.controller=n,this.client=o}static fromSSEResponse(t,n,o){let r=!1;const i=o?qe(o):console;function s(){return At(this,arguments,function*(){var c,d,f,m;if(r)throw new vt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let p=!1;try{try{for(var h=!0,_=Nt(_C(t,n)),S;S=yield Y(_.next()),c=S.done,!c;h=!0){m=S.value,h=!1;const C=m;if(!p)if(C.data.startsWith("[DONE]")){p=!0;continue}else try{yield yield Y(JSON.parse(C.data))}catch(y){throw i.error("Could not parse message into JSON:",C.data),i.error("From chunk:",C.raw),y}}}catch(C){d={error:C}}finally{try{!h&&!c&&(f=_.return)&&(yield Y(f.call(_)))}finally{if(d)throw d.error}}p=!0}catch(C){if(ea(C))return yield Y(void 0);throw C}finally{p||n.abort()}})}return new ao(s,n,o)}static fromReadableStream(t,n,o){let r=!1;function i(){return At(this,arguments,function*(){var c,d,f,m;const p=new ds,h=Km(t);try{for(var _=!0,S=Nt(h),C;C=yield Y(S.next()),c=C.done,!c;_=!0){m=C.value,_=!1;const y=m;for(const v of p.decode(y))yield yield Y(v)}}catch(y){d={error:y}}finally{try{!_&&!c&&(f=S.return)&&(yield Y(f.call(S)))}finally{if(d)throw d.error}}for(const y of p.flush())yield yield Y(y)})}function s(){return At(this,arguments,function*(){var c,d,f,m;if(r)throw new vt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let p=!1;try{try{for(var h=!0,_=Nt(i()),S;S=yield Y(_.next()),c=S.done,!c;h=!0){m=S.value,h=!1;const C=m;p||C&&(yield yield Y(JSON.parse(C)))}}catch(C){d={error:C}}finally{try{!h&&!c&&(f=_.return)&&(yield Y(f.call(_)))}finally{if(d)throw d.error}}p=!0}catch(C){if(ea(C))return yield Y(void 0);throw C}finally{p||n.abort()}})}return new ao(s,n,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],n=[],o=this.iterator(),r=i=>({next:()=>{if(i.length===0){const s=o.next();t.push(s),n.push(s)}return i.shift()}});return[new ao(()=>r(t),this.controller,this.client),new ao(()=>r(n),this.controller,this.client)]}toReadableStream(){const t=this;let n;return Ym({async start(){n=t[Symbol.asyncIterator]()},async pull(o){try{const{value:r,done:i}=await n.next();if(i)return o.close();const s=uu(JSON.stringify(r)+`
`);o.enqueue(s)}catch(r){o.error(r)}},async cancel(){var o;await((o=n.return)===null||o===void 0?void 0:o.call(n))}})}}function _C(e,t){return At(this,arguments,function*(){var o,r,i,s;if(!e.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new vt("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new vt("Attempted to iterate over a response with no body");const u=new TC,c=new ds,d=Km(e.body);try{for(var f=!0,m=Nt(SC(d)),p;p=yield Y(m.next()),o=p.done,!o;f=!0){s=p.value,f=!1;const h=s;for(const _ of c.decode(h)){const S=u.decode(_);S&&(yield yield Y(S))}}}catch(h){r={error:h}}finally{try{!f&&!o&&(i=m.return)&&(yield Y(i.call(m)))}finally{if(r)throw r.error}}for(const h of c.flush()){const _=u.decode(h);_&&(yield yield Y(_))}})}function SC(e){return At(this,arguments,function*(){var n,o,r,i;let s=new Uint8Array;try{for(var u=!0,c=Nt(e),d;d=yield Y(c.next()),n=d.done,!n;u=!0){i=d.value,u=!1;const f=i;if(f==null)continue;const m=f instanceof ArrayBuffer?new Uint8Array(f):typeof f=="string"?uu(f):f;let p=new Uint8Array(s.length+m.length);p.set(s),p.set(m,s.length),s=p;let h;for(;(h=vC(s))!==-1;)yield yield Y(s.slice(0,h)),s=s.slice(h)}}catch(f){o={error:f}}finally{try{!u&&!n&&(r=c.return)&&(yield Y(r.call(c)))}finally{if(o)throw o.error}}s.length>0&&(yield yield Y(s))})}class TC{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(t),t.startsWith(":"))return null;let[n,o,r]=CC(t,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}}function CC(e,t){const n=e.indexOf(t);return n!==-1?[e.substring(0,n),t,e.substring(n+t.length)]:[e,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function xC(e,t){const{response:n,requestLogID:o,retryOfRequestLogID:r,startTime:i}=t,s=await(async()=>{var u;if(t.options.stream)return qe(e).debug("response",n.status,n.url,n.headers,n.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(n,t.controller,e):ao.fromSSEResponse(n,t.controller,e);if(n.status===204)return null;if(t.options.__binaryResponse)return n;const c=n.headers.get("content-type"),d=(u=c==null?void 0:c.split(";")[0])===null||u===void 0?void 0:u.trim();return(d==null?void 0:d.includes("application/json"))||(d==null?void 0:d.endsWith("+json"))?await n.json():await n.text()})();return qe(e).debug(`[${o}] response parsed`,Mn({retryOfRequestLogID:r,url:n.url,status:n.status,body:s,durationMs:Date.now()-i})),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cu extends Promise{constructor(t,n,o=xC){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=o,this.client=t}_thenUnwrap(t){return new cu(this.client,this.responsePromise,async(n,o)=>t(await this.parseResponse(n,o),o))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(this.client,t))),this.parsedPromise}then(t,n){return this.parse().then(t,n)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nh=Symbol("brand.privateNullableHeaders");function*IC(e){if(!e)return;if(nh in e){const{values:o,nulls:r}=e;yield*o.entries();for(const i of r)yield[i,null];return}let t=!1,n;e instanceof Headers?n=e.entries():bd(e)?n=e:(t=!0,n=Object.entries(e??{}));for(let o of n){const r=o[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const i=bd(o[1])?o[1]:[o[1]];let s=!1;for(const u of i)u!==void 0&&(t&&!s&&(s=!0,yield[r,null]),yield[r,u])}}const Oo=e=>{const t=new Headers,n=new Set;for(const o of e){const r=new Set;for(const[i,s]of IC(o)){const u=i.toLowerCase();r.has(u)||(t.delete(i),r.add(u)),s===null?(t.delete(i),n.add(u)):(t.append(i,s),n.delete(u))}}return{[nh]:!0,values:t,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ks=e=>{var t,n,o,r,i,s;if(typeof globalThis.process<"u")return(o=(n=(t=Wy)===null||t===void 0?void 0:t[e])===null||n===void 0?void 0:n.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(s=(i=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||i===void 0?void 0:i.call(r,e))===null||s===void 0?void 0:s.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var oh;class fs{constructor(t){var n,o,r,i,s,u,c,{baseURL:d=Ks("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:f=(n=Ks("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:m="v1beta"}=t,p=Oi(t,["baseURL","apiKey","apiVersion"]);const h=Object.assign(Object.assign({apiKey:f,apiVersion:m},p),{baseURL:d||"https://generativelanguage.googleapis.com"});this.baseURL=h.baseURL,this.timeout=(o=h.timeout)!==null&&o!==void 0?o:fs.DEFAULT_TIMEOUT,this.logger=(r=h.logger)!==null&&r!==void 0?r:console;const _="warn";this.logLevel=_,this.logLevel=(s=(i=Kd(h.logLevel,"ClientOptions.logLevel",this))!==null&&i!==void 0?i:Kd(Ks("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&s!==void 0?s:_,this.fetchOptions=h.fetchOptions,this.maxRetries=(u=h.maxRetries)!==null&&u!==void 0?u:2,this.fetch=(c=h.fetch)!==null&&c!==void 0?c:iC(),this.encoder=aC,this._options=h,this.apiKey=f,this.apiVersion=m,this.clientAdapter=h.clientAdapter}withOptions(t){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),t))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:n}){if(!(t.has("authorization")||t.has("x-goog-api-key"))&&!(this.apiKey&&t.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(t){const n=Oo([t.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Oo([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Oo([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(t){return Object.entries(t).filter(([n,o])=>typeof o<"u").map(([n,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(n)}=`;throw new vt(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Yn}`}defaultIdempotencyKey(){return`stainless-node-retry-${zT()}`}makeStatusError(t,n,o,r){return Je.generate(t,n,o,r)}buildURL(t,n,o){const r=!this.baseURLOverridden()&&o||this.baseURL,i=WT(t)?new URL(t):new URL(r+(r.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),s=this.defaultQuery();return QT(s)||(n=Object.assign(Object.assign({},s),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(i.search=this.stringifyQuery(n)),i.toString()}async prepareOptions(t){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!t.path.startsWith(`/${this.apiVersion}/projects/`)){const n=t.path.slice(this.apiVersion.length+1);t.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(t,{url:n,options:o}){}get(t,n){return this.methodRequest("get",t,n)}post(t,n){return this.methodRequest("post",t,n)}patch(t,n){return this.methodRequest("patch",t,n)}put(t,n){return this.methodRequest("put",t,n)}delete(t,n){return this.methodRequest("delete",t,n)}methodRequest(t,n,o){return this.request(Promise.resolve(o).then(r=>Object.assign({method:t,path:n},r)))}request(t,n=null){return new cu(this,this.makeRequest(t,n,void 0))}async makeRequest(t,n,o){var r,i,s;const u=await t,c=(r=u.maxRetries)!==null&&r!==void 0?r:this.maxRetries;n==null&&(n=c),await this.prepareOptions(u);const{req:d,url:f,timeout:m}=await this.buildRequest(u,{retryCount:c-n});await this.prepareRequest(d,{url:f,options:u});const p="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),h=o===void 0?"":`, retryOf: ${o}`,_=Date.now();if(qe(this).debug(`[${p}] sending request`,Mn({retryOfRequestLogID:o,method:u.method,url:f,options:u,headers:d.headers})),!((i=u.signal)===null||i===void 0)&&i.aborted)throw new na;const S=new AbortController,C=await this.fetchWithTimeout(f,d,m,S).catch(ta),y=Date.now();if(C instanceof globalThis.Error){const E=`retrying, ${n} attempts remaining`;if(!((s=u.signal)===null||s===void 0)&&s.aborted)throw new na;const x=ea(C)||/timed? ?out/i.test(String(C)+("cause"in C?String(C.cause):""));if(n)return qe(this).info(`[${p}] connection ${x?"timed out":"failed"} - ${E}`),qe(this).debug(`[${p}] connection ${x?"timed out":"failed"} (${E})`,Mn({retryOfRequestLogID:o,url:f,durationMs:y-_,message:C.message})),this.retryRequest(u,n,o??p);throw qe(this).info(`[${p}] connection ${x?"timed out":"failed"} - error; no more retries left`),qe(this).debug(`[${p}] connection ${x?"timed out":"failed"} (error; no more retries left)`,Mn({retryOfRequestLogID:o,url:f,durationMs:y-_,message:C.message})),x?new Hm:new cs({cause:C})}const v=`[${p}${h}] ${d.method} ${f} ${C.ok?"succeeded":"failed"} with status ${C.status} in ${y-_}ms`;if(!C.ok){const E=await this.shouldRetry(C);if(n&&E){const A=`retrying, ${n} attempts remaining`;return await lC(C.body),qe(this).info(`${v} - ${A}`),qe(this).debug(`[${p}] response error (${A})`,Mn({retryOfRequestLogID:o,url:C.url,status:C.status,headers:C.headers,durationMs:y-_})),this.retryRequest(u,n,o??p,C.headers)}const x=E?"error; no more retries left":"error; not retryable";qe(this).info(`${v} - ${x}`);const T=await C.text().catch(A=>ta(A).message),P=jT(T),D=P?void 0:T;throw qe(this).debug(`[${p}] response error (${x})`,Mn({retryOfRequestLogID:o,url:C.url,status:C.status,headers:C.headers,message:D,durationMs:Date.now()-_})),this.makeStatusError(C.status,P,D,C.headers)}return qe(this).info(v),qe(this).debug(`[${p}] response start`,Mn({retryOfRequestLogID:o,url:C.url,status:C.status,headers:C.headers,durationMs:y-_})),{response:C,options:u,controller:S,requestLogID:p,retryOfRequestLogID:o,startTime:_}}async fetchWithTimeout(t,n,o,r){const i=n||{},{signal:s,method:u}=i,c=Oi(i,["signal","method"]);s&&s.addEventListener("abort",()=>r.abort());const d=setTimeout(()=>r.abort(),o),f=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,m=Object.assign(Object.assign(Object.assign({signal:r.signal},f?{duplex:"half"}:{}),{method:"GET"}),c);u&&(m.method=u.toUpperCase());try{return await this.fetch.call(void 0,t,m)}finally{clearTimeout(d)}}async shouldRetry(t){const n=t.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,n,o,r){var i;let s;const u=r==null?void 0:r.get("retry-after-ms");if(u){const d=parseFloat(u);Number.isNaN(d)||(s=d)}const c=r==null?void 0:r.get("retry-after");if(c&&!s){const d=parseFloat(c);Number.isNaN(d)?s=Date.parse(c)-Date.now():s=d*1e3}if(!(s&&0<=s&&s<60*1e3)){const d=(i=t.maxRetries)!==null&&i!==void 0?i:this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,d)}return await eC(s),this.makeRequest(t,n-1,o)}calculateDefaultRetryTimeoutMillis(t,n){const i=n-t,s=Math.min(.5*Math.pow(2,i),8),u=1-Math.random()*.25;return s*u*1e3}async buildRequest(t,{retryCount:n=0}={}){var o,r,i;const s=Object.assign({},t),{method:u,path:c,query:d,defaultBaseURL:f}=s,m=this.buildURL(c,d,f);"timeout"in s&&ZT("timeout",s.timeout),s.timeout=(o=s.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:p,body:h}=this.buildBody({options:s}),_=await this.buildHeaders({options:t,method:u,bodyHeaders:p,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:u,headers:_},s.signal&&{signal:s.signal}),globalThis.ReadableStream&&h instanceof globalThis.ReadableStream&&{duplex:"half"}),h&&{body:h}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(i=s.fetchOptions)!==null&&i!==void 0?i:{}),url:m,timeout:s.timeout}}async buildHeaders({options:t,method:n,bodyHeaders:o,retryCount:r}){let i={};this.idempotencyHeader&&n!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=t.idempotencyKey);const s=await this.authHeaders(t);let u=Oo([i,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),rC()),this._options.defaultHeaders,o,t.headers,s]);return this.validateHeaders(u),u.values}buildBody({options:{body:t,headers:n}}){if(!t)return{bodyHeaders:void 0,body:void 0};const o=Oo([n]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&o.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:sC(t)}:this.encoder({body:t,headers:o})}}fs.DEFAULT_TIMEOUT=6e4;class Pe extends fs{constructor(){super(...arguments),this.interactions=new th(this)}}oh=Pe;Pe.GeminiNextGenAPIClient=oh;Pe.GeminiNextGenAPIClientError=vt;Pe.APIError=Je;Pe.APIConnectionError=cs;Pe.APIConnectionTimeoutError=Hm;Pe.APIUserAbortError=na;Pe.NotFoundError=qm;Pe.ConflictError=bm;Pe.RateLimitError=Jm;Pe.BadRequestError=Bm;Pe.AuthenticationError=$m;Pe.InternalServerError=Wm;Pe.PermissionDeniedError=Om;Pe.UnprocessableEntityError=zm;Pe.toFile=pC;Pe.Interactions=th;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wC(e,t){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],o),n}function AC(e,t){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],o),n}function NC(e,t){const n={},o=l(e,["sdkHttpResponse"]);return o!=null&&a(n,["sdkHttpResponse"],o),n}function RC(e,t){const n={},o=l(e,["sdkHttpResponse"]);return o!=null&&a(n,["sdkHttpResponse"],o),n}function PC(e,t,n){const o={};if(l(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=l(e,["tunedModelDisplayName"]);if(t!==void 0&&r!=null&&a(t,["displayName"],r),l(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=l(e,["epochCount"]);t!==void 0&&i!=null&&a(t,["tuningTask","hyperparameters","epochCount"],i);const s=l(e,["learningRateMultiplier"]);if(s!=null&&a(o,["tuningTask","hyperparameters","learningRateMultiplier"],s),l(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(l(e,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(l(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(l(e,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(l(e,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const u=l(e,["batchSize"]);t!==void 0&&u!=null&&a(t,["tuningTask","hyperparameters","batchSize"],u);const c=l(e,["learningRate"]);if(t!==void 0&&c!=null&&a(t,["tuningTask","hyperparameters","learningRate"],c),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(l(e,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(l(e,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(l(e,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(l(e,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(l(e,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");return o}function MC(e,t,n){const o={};let r=l(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const T=l(e,["validationDataset"]);t!==void 0&&T!=null&&a(t,["supervisedTuningSpec"],Qs(T))}else if(r==="PREFERENCE_TUNING"){const T=l(e,["validationDataset"]);t!==void 0&&T!=null&&a(t,["preferenceOptimizationSpec"],Qs(T))}else if(r==="DISTILLATION"){const T=l(e,["validationDataset"]);t!==void 0&&T!=null&&a(t,["distillationSpec"],Qs(T))}const i=l(e,["tunedModelDisplayName"]);t!==void 0&&i!=null&&a(t,["tunedModelDisplayName"],i);const s=l(e,["description"]);t!==void 0&&s!=null&&a(t,["description"],s);let u=l(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const T=l(e,["epochCount"]);t!==void 0&&T!=null&&a(t,["supervisedTuningSpec","hyperParameters","epochCount"],T)}else if(u==="PREFERENCE_TUNING"){const T=l(e,["epochCount"]);t!==void 0&&T!=null&&a(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],T)}else if(u==="DISTILLATION"){const T=l(e,["epochCount"]);t!==void 0&&T!=null&&a(t,["distillationSpec","hyperParameters","epochCount"],T)}let c=l(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const T=l(e,["learningRateMultiplier"]);t!==void 0&&T!=null&&a(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],T)}else if(c==="PREFERENCE_TUNING"){const T=l(e,["learningRateMultiplier"]);t!==void 0&&T!=null&&a(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],T)}else if(c==="DISTILLATION"){const T=l(e,["learningRateMultiplier"]);t!==void 0&&T!=null&&a(t,["distillationSpec","hyperParameters","learningRateMultiplier"],T)}let d=l(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const T=l(e,["exportLastCheckpointOnly"]);t!==void 0&&T!=null&&a(t,["supervisedTuningSpec","exportLastCheckpointOnly"],T)}else if(d==="PREFERENCE_TUNING"){const T=l(e,["exportLastCheckpointOnly"]);t!==void 0&&T!=null&&a(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],T)}else if(d==="DISTILLATION"){const T=l(e,["exportLastCheckpointOnly"]);t!==void 0&&T!=null&&a(t,["distillationSpec","exportLastCheckpointOnly"],T)}let f=l(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const T=l(e,["adapterSize"]);t!==void 0&&T!=null&&a(t,["supervisedTuningSpec","hyperParameters","adapterSize"],T)}else if(f==="PREFERENCE_TUNING"){const T=l(e,["adapterSize"]);t!==void 0&&T!=null&&a(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],T)}else if(f==="DISTILLATION"){const T=l(e,["adapterSize"]);t!==void 0&&T!=null&&a(t,["distillationSpec","hyperParameters","adapterSize"],T)}let m=l(n,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const T=l(e,["tuningMode"]);t!==void 0&&T!=null&&a(t,["supervisedTuningSpec","tuningMode"],T)}const p=l(e,["customBaseModel"]);t!==void 0&&p!=null&&a(t,["customBaseModel"],p);let h=l(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const T=l(e,["batchSize"]);t!==void 0&&T!=null&&a(t,["supervisedTuningSpec","hyperParameters","batchSize"],T)}let _=l(n,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const T=l(e,["learningRate"]);t!==void 0&&T!=null&&a(t,["supervisedTuningSpec","hyperParameters","learningRate"],T)}const S=l(e,["labels"]);t!==void 0&&S!=null&&a(t,["labels"],S);const C=l(e,["beta"]);t!==void 0&&C!=null&&a(t,["preferenceOptimizationSpec","hyperParameters","beta"],C);const y=l(e,["baseTeacherModel"]);t!==void 0&&y!=null&&a(t,["distillationSpec","baseTeacherModel"],y);const v=l(e,["tunedTeacherModelSource"]);t!==void 0&&v!=null&&a(t,["distillationSpec","tunedTeacherModelSource"],v);const E=l(e,["sftLossWeightMultiplier"]);t!==void 0&&E!=null&&a(t,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],E);const x=l(e,["outputUri"]);return t!==void 0&&x!=null&&a(t,["outputUri"],x),o}function kC(e,t){const n={},o=l(e,["baseModel"]);o!=null&&a(n,["baseModel"],o);const r=l(e,["preTunedModel"]);r!=null&&a(n,["preTunedModel"],r);const i=l(e,["trainingDataset"]);i!=null&&qC(i);const s=l(e,["config"]);return s!=null&&PC(s,n),n}function DC(e,t){const n={},o=l(e,["baseModel"]);o!=null&&a(n,["baseModel"],o);const r=l(e,["preTunedModel"]);r!=null&&a(n,["preTunedModel"],r);const i=l(e,["trainingDataset"]);i!=null&&bC(i,n,t);const s=l(e,["config"]);return s!=null&&MC(s,n,t),n}function LC(e,t){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],o),n}function UC(e,t){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],o),n}function FC(e,t,n){const o={},r=l(e,["pageSize"]);t!==void 0&&r!=null&&a(t,["_query","pageSize"],r);const i=l(e,["pageToken"]);t!==void 0&&i!=null&&a(t,["_query","pageToken"],i);const s=l(e,["filter"]);return t!==void 0&&s!=null&&a(t,["_query","filter"],s),o}function GC(e,t,n){const o={},r=l(e,["pageSize"]);t!==void 0&&r!=null&&a(t,["_query","pageSize"],r);const i=l(e,["pageToken"]);t!==void 0&&i!=null&&a(t,["_query","pageToken"],i);const s=l(e,["filter"]);return t!==void 0&&s!=null&&a(t,["_query","filter"],s),o}function VC(e,t){const n={},o=l(e,["config"]);return o!=null&&FC(o,n),n}function HC(e,t){const n={},o=l(e,["config"]);return o!=null&&GC(o,n),n}function BC(e,t){const n={},o=l(e,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const r=l(e,["nextPageToken"]);r!=null&&a(n,["nextPageToken"],r);const i=l(e,["tunedModels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(u=>rh(u))),a(n,["tuningJobs"],s)}return n}function $C(e,t){const n={},o=l(e,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const r=l(e,["nextPageToken"]);r!=null&&a(n,["nextPageToken"],r);const i=l(e,["tuningJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(u=>ia(u))),a(n,["tuningJobs"],s)}return n}function OC(e,t){const n={},o=l(e,["name"]);o!=null&&a(n,["model"],o);const r=l(e,["name"]);return r!=null&&a(n,["endpoint"],r),n}function qC(e,t){const n={};if(l(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(e,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=l(e,["examples"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>i)),a(n,["examples","examples"],r)}return n}function bC(e,t,n){const o={};let r=l(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const s=l(e,["gcsUri"]);t!==void 0&&s!=null&&a(t,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(r==="PREFERENCE_TUNING"){const s=l(e,["gcsUri"]);t!==void 0&&s!=null&&a(t,["preferenceOptimizationSpec","trainingDatasetUri"],s)}else if(r==="DISTILLATION"){const s=l(e,["gcsUri"]);t!==void 0&&s!=null&&a(t,["distillationSpec","promptDatasetUri"],s)}let i=l(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const s=l(e,["vertexDatasetResource"]);t!==void 0&&s!=null&&a(t,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(i==="PREFERENCE_TUNING"){const s=l(e,["vertexDatasetResource"]);t!==void 0&&s!=null&&a(t,["preferenceOptimizationSpec","trainingDatasetUri"],s)}else if(i==="DISTILLATION"){const s=l(e,["vertexDatasetResource"]);t!==void 0&&s!=null&&a(t,["distillationSpec","promptDatasetUri"],s)}if(l(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function rh(e,t){const n={},o=l(e,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const r=l(e,["name"]);r!=null&&a(n,["name"],r);const i=l(e,["state"]);i!=null&&a(n,["state"],_m(i));const s=l(e,["createTime"]);s!=null&&a(n,["createTime"],s);const u=l(e,["tuningTask","startTime"]);u!=null&&a(n,["startTime"],u);const c=l(e,["tuningTask","completeTime"]);c!=null&&a(n,["endTime"],c);const d=l(e,["updateTime"]);d!=null&&a(n,["updateTime"],d);const f=l(e,["description"]);f!=null&&a(n,["description"],f);const m=l(e,["baseModel"]);m!=null&&a(n,["baseModel"],m);const p=l(e,["_self"]);return p!=null&&a(n,["tunedModel"],OC(p)),n}function ia(e,t){const n={},o=l(e,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const r=l(e,["name"]);r!=null&&a(n,["name"],r);const i=l(e,["state"]);i!=null&&a(n,["state"],_m(i));const s=l(e,["createTime"]);s!=null&&a(n,["createTime"],s);const u=l(e,["startTime"]);u!=null&&a(n,["startTime"],u);const c=l(e,["endTime"]);c!=null&&a(n,["endTime"],c);const d=l(e,["updateTime"]);d!=null&&a(n,["updateTime"],d);const f=l(e,["error"]);f!=null&&a(n,["error"],f);const m=l(e,["description"]);m!=null&&a(n,["description"],m);const p=l(e,["baseModel"]);p!=null&&a(n,["baseModel"],p);const h=l(e,["tunedModel"]);h!=null&&a(n,["tunedModel"],h);const _=l(e,["preTunedModel"]);_!=null&&a(n,["preTunedModel"],_);const S=l(e,["supervisedTuningSpec"]);S!=null&&a(n,["supervisedTuningSpec"],S);const C=l(e,["preferenceOptimizationSpec"]);C!=null&&a(n,["preferenceOptimizationSpec"],C);const y=l(e,["distillationSpec"]);y!=null&&a(n,["distillationSpec"],y);const v=l(e,["tuningDataStats"]);v!=null&&a(n,["tuningDataStats"],v);const E=l(e,["encryptionSpec"]);E!=null&&a(n,["encryptionSpec"],E);const x=l(e,["partnerModelTuningSpec"]);x!=null&&a(n,["partnerModelTuningSpec"],x);const T=l(e,["customBaseModel"]);T!=null&&a(n,["customBaseModel"],T);const P=l(e,["experiment"]);P!=null&&a(n,["experiment"],P);const D=l(e,["labels"]);D!=null&&a(n,["labels"],D);const L=l(e,["outputUri"]);L!=null&&a(n,["outputUri"],L);const A=l(e,["pipelineJob"]);A!=null&&a(n,["pipelineJob"],A);const F=l(e,["serviceAccount"]);F!=null&&a(n,["serviceAccount"],F);const J=l(e,["tunedModelDisplayName"]);J!=null&&a(n,["tunedModelDisplayName"],J);const oe=l(e,["veoTuningSpec"]);return oe!=null&&a(n,["veoTuningSpec"],oe),n}function zC(e,t){const n={},o=l(e,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const r=l(e,["name"]);r!=null&&a(n,["name"],r);const i=l(e,["metadata"]);i!=null&&a(n,["metadata"],i);const s=l(e,["done"]);s!=null&&a(n,["done"],s);const u=l(e,["error"]);return u!=null&&a(n,["error"],u),n}function Qs(e,t){const n={},o=l(e,["gcsUri"]);o!=null&&a(n,["validationDatasetUri"],o);const r=l(e,["vertexDatasetResource"]);return r!=null&&a(n,["validationDatasetUri"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class JC extends Xt{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new bn(Kt.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var o;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((o=n.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const i=Object.assign(Object.assign({},n),{preTunedModel:r});return i.baseModel=void 0,await this.tuneInternal(i)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),i=await this.tuneMldevInternal(r);let s="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?s=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(s=i.name.split("/operations/")[0]),{name:s,state:Jl.JOB_STATE_QUEUED}}}}async getInternal(t){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=UC(t);return u=B("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>ia(f))}else{const d=LC(t);return u=B("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>rh(f))}}async listInternal(t){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=HC(t);return u=B("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const m=$C(f),p=new Cd;return Object.assign(p,m),p})}else{const d=VC(t);return u=B("tunedModels",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const m=BC(f),p=new Cd;return Object.assign(p,m),p})}}async cancel(t){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=AC(t);return u=B("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const m=RC(f),p=new xd;return Object.assign(p,m),p})}else{const d=wC(t);return u=B("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const m=NC(f),p=new xd;return Object.assign(p,m),p})}}async tuneInternal(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const u=DC(t,t);return i=B("tuningJobs",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>ia(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=kC(t);return i=B("tunedModels",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>zC(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class WC{async download(t,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const YC=1024*1024*8,KC=3,QC=1e3,XC=2,bi="x-goog-upload-status";async function ZC(e,t,n){var o;const r=await ih(e,t,n),i=await(r==null?void 0:r.json());if(((o=r==null?void 0:r.headers)===null||o===void 0?void 0:o[bi])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return i.file}async function jC(e,t,n){var o;const r=await ih(e,t,n),i=await(r==null?void 0:r.json());if(((o=r==null?void 0:r.headers)===null||o===void 0?void 0:o[bi])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const s=mm(i),u=new ou;return Object.assign(u,s),u}async function ih(e,t,n){var o,r;let i=0,s=0,u=new Yl(new Response),c="upload";for(i=e.size;s<i;){const d=Math.min(YC,i-s),f=e.slice(s,s+d);s+d>=i&&(c+=", finalize");let m=0,p=QC;for(;m<KC&&(u=await n.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(s),"Content-Length":String(d)}}}),!(!((o=u==null?void 0:u.headers)===null||o===void 0)&&o[bi]));)m++,await tx(p),p=p*XC;if(s+=d,((r=u==null?void 0:u.headers)===null||r===void 0?void 0:r[bi])!=="active")break;if(i<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return u}async function ex(e){return{size:e.size,type:e.type}}function tx(e){return new Promise(t=>setTimeout(t,e))}class nx{async upload(t,n,o){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await ZC(t,n,o)}async uploadToFileSearchStore(t,n,o){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await jC(t,n,o)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await ex(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ox{create(t,n,o){return new rx(t,n,o)}}class rx{constructor(t,n,o){this.url=t,this.headers=n,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Xd="x-goog-api-key";class ix{constructor(t){this.apiKey=t}async addAuthHeaders(t,n){if(t.get(Xd)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(Xd,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sx="gl-node/";class lx{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const t=this.httpOptions;t!=null&&t.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new Pe({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:t==null?void 0:t.timeout});return this._interactions=n.interactions,this._interactions}constructor(t){var n;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=t.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=t.apiKey;const o=Xy(t.httpOptions,t.vertexai,void 0,void 0);o&&(t.httpOptions?t.httpOptions.baseUrl=o:t.httpOptions={baseUrl:o}),this.apiVersion=t.apiVersion,this.httpOptions=t.httpOptions;const r=new ix(this.apiKey);this.apiClient=new eT({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:sx+"web",uploader:new nx,downloader:new WC}),this.models=new ET(this.apiClient),this.live=new pT(this.apiClient,r,new ox),this.batches=new A0(this.apiClient),this.chats=new aE(this.models,this.apiClient),this.caches=new iE(this.apiClient),this.files=new _E(this.apiClient),this.operations=new _T(this.apiClient),this.authTokens=new FT(this.apiClient),this.tunings=new JC(this.apiClient),this.fileSearchStores=new bT(this.apiClient)}}const ax=new lx({apiKey:"AIzaSyD5vtCLrBJjhRI-IXk6sZYMQbac-g5UdXM"}),ux="gemini-3-flash-preview",cx={type:ot.OBJECT,properties:{action:{type:ot.STRING,enum:["BID","CHALLENGE"],description:" 'CHALLENGE' () 'BID'"},quantity:{type:ot.INTEGER,description:" BID "},face:{type:ot.INTEGER,description:" (1-6) BID "},reasoning:{type:ot.STRING,description:" ()"}},required:["action","reasoning"]},dx=async(e,t,n,o,r)=>{const i=e.dice.join(", "),s=o.map(d=>`${d.quantity}${d.face}`).join(" -> "),u=t?`${t.quantity}  ${t.face}`:" ()",c=`
     (Liar's Dice / Perudo)
    
    -  ()${n}
    -  ()[${i}]
    -  ()${u}
    - ${s}
    
    
    1. '1'  (Aces)  (Wild) 1 
    2.  (BID)
    3.  (CHALLENGE) ( < )
    
     (${r==="hard"?"":""}) 
    ${r==="hard"?" (Bluff)":""}
    
     JSON 
    **reasoning  (Traditional Chinese) **
  `;try{const f=(await ax.models.generateContent({model:ux,contents:"",config:{systemInstruction:c,responseMimeType:"application/json",responseSchema:cx,temperature:r==="hard"?.9:.5}})).text;if(!f)throw new Error("No response from AI");return JSON.parse(f)}catch(d){return console.error("Gemini AI Error:",d),t?{action:"CHALLENGE",reasoning:""}:{action:"BID",quantity:1,face:2,reasoning:""}}},jr=({value:e,size:t="md",hidden:n=!1})=>{const o={sm:"w-8 h-8 text-lg",md:"w-12 h-12 text-2xl",lg:"w-16 h-16 text-4xl"};return n?g.jsx("div",{className:`${o[t]} bg-slate-700 rounded-lg shadow-md flex items-center justify-center border-2 border-slate-600`,children:g.jsx("span",{className:"text-slate-500 font-bold",children:"?"})}):g.jsxs("div",{className:`${o[t]} bg-white rounded-lg shadow-inner shadow-gray-400 flex relative overflow-hidden border border-gray-300`,children:[g.jsx("div",{className:"grid grid-cols-3 grid-rows-3 w-full h-full p-1 gap-0.5",children:[...Array(9)].map((r,i)=>{const s=fx(e,i);return g.jsx("div",{className:"flex justify-center items-center",children:s&&g.jsx("div",{className:`rounded-full bg-black ${t==="sm"?"w-1.5 h-1.5":"w-2.5 h-2.5"}`})},i)})}),e===1&&g.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none opacity-20 text-red-500 font-bold",children:""})]})};function fx(e,t){var o;return((o={1:[4],2:[0,8],3:[0,4,8],4:[0,2,6,8],5:[0,2,4,6,8],6:[0,2,3,5,6,8]}[e])==null?void 0:o.includes(t))||!1}const px=({settings:e,onLeave:t})=>{const[n,o]=H.useState(e),[r,i]=H.useState([]),[s,u]=H.useState(0),[c,d]=H.useState(null),[f,m]=H.useState([]),[p,h]=H.useState([]),[_,S]=H.useState(j.LOBBY),[C,y]=H.useState(0),[v,E]=H.useState(null),[x,T]=H.useState(null),[P,D]=H.useState(null),L=H.useRef({players:[],currentPlayerIndex:0,currentBid:null,bidHistory:[],logs:[],phase:j.LOBBY,totalDiceInGame:0,roundWinner:null,finalLoser:null,challengeResult:null,settings:e,boardSets:[],tilePoolCount:0});H.useEffect(()=>{L.current={players:r,currentPlayerIndex:s,currentBid:c,bidHistory:f,logs:p,phase:_,totalDiceInGame:C,roundWinner:v,finalLoser:x,challengeResult:P,settings:n,boardSets:[],tilePoolCount:0}},[r,s,c,f,p,_,C,v,x,P,n]);const[A,F]=H.useState(1),[J,oe]=H.useState(2),[re,Z]=H.useState(!1),[ve,ut]=H.useState(e.isHost?"host":"guest-temp"),[Et,V]=H.useState(!1),[z,K]=H.useState(!1),[se,pe]=H.useState({}),[$e,xe]=H.useState(""),Gt=H.useRef(null),Oe=H.useRef(null),Le=H.useRef([]),ct=H.useRef(null);H.useEffect(()=>{if(e.isHost){const w={id:"host",name:e.playerName,isAi:!1,dice:[],diceCount:e.gameMode==="hearts"?Pn:e.startingDice,health:e.maxHealth,maxHealth:e.maxHealth,isEliminated:!1,avatarSeed:0,isHost:!0,hand:[],hasInitialMeld:!1};i([w]),ut("host"),e.mode==="single"?Vt(w):In()}else wn();return()=>{var w;(w=Oe.current)==null||w.destroy()}},[]);const In=()=>{const w=`gemini-liar-${e.roomId}`,M=new Peer(w);Oe.current=M,M.on("open",()=>{An(`${e.roomId}...`)}),M.on("connection",G=>{G.on("open",()=>{Le.current.push(G),setTimeout(()=>Ke(),500)}),G.on("data",b=>{ps(b)}),G.on("close",()=>{An("","error")})}),M.on("error",G=>{G.type==="unavailable-id"&&An(" ID ","error")})},wn=()=>{const w=sessionStorage.getItem("gemini-liar-guest-id");let M;try{M=w?new Peer(w):new Peer}catch{M=new Peer}Oe.current=M,M.on("open",G=>{ut(G),sessionStorage.setItem("gemini-liar-guest-id",G),An("...");const b=`gemini-liar-${e.roomId}`,Q=M.connect(b);Q.on("open",()=>{ct.current=Q,An("");const X={id:G,name:e.playerName,isAi:!1,dice:[],diceCount:e.gameMode==="hearts"?Pn:e.startingDice,health:e.maxHealth,maxHealth:e.maxHealth,isEliminated:!1,avatarSeed:Math.floor(Math.random()*100),hand:[],hasInitialMeld:!1};Q.send({type:"JOIN",player:X})}),Q.on("data",X=>{X.type==="SYNC"?jt(X.state):X.type==="EMOTE"&&Jn(X.playerId,X.emoji)})})},ps=w=>{const M=L.current;if(M.settings.isHost)switch(w.type){case"JOIN":const G=M.players.find(b=>b.id===w.player.id);if(M.phase!==j.LOBBY&&!G)return;if(G)Ke();else{const b=w.player;b.diceCount=M.settings.gameMode==="hearts"?Pn:M.settings.startingDice,b.health=M.settings.maxHealth,b.maxHealth=M.settings.maxHealth;const Q=[...M.players,b];i(Q);const X={id:Date.now().toString(),message:`${b.name} `,type:"info"};h(I=>[...I,X]),Ke({players:Q,logs:[...M.logs,X]})}break;case"BID":if(!M.players[M.currentPlayerIndex])return;ko(M.players[M.currentPlayerIndex].id,w.quantity,w.face);break;case"CHALLENGE":if(!M.players[M.currentPlayerIndex])return;Ht(M.players[M.currentPlayerIndex].id);break;case"EMOTE":Jn(w.playerId,w.emoji),Le.current.forEach(b=>{b.open&&b.peer!==w.playerId&&b.send({type:"EMOTE",playerId:w.playerId,emoji:w.emoji})});break;case"CHAT":{const b=M.players.find(I=>I.id===w.playerId),Q={id:Date.now().toString(),message:`${(b==null?void 0:b.name)||"Unknown"}: ${w.message}`,type:"chat"},X=[...M.logs,Q];h(X),Ke({logs:X});break}}},Ke=w=>{const M=L.current;if(!M.settings.isHost)return;const b={type:"SYNC",state:{players:M.players,currentPlayerIndex:M.currentPlayerIndex,currentBid:M.currentBid,bidHistory:M.bidHistory,logs:M.logs,phase:M.phase,totalDiceInGame:M.totalDiceInGame,roundWinner:M.roundWinner,finalLoser:M.finalLoser,challengeResult:M.challengeResult,settings:M.settings,...w}};Le.current.forEach(Q=>{Q.open&&Q.send(b)})},jt=w=>{w.players&&i(w.players),w.currentPlayerIndex!==void 0&&u(w.currentPlayerIndex),w.currentBid!==void 0&&d(w.currentBid),w.bidHistory&&m(w.bidHistory),w.logs&&h(w.logs),w.phase&&S(w.phase),w.totalDiceInGame!==void 0&&y(w.totalDiceInGame),w.roundWinner!==void 0&&E(w.roundWinner),w.finalLoser!==void 0&&T(w.finalLoser),w.challengeResult!==void 0&&D(w.challengeResult),w.settings&&o(M=>({...w.settings,isHost:M.isHost,mode:M.mode}))},Vt=w=>{const M=[w],G=e.gameMode==="hearts"?Pn:e.startingDice;for(let b=1;b<e.playerCount;b++)M.push({id:`ai-${b}`,name:`Gemini AI ${b}`,isAi:!0,dice:[],diceCount:G,health:e.maxHealth,maxHealth:e.maxHealth,isEliminated:!1,avatarSeed:b,hand:[],hasInitialMeld:!1});i(M),en(M,0)},ms=()=>{const w=r.filter(X=>!X.isAi);let M=[...w];const G=w.length,b=n.playerCount-G,Q=n.gameMode==="hearts"?Pn:n.startingDice;for(let X=0;X<b;X++)M.push({id:`bot-${X}`,name:`Bot ${X+1}`,isAi:!0,dice:[],diceCount:Q,health:n.maxHealth,maxHealth:n.maxHealth,isEliminated:!1,avatarSeed:50+X,hand:[],hasInitialMeld:!1});i(M),en(M,0)},hs=()=>{if(!n.isHost)return;const w=r.map(G=>({...G,dice:[],diceCount:n.gameMode==="hearts"?Pn:n.startingDice,health:n.maxHealth,isEliminated:!1}));i(w),en(w,0);const M={id:Date.now().toString(),message:"---  ---",type:"info"};h([M]),Ke({players:w,logs:[M]})},zn=()=>{if(!n.isHost)return;const w=r.filter(M=>!M.isAi);i(w),S(j.LOBBY),h([]),Ke({players:w,phase:j.LOBBY,logs:[],roundWinner:null,finalLoser:null})},en=(w,M)=>{const G=w.map(I=>({...I,dice:I.isEliminated?[]:qy(I.diceCount)})),b=G.reduce((I,R)=>I+(R.isEliminated?0:R.diceCount),0);i(G),y(b),d(null),m([]),S(j.PLAYING),D(null),E(null),T(null),F(1),oe(2);let Q=M;for(;G[Q].isEliminated;)Q=(Q+1)%G.length;u(Q);const X={id:Date.now().toString(),message:` ${b} `,type:"info"};h(I=>[...I,X]),Ke({players:G,totalDiceInGame:b,currentBid:null,bidHistory:[],phase:j.PLAYING,challengeResult:null,roundWinner:null,finalLoser:null,currentPlayerIndex:Q,logs:[...p,X]})},gs=w=>{var M;Jn(ve,w),K(!1),n.isHost?Le.current.forEach(G=>{G.open&&G.send({type:"EMOTE",playerId:ve,emoji:w})}):(M=ct.current)==null||M.send({type:"EMOTE",playerId:ve,emoji:w})},Jn=(w,M)=>{pe(G=>({...G,[w]:M})),setTimeout(()=>{pe(G=>{const b={...G};return delete b[w],b})},3e3)},Mo=()=>{var M;if(!$e.trim())return;const w=$e.trim();if(xe(""),n.isHost){const G=r.find(X=>X.id===ve),b={id:Date.now().toString(),message:`${(G==null?void 0:G.name)||"Host"}: ${w}`,type:"chat"},Q=[...p,b];h(Q),Ke({logs:Q})}else(M=ct.current)==null||M.send({type:"CHAT",playerId:ve,message:w})};H.useEffect(()=>{if(!n.isHost)return;const w=r[s];_===j.PLAYING&&(w!=null&&w.isAi)&&!re&&ys(w)},[s,_,r]),H.useEffect(()=>{var w;(w=Gt.current)==null||w.scrollIntoView({behavior:"smooth"})},[p]);const An=(w,M="info")=>{const G={id:Date.now().toString(),message:w,type:M};h(b=>[...b,G])},ys=async w=>{if(Z(!0),await new Promise(G=>setTimeout(G,1500)),Math.random()<.1){const G=fi[Math.floor(Math.random()*fi.length)];Jn(w.id,G),Ke(),Le.current.forEach(b=>b.send({type:"EMOTE",playerId:w.id,emoji:G}))}const M=L.current;try{const G=await dx(w,M.currentBid,M.totalDiceInGame,M.bidHistory,n.difficulty);G.action==="BID"&&G.quantity&&G.face&&Ws(M.currentBid,G.quantity,G.face)?ko(w.id,G.quantity,G.face):Ht(w.id)}catch{Ht(w.id)}finally{Z(!1)}},ko=(w,M,G)=>{var N;if(!n.isHost){(N=ct.current)==null||N.send({type:"BID",quantity:M,face:G});return}const b=L.current,Q={playerId:w,quantity:M,face:G},X=b.players.find(q=>q.id===w),I=[...b.logs,{id:Date.now().toString(),message:`${X==null?void 0:X.name}  ${M}  ${Wr[G]}`,type:"bid"}],R=[...b.bidHistory,Q];let k=(b.currentPlayerIndex+1)%b.players.length;for(;b.players[k].isEliminated;)k=(k+1)%b.players.length;d(Q),m(R),h(I),u(k),Ke({currentBid:Q,bidHistory:R,logs:I,currentPlayerIndex:k}),w==="host"&&M>=A&&(F(M),G>=6?(F(M+1),oe(2)):oe(G+1))},Ht=w=>{var q;if(!n.isHost){(q=ct.current)==null||q.send({type:"CHALLENGE"});return}const M=L.current;if(!M.currentBid)return;const G=by(M.players,M.currentBid.face),b=M.currentBid.playerId,Q=M.players.find($=>$.id===b),X=M.players.find($=>$.id===w);let I="",R="";G>=M.currentBid.quantity?(I=w,R=` ${G}  ${Wr[M.currentBid.face]}${X==null?void 0:X.name} ${n.gameMode==="hearts"?"":""}`):(I=b,R=` ${G}  ${Wr[M.currentBid.face]}${Q==null?void 0:Q.name} ${n.gameMode==="hearts"?"":""}`);const k={loserId:I,actualCount:G,bid:M.currentBid},N=[...M.logs,{id:Date.now().toString(),message:R,type:"challenge"}];S(j.ROUND_END),D(k),h(N),Ke({phase:j.ROUND_END,challengeResult:k,logs:N}),setTimeout(()=>{Nr(I)},4e3)},Nr=w=>{var X;const M=L.current,G=M.players.map(I=>{if(I.id===w)if(M.settings.gameMode==="hearts"){const R=I.health-1;return{...I,health:R,isEliminated:R<=0}}else{const R=I.diceCount-1;return{...I,diceCount:R,isEliminated:R<=0}}return I}),b=G.filter(I=>!I.isEliminated);if(b.length===1){const I=b[0].name,R=((X=G.find(N=>N.id===w))==null?void 0:X.name)||"Unknown";i(G),S(j.GAME_OVER),E(I),T(R);const k={id:Date.now().toString(),message:`${I} `,type:"win"};h(N=>[...N,k]),Ke({players:G,phase:j.GAME_OVER,roundWinner:I,finalLoser:R,logs:[...M.logs,k]});return}let Q=G.findIndex(I=>I.id===w);if(G[Q].isEliminated)do Q=(Q+1)%G.length;while(G[Q].isEliminated);en(G,Q)},vs=()=>{if(!n.roomId)return;const w=eu(n.roomId);navigator.clipboard.writeText(w),V(!0),setTimeout(()=>V(!1),2e3)};if(_===j.LOBBY)return g.jsx("div",{className:"min-h-screen bg-slate-900 flex flex-col items-center justify-center p-4",children:g.jsxs("div",{className:"bg-slate-800 p-8 rounded-2xl shadow-2xl w-full max-w-md border border-slate-700",children:[g.jsx("h2",{className:"text-2xl font-bold mb-6 text-center text-indigo-400",children:n.isHost?"...":""}),n.isHost&&g.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-xl border border-slate-600 mb-6 flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-xs text-slate-400 uppercase tracking-wider font-bold mb-1",children:""}),g.jsx("p",{className:"text-xl font-mono text-indigo-300 tracking-widest",children:n.roomId})]}),g.jsx(me,{variant:"secondary",onClick:vs,className:"text-xs py-1 h-9 min-w-[80px]",children:Et?"":""})]}),g.jsxs("div",{className:"space-y-4 mb-8",children:[r.map(w=>g.jsxs("div",{className:"flex items-center gap-4 bg-slate-700/50 p-3 rounded-lg",children:[g.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold ${cn[w.avatarSeed%cn.length]}`,children:w.name.charAt(0)}),g.jsxs("span",{className:"font-medium",children:[w.name," ",w.id===ve?"()":""]}),w.isHost&&g.jsx("span",{className:"text-xs bg-indigo-500 px-2 py-0.5 rounded text-white ml-auto",children:""})]},w.id)),Array.from({length:Math.max(0,n.playerCount-r.length)}).map((w,M)=>g.jsxs("div",{className:"flex items-center gap-4 border border-dashed border-slate-600 p-3 rounded-lg opacity-50",children:[g.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-700"}),g.jsxs("span",{className:"text-slate-500",children:["... ",n.isHost?"( AI )":""]})]},M))]}),n.isHost?g.jsxs("div",{className:"flex flex-col gap-3",children:[g.jsxs(me,{onClick:ms,className:"w-full py-3 text-lg",children:[" (",r.length,"/",n.playerCount,")"]}),g.jsx("p",{className:"text-xs text-center text-slate-500",children:" AI "})]}):g.jsxs("div",{className:"text-center text-slate-400 animate-pulse",children:["...",g.jsx("br",{}),g.jsx("span",{className:"text-xs text-slate-500 mt-2 block",children:""})]}),g.jsx(me,{variant:"ghost",onClick:t,className:"w-full mt-4",children:""})]})});const _t=r[s],Rr=(_t==null?void 0:_t.id)===ve&&_===j.PLAYING,Se=r.find(w=>w.id===ve),Mt=r.filter(w=>w.id!==ve),Es=!Se&&_===j.PLAYING,_s=w=>!!(_===j.GAME_OVER||_===j.ROUND_END||w.id===ve||Se!=null&&Se.isEliminated);return Es?g.jsx("div",{className:"min-h-screen bg-slate-900 flex flex-col items-center justify-center p-4",children:g.jsxs("div",{className:"bg-slate-800 p-8 rounded-2xl border border-rose-900/50 text-center max-w-md",children:[g.jsx("div",{className:"text-4xl mb-4",children:""}),g.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:""}),g.jsx("p",{className:"text-slate-400 mb-6",children:""}),g.jsx(me,{onClick:t,children:""})]})}):g.jsxs("div",{className:"min-h-screen bg-slate-900 text-white flex flex-col overflow-hidden font-sans",children:[g.jsxs("div",{className:"h-14 border-b border-slate-800 flex items-center justify-between px-4 bg-slate-950",children:[g.jsxs("span",{className:"font-bold text-indigo-400 tracking-wider",children:["GEMINI  ",n.mode==="multiplayer"?`(Room: ${n.roomId})`:""]}),g.jsx(me,{variant:"ghost",onClick:t,className:"text-xs",children:""})]}),g.jsxs("div",{className:"flex-1 relative flex flex-col",children:[g.jsx("div",{className:"flex-1 flex items-start justify-center p-4 gap-4 flex-wrap content-start",children:Mt.map(w=>g.jsxs("div",{className:`
                            relative flex flex-col items-center p-3 rounded-xl transition-all duration-300 min-w-[120px]
                            ${(_t==null?void 0:_t.id)===w.id?"bg-indigo-900/40 ring-2 ring-indigo-500 shadow-[0_0_20px_rgba(99,102,241,0.3)] scale-105":"bg-slate-800/50"}
                            ${w.isEliminated?"opacity-30 grayscale":""}
                        `,children:[g.jsxs("div",{className:`relative w-12 h-12 rounded-full mb-2 flex items-center justify-center font-bold text-lg shadow-lg ${cn[w.avatarSeed%cn.length]}`,children:[w.name.charAt(0),se[w.id]&&g.jsx("div",{className:"absolute -top-10 -right-4 text-4xl animate-bounce-in z-20 filter drop-shadow-lg",children:se[w.id]})]}),g.jsx("div",{className:"text-sm font-semibold mb-1",children:w.name}),n.gameMode==="hearts"?g.jsx("div",{className:"flex gap-0.5 mb-1 h-4",children:Array.from({length:Math.max(0,w.health)}).map((M,G)=>g.jsx("span",{className:"text-xs text-rose-500 drop-shadow-sm",children:""},G))}):null,g.jsxs("div",{className:"flex gap-1 flex-wrap justify-center",children:[w.dice.map((M,G)=>g.jsx(jr,{value:M,hidden:!_s(w),size:"sm"},G)),n.gameMode==="classic"&&Array.from({length:w.diceCount-w.dice.length}).map((M,G)=>g.jsx("div",{className:"w-8 h-8 rounded border border-slate-700 bg-slate-800 opacity-50"},`lost-${G}`))]}),(c==null?void 0:c.playerId)===w.id&&g.jsxs("div",{className:"absolute -bottom-8 left-1/2 -translate-x-1/2 bg-white text-slate-900 text-xs px-2 py-1 rounded-full font-bold shadow whitespace-nowrap z-10",children:[": ",c.quantity,"  ",Wr[c.face]]}),(P==null?void 0:P.loserId)===w.id&&_===j.ROUND_END&&g.jsx("div",{className:"absolute -bottom-8 left-1/2 -translate-x-1/2 bg-rose-500 text-white text-xs px-2 py-1 rounded-full font-bold shadow whitespace-nowrap z-10 animate-bounce",children:"!"})]},w.id))}),g.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none z-0",children:g.jsxs("div",{className:"bg-slate-950/80 backdrop-blur-sm p-6 rounded-3xl border border-slate-700 flex flex-col items-center shadow-2xl",children:[g.jsx("div",{className:"text-xs text-slate-400 uppercase tracking-widest mb-2",children:""}),c?g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("span",{className:"text-5xl font-black text-indigo-400",children:c.quantity}),g.jsx("span",{className:"text-2xl text-slate-500",children:"x"}),g.jsx(jr,{value:c.face,size:"md"})]}):g.jsx("div",{className:"text-slate-500 italic",children:"..."}),g.jsxs("div",{className:"mt-4 text-xs text-slate-500",children:[": ",C]})]})}),g.jsxs("div",{className:"absolute left-4 bottom-24 w-72 flex flex-col gap-2 z-30 hidden md:flex",children:[g.jsx("div",{className:"h-48 overflow-y-auto flex flex-col justify-end text-sm space-y-1 mask-linear-gradient",ref:Gt,children:p.slice(-8).map(w=>g.jsx("div",{className:`
                            px-3 py-1.5 rounded backdrop-blur-md border-l-2 mb-1 shadow-sm break-words
                            ${w.type==="bid"?"bg-black/40 border-indigo-400 text-indigo-100":""}
                            ${w.type==="challenge"?"bg-black/40 border-rose-500 text-rose-100":""}
                            ${w.type==="info"?"bg-black/20 border-slate-500 text-slate-300":""}
                            ${w.type==="error"?"bg-black/40 border-red-500 text-red-300":""}
                            ${w.type==="win"?"bg-black/40 border-yellow-500 text-yellow-300":""}
                            ${w.type==="chat"?"bg-slate-800/80 border-white/50 text-white":""}
                         `,children:w.message},w.id))}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("input",{type:"text",value:$e,onChange:w=>xe(w.target.value),onKeyDown:w=>w.key==="Enter"&&Mo(),placeholder:"...",className:"flex-1 bg-slate-800/80 border border-slate-600 rounded px-3 py-1.5 text-sm focus:outline-none focus:border-indigo-500 placeholder-slate-500"}),g.jsx(me,{variant:"secondary",onClick:Mo,className:"px-3 py-1.5 text-xs h-auto",children:""})]})]}),Se&&g.jsxs("div",{className:`mt-auto bg-slate-900 border-t border-slate-800 p-4 transition-colors duration-500 ${Rr?"bg-indigo-950/30":""} relative`,children:[g.jsxs("div",{className:"absolute top-[-60px] right-4 z-40",children:[z&&g.jsx("div",{className:"absolute bottom-16 right-0 bg-slate-800 p-4 rounded-2xl shadow-2xl border border-slate-600 grid grid-cols-4 gap-4 animate-fade-in-up w-max z-50",children:fi.map(w=>g.jsx("button",{className:"text-3xl hover:scale-125 transition-transform p-2 bg-slate-700/50 rounded-lg hover:bg-slate-600",onClick:()=>gs(w),children:w},w))}),g.jsx("button",{onClick:()=>K(!z),className:"bg-slate-800 hover:bg-slate-700 text-3xl w-12 h-12 rounded-full shadow-lg border border-slate-600 transition-colors flex items-center justify-center",children:""})]}),g.jsxs("div",{className:"max-w-4xl mx-auto flex flex-col md:flex-row items-center gap-6",children:[g.jsxs("div",{className:"flex flex-col items-center",children:[g.jsxs("div",{className:"relative",children:[se[Se.id]&&g.jsx("div",{className:"absolute -top-12 left-1/2 -translate-x-1/2 text-4xl animate-bounce-in z-20",children:se[Se.id]}),g.jsx("div",{className:"flex gap-2 mb-2",children:Se.dice.map((w,M)=>g.jsx(jr,{value:w,size:"md"},M))})]}),g.jsxs("div",{className:"text-xs font-bold text-slate-500 uppercase flex items-center gap-2",children:[" (",Se.name,")",n.gameMode==="hearts"&&g.jsx("div",{className:"flex gap-0.5 ml-2",children:Array.from({length:Math.max(0,Se.health)}).map((w,M)=>g.jsx("span",{className:"text-sm text-rose-500 drop-shadow-sm",children:""},M))})]})]}),g.jsx("div",{className:"flex-1 w-full flex flex-col gap-3",children:Rr?g.jsxs("div",{className:"flex flex-col gap-3 animate-fade-in-up",children:[g.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-4 bg-slate-800 p-3 rounded-xl border border-slate-700",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{className:"w-8 h-8 rounded bg-slate-700 hover:bg-slate-600 flex items-center justify-center font-bold",onClick:()=>F(Math.max(1,A-1)),children:"-"}),g.jsx("div",{className:"w-12 text-center font-mono text-xl",children:A}),g.jsx("button",{className:"w-8 h-8 rounded bg-slate-700 hover:bg-slate-600 flex items-center justify-center font-bold",onClick:()=>F(A+1),children:"+"})]}),g.jsx("span",{className:"text-slate-500",children:""}),g.jsx("div",{className:"flex gap-1",children:Vy.map(w=>g.jsx("button",{onClick:()=>oe(w),className:`
                                                        w-10 h-10 rounded-lg flex items-center justify-center transition-all
                                                        ${J===w?"bg-indigo-600 ring-2 ring-indigo-400 scale-110":"bg-slate-700 hover:bg-slate-600 opacity-70"}
                                                    `,children:g.jsx(jr,{value:w,size:"sm"})},w))})]}),g.jsxs("div",{className:"flex gap-4 justify-center",children:[c&&g.jsx(me,{variant:"danger",onClick:()=>Ht(Se.id),className:"flex-1 max-w-[150px]",children:"()"}),g.jsx(me,{variant:"primary",onClick:()=>{Ws(c,A,J)?ko(Se.id,A,J):alert("")},disabled:!Ws(c,A,J),className:"flex-1 max-w-[200px]",children:" (Bid)"})]})]}):g.jsx("div",{className:"flex items-center justify-center h-full",children:Se.isEliminated?g.jsx("div",{className:"text-rose-400 font-bold animate-pulse",children:" ()"}):g.jsxs("div",{className:"text-slate-400 animate-pulse font-mono flex items-center gap-2",children:[re&&g.jsx("span",{className:"animate-spin text-xl",children:""}),re?"AI ...":` ${_t==null?void 0:_t.name} ...`]})})})]})]}),_===j.GAME_OVER&&g.jsx("div",{className:"absolute inset-0 z-50 bg-black/90 flex items-center justify-center p-4 backdrop-blur-md",children:g.jsxs("div",{className:"bg-slate-900 p-10 rounded-3xl shadow-2xl text-center border-2 border-slate-700 max-w-md w-full animate-bounce-in relative overflow-hidden",children:[g.jsx("style",{children:`
                        @keyframes grow-pulse {
                            0% { transform: scale(1); }
                            50% { transform: scale(1.1); }
                            100% { transform: scale(1); }
                        }
                        .animate-grow {
                            animation: grow-pulse 1.5s infinite ease-in-out;
                        }
                      `}),g.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500"}),g.jsxs("div",{className:"mb-10",children:[g.jsx("h2",{className:"text-4xl md:text-5xl font-black text-indigo-400 uppercase tracking-[0.2em] mb-4 drop-shadow-md",children:"Winner"}),g.jsx("div",{className:"text-8xl mb-4 drop-shadow-lg",children:""}),g.jsx("p",{className:"text-6xl font-black text-white drop-shadow-[0_0_15px_rgba(99,102,241,0.5)]",children:v})]}),g.jsxs("div",{className:"mb-10 p-6 bg-rose-950/40 rounded-2xl border-2 border-rose-900/50",children:[g.jsx("h2",{className:"text-4xl md:text-5xl font-black text-rose-500 uppercase tracking-[0.2em] mb-2 animate-grow drop-shadow-md",children:"Loser"}),g.jsx("div",{className:"text-5xl mb-2 grayscale opacity-80",children:""}),g.jsx("p",{className:"text-4xl font-bold text-rose-200",children:x})]}),n.isHost?g.jsxs("div",{className:"flex flex-col gap-3",children:[g.jsx(me,{onClick:hs,className:"w-full py-4 text-xl font-bold bg-indigo-600 hover:bg-indigo-500",children:" (Restart)"}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx(me,{onClick:zn,variant:"secondary",className:"flex-1",children:""}),g.jsx(me,{onClick:t,variant:"ghost",className:"flex-1 text-slate-400",children:""})]})]}):g.jsxs("div",{children:[g.jsx("p",{className:"text-slate-400 animate-pulse mb-4",children:"..."}),g.jsx(me,{onClick:t,variant:"secondary",className:"w-full",children:""})]})]})})]})]})},mx=()=>{const e=[];let t=0;for(let n=0;n<2;n++)for(const o of Oy)for(let r=1;r<=13;r++)e.push({id:`t-${t++}`,value:r,color:o,isJoker:!1});return e.push({id:"joker-1",value:0,color:"black",isJoker:!0}),e.push({id:"joker-2",value:0,color:"red",isJoker:!0}),hx(e)},hx=e=>{const t=[...e];for(let n=t.length-1;n>0;n--){const o=Math.floor(Math.random()*(n+1));[t[n],t[o]]=[t[o],t[n]]}return t},qo=e=>[...e].sort((t,n)=>t.isJoker?1:n.isJoker?-1:t.color!==n.color?t.color.localeCompare(n.color):t.value-n.value),rr=e=>e.length<3?!1:sh(e)||lh(e),Zd=e=>{if(!rr(e))return 0;const t=e.find(n=>!n.isJoker);if(sh(e)&&t)return e.length*t.value;if(lh(e)){const n=e.filter(h=>!h.isJoker).sort((h,_)=>h.value-_.value);if(n.length===0)return 0;const o=[...n].sort((h,_)=>h.value-_.value);let r=e.filter(h=>h.isJoker).length;const i=o[0].value,s=o[o.length-1].value,c=s-i+1-o.length,d=r-c;let f=[];for(let h=i;h<=s;h++)f.push(h);let m=s+1,p=i-1;for(let h=0;h<d;h++)m<=13?(f.push(m),m++):p>=1&&(f.unshift(p),p--);return f.reduce((h,_)=>h+_,0)}return 0},sh=e=>{if(e.length>4)return!1;const t=e.filter(r=>!r.isJoker);if(t.length===0)return!0;const n=t[0].value;if(t.some(r=>r.value!==n))return!1;const o=new Set;for(const r of t){if(o.has(r.color))return!1;o.add(r.color)}return!0},lh=e=>{const t=e.filter(i=>!i.isJoker);if(t.length===0)return!0;const n=t[0].color;if(t.some(i=>i.color!==n))return!1;const o=[...t].sort((i,s)=>i.value-s.value);let r=e.length-t.length;for(let i=0;i<o.length-1;i++){const s=o[i+1].value-o[i].value;if(s===0)return!1;if(s>1){const u=s-1;if(r>=u)r-=u;else return!1}}return!0},gx=(e,t,n)=>{const o=new Map,r=e.filter(u=>u.isJoker),i=e.filter(u=>!u.isJoker);i.forEach(u=>{var c;o.has(u.value)||o.set(u.value,[]),(c=o.get(u.value))==null||c.push(u)});for(const[,u]of o.entries()){const c=yx(u),d=3-c.length;if(d<=0||d<=r.length){let f=[...c],m=[];for(let p=0;p<d;p++)m.push(r[p]);if(f=[...f,...m],rr(f)){if(n)return{action:"PLAY_SET",tiles:f};if(Zd(f)>=30)return{action:"PLAY_SET",tiles:f}}}}const s={red:[],blue:[],orange:[],black:[]};i.forEach(u=>s[u.color].push(u));for(const u in s){const c=s[u].sort((d,f)=>d.value-f.value);if(c.length!==0)for(let d=0;d<c.length;d++){let f=[c[d]],m=c[d].value,p=[...r];for(let h=d+1;h<c.length;h++){const _=c[h],S=_.value-m;if(S===1)f.push(_),m=_.value;else if(S>1){const C=S-1;if(p.length>=C){for(let y=0;y<C;y++)f.push(p.pop());f.push(_),m=_.value}else break}if(f.length>=3&&rr(f)){if(n)return{action:"PLAY_SET",tiles:f};if(Zd(f)>=30)return{action:"PLAY_SET",tiles:f}}}}}if(n)for(let u=0;u<e.length;u++){const c=e[u];for(let d=0;d<t.length;d++){const m=[...t[d],c],p=vx(m);if(rr(p))return{action:"ADD_TO_SET",tiles:[c],targetSetIndex:d}}}return{action:"DRAW"}},yx=e=>{const t=new Set;return e.filter(n=>t.has(n.color)?!1:(t.add(n.color),!0))},vx=e=>{const t=e.filter(n=>!n.isJoker);return t.length>0&&t.every(n=>n.color===t[0].color)?[...e].sort((n,o)=>n.value-o.value):e},Ge=13,Xs=6,Ex=e=>{if(e.length===0)return[];const t=e.filter(s=>!s.isJoker).sort((s,u)=>s.value-u.value);if(t.length===0)return e;if(t.every(s=>s.value===t[0].value))return[...t,...e.filter(s=>s.isJoker)];const o=e.filter(s=>s.isJoker),r=[t[0]];for(let s=1;s<t.length;s++){const u=t[s-1],c=t[s],d=c.value-u.value;if(d>1){const f=d-1;for(let m=0;m<f;m++)o.length>0&&r.push(o.shift())}r.push(c)}let i=t[t.length-1].value;for(;o.length>0&&i<13;)r.push(o.shift()),i++;for(;o.length>0;)r.unshift(o.shift());return r},jd=({tile:e,selected:t,onClick:n,onDoubleClick:o,size:r="md",variant:i,draggable:s,onDragStart:u,className:c=""})=>{const d={sm:"w-6 h-8 text-sm",md:"w-10 h-14 text-xl",lg:"w-12 h-16 text-2xl"},f=i==="face-change"?{red:"text-rose-500",blue:"text-sky-400",orange:"text-amber-500",black:"text-slate-200"}:{red:"text-red-600",blue:"text-blue-600",orange:"text-orange-500",black:"text-black"},m=i==="face-change",p=m?"bg-slate-800 border-slate-600 shadow-lg shadow-black/50 ring-1 ring-white/10":"bg-[#fdf6e3] border-gray-300 shadow-[0_2px_0_0_rgba(0,0,0,0.2)]";return g.jsx("div",{draggable:s,onDragStart:u,onClick:h=>{h.stopPropagation(),n==null||n()},onDoubleClick:h=>{h.stopPropagation(),o==null||o()},className:`
                ${d[r]} rounded-md flex flex-col items-center justify-center font-black select-none cursor-grab active:cursor-grabbing transition-all duration-150 relative
                border
                ${p}
                ${t?"ring-4 ring-indigo-400 -translate-y-3 z-20 shadow-[0_0_15px_rgba(99,102,241,0.6)] scale-110":""}
                ${e.isJoker?"text-red-500":f[e.color]}
                ${c}
            `,children:e.isJoker?g.jsx("span",{className:"text-2xl",children:m?e.color==="red"?"":"":""}):g.jsxs(g.Fragment,{children:[g.jsx("span",{className:"-mb-1",children:e.value}),m&&g.jsx("div",{className:"absolute top-0.5 right-0.5 w-1.5 h-1.5 rounded-full bg-current opacity-30"})]})})},_x=({settings:e,onLeave:t})=>{var Q,X;const[n,o]=H.useState([]),[r,i]=H.useState([]),[s,u]=H.useState(0),[c,d]=H.useState(0),[f,m]=H.useState(j.LOBBY),[p,h]=H.useState(null),[_,S]=H.useState([]),[C,y]=H.useState(e.isHost?"host":"guest-temp"),v=Xs*Ge,[E,x]=H.useState(Array(v).fill(null)),[T,P]=H.useState(Array(v).fill(null)),[D,L]=H.useState(null),[A,F]=H.useState([]),[J,oe]=H.useState([]),[re,Z]=H.useState(""),[ve,ut]=H.useState(!1),[Et,V]=H.useState({}),[z,K]=H.useState(!1),[se,pe]=H.useState("number"),[$e,xe]=H.useState([]),Gt=H.useRef(null),Oe=H.useRef(null),Le=H.useRef([]),ct=H.useRef(null),In=H.useRef({players:n,currentPlayerIndex:c,myId:C,boardGrid:E,phase:f});H.useEffect(()=>{In.current={players:n,currentPlayerIndex:c,myId:C,boardGrid:E,phase:f}},[n,c,C,E,f]);const wn=e.rummikubVersion==="face-change";H.useEffect(()=>{if(e.isHost){const I=mx(),R={id:"host",name:e.playerName,isAi:!1,dice:[],diceCount:0,health:0,maxHealth:0,isEliminated:!1,avatarSeed:0,isHost:!0,hand:[],hasInitialMeld:!1},k=I.splice(0,14);R.hand=qo(k);const N=[R];if(e.mode==="single"){for(let q=1;q<e.playerCount;q++){const $=I.splice(0,14);N.push({id:`ai-${q}`,name:`Bot ${q}`,isAi:!0,dice:[],diceCount:0,health:0,maxHealth:0,isEliminated:!1,avatarSeed:q,hand:qo($),hasInitialMeld:!1})}m(j.PLAYING)}else ps();o(N),i(I),u(I.length),y("host"),F(R.hand),oe(R.hand)}else Ke();return()=>{var I;return(I=Oe.current)==null?void 0:I.destroy()}},[]),H.useEffect(()=>{if(!e.isHost||f!==j.PLAYING)return;const I=n[c];if(I&&I.isAi){const R=setTimeout(()=>{hs(I)},1500);return()=>clearTimeout(R)}},[c,f,n,E,e.isHost]);const ps=()=>{const I=new Peer(`gemini-liar-${e.roomId}`);Oe.current=I,I.on("connection",R=>{R.on("open",()=>{Le.current.push(R);const k=In.current;R.send({type:"SYNC",state:{players:k.players,boardSets:en(k.boardGrid),tilePoolCount:r.length,phase:k.phase,currentPlayerIndex:k.currentPlayerIndex}})}),R.on("data",k=>jt(k))})},Ke=()=>{const I=new Peer;Oe.current=I,I.on("open",R=>{y(R);const k=I.connect(`gemini-liar-${e.roomId}`);ct.current=k,k.on("open",()=>{k.send({type:"JOIN",player:{id:R,name:e.playerName,isAi:!1,dice:[],diceCount:0,health:0,maxHealth:0,isEliminated:!1,avatarSeed:Math.floor(Math.random()*100),hand:[],hasInitialMeld:!1}})}),k.on("data",N=>{var q,$,W;if(N.type==="SYNC"){if(N.state.players){o(N.state.players);const ee=R,de=N.state.players.find(Te=>Te.id===ee);if(de){const Te=N.state.currentPlayerIndex!==void 0?N.state.currentPlayerIndex:In.current.currentPlayerIndex;((q=N.state.players[Te])==null?void 0:q.id)!==ee&&(F(de.hand),oe(de.hand),xe([]))}}if(N.state.boardSets){const ee=zn(N.state.boardSets);x(ee);const de=N.state.currentPlayerIndex!==void 0?N.state.currentPlayerIndex:In.current.currentPlayerIndex;((W=($=N.state.players)==null?void 0:$[de])==null?void 0:W.id)!==R&&(P(ee),L(null))}N.state.tilePoolCount!==void 0&&u(N.state.tilePoolCount),N.state.logs&&S(N.state.logs),N.state.phase&&m(N.state.phase),N.state.currentPlayerIndex!==void 0&&(d(N.state.currentPlayerIndex),L(null)),N.state.roundWinner&&h(N.state.roundWinner)}else N.type==="EMOTE"?G(N.playerId,N.emoji):N.type==="RUMMIKUB_SYNC_WORKING"&&L(N.workingGrid)})})},jt=I=>{if(!e.isHost)return;const R=In.current,k=R.players;switch(I.type){case"JOIN":{if(R.phase!==j.LOBBY)return;const N=I.player,q=r.splice(0,14);N.hand=qo(q),N.hasInitialMeld=!1;const $=[...k,N];o($),i(r),u(r.length),Vt({players:$,tilePoolCount:r.length});break}case"RUMMIKUB_SYNC_WORKING":{const N=k[R.currentPlayerIndex];(N==null?void 0:N.id)!==R.myId&&L(I.workingGrid),Le.current.forEach(q=>q.send(I));break}case"RUMMIKUB_UPDATE_BOARD":{const N=R.currentPlayerIndex,q=k[N],$=I.boardSets,W=zn($);x(W),P(W),L(null);const ee=[...k];ee[N]={...ee[N],hand:I.hand},ee[N].hasInitialMeld||(ee[N].hasInitialMeld=!0),I.hand.length===0&&(h(ee[N].name),m(j.GAME_OVER),Vt({roundWinner:ee[N].name,phase:j.GAME_OVER}));const de=(N+1)%k.length;d(de),o(ee);const Te=`${q.name} `,Ie=[..._,{id:Date.now().toString(),message:Te,type:"info"}];S(Ie),Vt({players:ee,boardSets:$,currentPlayerIndex:de,logs:Ie});break}case"RUMMIKUB_DRAW":{const N=R.currentPlayerIndex,q=k[N],$=[...r],W=[...k];let ee="";if(L(null),$.length>0){const Ie=$.shift(),Qe=qo([...W[N].hand,Ie]);W[N]={...W[N],hand:Qe},ee=`${q.name} `,q.id===R.myId&&(F(Qe),oe(Qe),xe([]))}else ee=`${q.name} `;const de=(N+1)%k.length;d(de),o(W),i($),u($.length);const Te=[..._,{id:Date.now().toString(),message:ee,type:"info"}];S(Te),Vt({players:W,tilePoolCount:$.length,currentPlayerIndex:de,logs:Te});break}case"CHAT":{const N=k.find(W=>W.id===I.playerId),q={id:Date.now().toString(),message:`${N==null?void 0:N.name}: ${I.message}`,type:"chat"},$=[..._,q];S($),Vt({logs:$});break}case"EMOTE":G(I.playerId,I.emoji),Le.current.forEach(N=>{N.peer!==I.playerId&&N.send(I)});break}},Vt=I=>{const R={type:"SYNC",state:I};Le.current.forEach(k=>k.send(R))},ms=()=>{e.isHost&&(m(j.PLAYING),d(0),Vt({phase:j.PLAYING,currentPlayerIndex:0}),F(n[0].hand),oe(n[0].hand),x(zn([])),P(zn([])))},hs=I=>{if(!e.isHost)return;const R=en(E),k=gx(I.hand,R,I.hasInitialMeld);if(k.action==="DRAW")jt({type:"RUMMIKUB_DRAW"});else{let N=[...R],q=[...I.hand];if(k.action==="PLAY_SET"&&k.tiles){N.push(k.tiles);const $=new Set(k.tiles.map(W=>W.id));q=q.filter(W=>!$.has(W.id))}else if(k.action==="ADD_TO_SET"&&k.tiles&&k.targetSetIndex!==void 0){const W=[...N[k.targetSetIndex],...k.tiles],ee=W.every(Te=>W[0].color===Te.color||Te.isJoker)?W.sort((Te,Ie)=>Te.value-Ie.value):W;N[k.targetSetIndex]=ee;const de=new Set(k.tiles.map(Te=>Te.id));q=q.filter(Te=>!de.has(Te.id))}jt({type:"RUMMIKUB_UPDATE_BOARD",boardSets:N,hand:q})}},zn=I=>{let R=[],k=0,N=0;I.forEach($=>{if(N+$.length>Ge){const W=Ge-N;for(let ee=0;ee<W;ee++)R.push(null);k++,N=0}$.forEach(W=>{R.push(W),N++}),N<Ge&&(R.push(null),N++)});const q=Ge-N;for(let $=0;$<q;$++)R.push(null);for(k++;k<Xs+2;){for(let $=0;$<Ge;$++)R.push(null);k++}return R},en=I=>{const R=[];let k=[];for(let N=0;N<I.length;N++){N>0&&N%Ge===0&&k.length>0&&(R.push(k),k=[]);const q=I[N];q?k.push(q):k.length>0&&(R.push(k),k=[])}return k.length>0&&R.push(k),R},gs=I=>{xe(R=>R.includes(I)?R.filter(k=>k!==I):[...R,I].sort((k,N)=>k-N))},Jn=I=>{const R=A[I];if(!R)return;const k=new Set([I,...$e]);A.forEach((N,q)=>{if(q===I)return;const $=N.value===R.value&&N.value!==0,W=N.color===R.color&&Math.abs(N.value-R.value)===1,ee=N.isJoker||R.isJoker;($||W||ee)&&k.add(q)}),xe(Array.from(k).sort((N,q)=>N-q))},Mo=(I,R,k)=>{var N;if(R==="BOARD"){if(!(Se!=null&&Se.hasInitialMeld)){const q=(N=T[k])==null?void 0:N.id;if(E.some(W=>(W==null?void 0:W.id)===q)){I.preventDefault(),alert(" ");return}}I.dataTransfer.setData("source",JSON.stringify({source:R,index:k}))}else{let q=[k];$e.includes(k)&&(q=$e),I.dataTransfer.setData("source",JSON.stringify({source:R,indices:q}))}I.dataTransfer.effectAllowed="move"},An=(I,R,k)=>{const N=[...I],q=($,W)=>{if(W){if($>=N.length){N.push(W);return}if(N[$]===null){N[$]=W;return}else{const ee=N[$];N[$]=W,q($+1,ee)}}};return k.forEach(($,W)=>{const ee=R+W;q(ee,$)}),N},ys=(I,R)=>{if(I.preventDefault(),f!==j.PLAYING||n[c].id!==C)return;const k=I.dataTransfer.getData("source");if(!k)return;const N=JSON.parse(k),{source:q}=N;let $=[...T],W=[...A],ee=[];if(q==="BOARD"){const Ie=N.index,Qe=$[Ie];if(!Qe)return;$[Ie]=null,ee=[Qe]}else if(q==="HAND"){ee=N.indices.map(tn=>A[tn]);const Qe=new Set(ee.map(tn=>tn.id));W=W.filter(tn=>!Qe.has(tn.id)),xe([]),F(W)}for($=An($,R,ee);$.length%Ge!==0;)$.push(null);if($.slice(-Ge*2).some(Ie=>Ie!==null)||$.length<(Xs+2)*Ge)for(let Ie=0;Ie<Ge*2;Ie++)$.push(null);P($),Ht($)},ko=I=>{I.preventDefault();const R=I.dataTransfer.getData("source");if(!R)return;const{source:k,index:N}=JSON.parse(R);if(k==="BOARD"){const q=T[N];if(!q)return;const $=[...T];$[N]=null,P($),F([...A,q]),Ht($)}},Ht=I=>{var k;const R={type:"RUMMIKUB_SYNC_WORKING",workingGrid:I};e.isHost?jt(R):(k=ct.current)==null||k.send(R)},Nr=()=>{P([...E]),F([...J]),xe([]),Ht([...E])},vs=()=>{var ee;if(A.length>=J.length){alert(" ()");return}let I=en(T);if(I=I.map(Ex),!I.every(rr)){alert(" ()");return}const k=new Set(J.map(de=>de.id));if(A.map(de=>de.id).filter(de=>!k.has(de)).length>0){alert("()");return}const $=n.find(de=>de.id===C);if($&&!$.hasInitialMeld){const de=new Set(A.map(Qe=>Qe.id)),Ie=J.filter(Qe=>!de.has(Qe.id)).reduce((Qe,tn)=>Qe+(tn.isJoker?30:tn.value),0);if(Ie<30){alert(` 30  ( ${Ie} )`);return}}const W={type:"RUMMIKUB_UPDATE_BOARD",boardSets:I,hand:A};e.isHost?jt(W):(ee=ct.current)==null||ee.send(W),oe(A),xe([])},_t=()=>{var R;if(A.length!==J.length){alert("");return}Nr();const I={type:"RUMMIKUB_DRAW"};e.isHost?jt(I):(R=ct.current)==null||R.send(I)},Rr=()=>{const I=se==="number"?"color":"number";pe(I);let R=[];I==="number"?R=[...A].sort((k,N)=>k.isJoker?1:N.isJoker?-1:k.value!==N.value?k.value-N.value:k.color.localeCompare(N.color)):R=qo(A),F(R)},Se=n.find(I=>I.id===C),Mt=Se&&((Q=n[c])==null?void 0:Q.id)===C&&f===j.PLAYING,Es=Mt?T:D&&f===j.PLAYING?D:E,_s=()=>Es.map((I,R)=>{const k=Math.floor(R/Ge),N=k%2===0;return g.jsxs("div",{onDragOver:q=>q.preventDefault(),onDrop:q=>ys(q,R),className:`
                    border border-white/5 flex items-center justify-center relative min-w-[36px] min-h-[56px]
                    ${I?"":N?"bg-white/[0.02] hover:bg-white/10":"bg-transparent hover:bg-white/10"}
                    transition-colors duration-200
                    ${R%Ge===0?"border-l-white/10":""}
                    ${(R+1)%Ge===0?"border-r-white/10":""}
                `,children:[R%Ge===0&&g.jsx("div",{className:"absolute -left-4 text-[8px] text-slate-600 font-mono select-none",children:k+1}),I&&g.jsx(jd,{tile:I,size:"md",variant:e.rummikubVersion,draggable:Mt,onDragStart:q=>Mo(q,"BOARD",R),className:!Mt&&D?"opacity-90 ring-1 ring-white/20":""})]},R)}),w=()=>{var I;if(re.trim()){if(e.isHost){const R={id:Date.now().toString(),message:`Host: ${re}`,type:"chat"},k=[..._,R];S(k),Vt({logs:k})}else(I=ct.current)==null||I.send({type:"CHAT",playerId:C,message:re});Z("")}},M=I=>{var R;G(C,I),ut(!1),e.isHost?Le.current.forEach(k=>k.send({type:"EMOTE",playerId:C,emoji:I})):(R=ct.current)==null||R.send({type:"EMOTE",playerId:C,emoji:I})},G=(I,R)=>{V(k=>({...k,[I]:R})),setTimeout(()=>V(k=>{const N={...k};return delete N[I],N}),3e3)},b=()=>{const I=eu(e.roomId||"","rummikub");navigator.clipboard.writeText(I),K(!0),setTimeout(()=>K(!1),2e3)};return H.useEffect(()=>{var I;(I=Gt.current)==null||I.scrollIntoView({behavior:"smooth"})},[_]),g.jsxs("div",{className:`min-h-screen flex flex-col font-sans text-white overflow-hidden ${wn?"bg-neutral-900 bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-neutral-800 to-black":"bg-slate-900"}`,children:[g.jsxs("div",{className:`h-14 border-b flex items-center justify-between px-4 z-10 ${wn?"bg-black/50 border-amber-900/30":"bg-slate-950 border-slate-800"}`,children:[g.jsxs("span",{className:`font-bold tracking-wider ${wn?"text-amber-500":"text-rose-400"}`,children:[wn?" Rummikub Face-Change ":""," ",e.roomId&&`(Room: ${e.roomId})`]}),g.jsxs("div",{className:"flex gap-2",children:[e.isHost&&e.mode==="multiplayer"&&f===j.LOBBY&&g.jsx(me,{variant:"secondary",onClick:b,className:"text-xs h-8",children:z?"":""}),g.jsx(me,{variant:"ghost",onClick:t,className:"text-xs",children:""})]})]}),g.jsxs("div",{className:"flex-1 relative flex flex-col overflow-hidden",children:[f===j.LOBBY&&g.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 z-20 backdrop-blur-sm",children:g.jsxs("div",{className:"bg-slate-800 p-8 rounded-2xl max-w-md w-full text-center border border-slate-700 shadow-2xl",children:[g.jsxs("h2",{className:"text-2xl font-bold mb-4 text-white",children:["... (",n.length,"/",e.playerCount,")"]}),g.jsxs("div",{className:"flex justify-center gap-4 mb-8",children:[n.map(I=>g.jsxs("div",{className:"flex flex-col items-center",children:[g.jsx("div",{className:`w-12 h-12 rounded-full ${cn[I.avatarSeed%cn.length]} flex items-center justify-center font-bold`,children:I.name.charAt(0)}),g.jsx("span",{className:"text-xs mt-2 text-slate-400",children:I.name})]},I.id)),Array.from({length:Math.max(0,e.playerCount-n.length)}).map((I,R)=>g.jsx("div",{className:"w-12 h-12 rounded-full bg-slate-700 animate-pulse border-2 border-slate-600 border-dashed"},R))]}),e.isHost?g.jsx(me,{onClick:ms,className:"w-full text-lg py-3",children:""}):g.jsx("div",{className:"text-slate-500 animate-pulse",children:"..."})]})}),g.jsx("div",{className:"flex justify-center gap-4 p-2 bg-black/20 z-10",children:n.filter(I=>I.id!==C).map(I=>{var R,k,N;return g.jsxs("div",{className:`flex flex-col items-center p-2 rounded-lg transition-all ${((R=n[c])==null?void 0:R.id)===I.id?"bg-indigo-900/50 ring-1 ring-indigo-500":""}`,children:[g.jsxs("div",{className:`relative w-8 h-8 rounded-full flex items-center justify-center font-bold text-xs ${cn[I.avatarSeed%cn.length]}`,children:[I.name.charAt(0),Et[I.id]&&g.jsx("div",{className:"absolute -top-8 text-3xl animate-bounce",children:Et[I.id]})]}),g.jsx("span",{className:"text-[10px] mt-1",children:I.name}),g.jsxs("span",{className:"text-[10px] bg-slate-700 px-1 rounded text-slate-300 mt-0.5",children:[" ",((k=I.hand)==null?void 0:k.length)||0]}),!I.hasInitialMeld&&f===j.PLAYING&&g.jsx("span",{className:"text-[8px] text-amber-500",children:""}),((N=n[c])==null?void 0:N.id)===I.id&&f===j.PLAYING&&g.jsx("span",{className:"text-[9px] text-green-400 animate-pulse",children:"..."})]},I.id)})}),g.jsx("div",{className:"flex-1 overflow-auto p-4 flex justify-center items-start bg-slate-900/50",children:g.jsx("div",{className:"grid gap-y-1 p-4 bg-slate-800/50 rounded-xl border border-white/5 shadow-inner transition-all min-w-max",style:{gridTemplateColumns:`repeat(${Ge}, minmax(40px, 1fr))`},children:_s()})}),g.jsxs("div",{className:`relative p-4 border-t transition-colors z-20 ${Mt?wn?"bg-amber-900/10 border-amber-500/30":"bg-indigo-900/10 border-indigo-500/30":"bg-slate-950 border-slate-800"}`,onDragOver:I=>I.preventDefault(),onDrop:ko,children:[g.jsxs("div",{className:"absolute top-0 left-0 w-full -translate-y-full px-4 py-2 flex justify-between items-end pointer-events-none",children:[g.jsx("div",{className:"w-64 h-32 overflow-y-auto flex flex-col justify-end text-sm space-y-1 mask-linear-gradient pointer-events-auto",ref:Gt,children:_.slice(-5).map(I=>g.jsx("div",{className:"px-2 py-1 rounded bg-black/60 backdrop-blur-md text-white/90 shadow text-xs",children:I.message},I.id))}),g.jsxs("div",{className:"bg-black/60 backdrop-blur px-3 py-1 rounded-t-lg text-sm text-slate-300 border-t border-x border-slate-700",children:[": ",s]})]}),Se&&g.jsxs("div",{className:"flex flex-col gap-4 max-w-6xl mx-auto",children:[g.jsxs("div",{className:"flex flex-wrap justify-center gap-2 p-2 min-h-[90px] bg-black/20 rounded-xl border border-white/5 shadow-inner select-none",onClick:()=>xe([]),children:[A.length===0&&g.jsx("span",{className:"text-slate-500 text-sm self-center",children:""}),A.map((I,R)=>g.jsx(jd,{tile:I,variant:e.rummikubVersion,draggable:Mt,selected:$e.includes(R),onClick:()=>gs(R),onDoubleClick:()=>Jn(R),onDragStart:k=>Mo(k,"HAND",R)},I.id))]}),$e.length>0&&Mt&&g.jsxs("div",{className:"text-center text-xs text-indigo-300 -mt-2 animate-pulse",children:[" ",$e.length,"  ()"]}),g.jsxs("div",{className:"flex items-center justify-between gap-4",children:[g.jsxs("div",{className:"flex gap-2",children:[g.jsxs(me,{onClick:Rr,variant:"secondary",className:"text-xs h-10 px-3 z-30",disabled:f!==j.PLAYING,children:[": ",se==="number"?"123":"RGB"]}),!Se.hasInitialMeld&&f===j.PLAYING&&g.jsx("div",{className:"flex items-center text-xs text-amber-400 bg-amber-900/30 px-3 rounded border border-amber-900/50",children:"  (30)"})]}),Mt&&g.jsxs("div",{className:"flex gap-2 animate-fade-in-up",children:[g.jsx(me,{onClick:Nr,variant:"ghost",className:"text-slate-400 hover:text-white",children:""}),g.jsx(me,{onClick:_t,variant:"secondary",children:""}),g.jsx(me,{onClick:vs,variant:"primary",className:"px-6 bg-green-600 hover:bg-green-500 shadow-green-900/50",children:" (Confirm)"})]}),!Mt&&f===j.PLAYING&&g.jsxs("div",{className:"text-slate-500 text-sm animate-pulse ml-auto",children:[" ",(X=n[c])==null?void 0:X.name," ..."]})]})]})]}),g.jsxs("div",{className:"absolute bottom-20 left-4 z-40 flex gap-2 w-64 pointer-events-none",children:[g.jsxs("div",{className:"pointer-events-auto flex gap-2 w-full",children:[g.jsx("input",{type:"text",value:re,onChange:I=>Z(I.target.value),onKeyDown:I=>I.key==="Enter"&&w(),placeholder:"...",className:"flex-1 bg-slate-900/80 backdrop-blur border border-white/20 rounded px-3 py-1.5 text-xs text-white focus:outline-none"}),g.jsx("button",{onClick:()=>ut(!ve),className:"bg-slate-700 w-8 h-8 rounded flex items-center justify-center hover:bg-slate-600",children:""})]}),ve&&g.jsx("div",{className:"absolute bottom-10 left-0 bg-slate-800 p-2 rounded-lg grid grid-cols-4 gap-2 shadow-xl border border-slate-600 w-max pointer-events-auto",children:fi.map(I=>g.jsx("button",{onClick:()=>M(I),className:"text-xl hover:scale-125",children:I},I))})]}),f===j.GAME_OVER&&g.jsx("div",{className:"absolute inset-0 z-50 bg-black/90 flex items-center justify-center p-4 backdrop-blur-md animate-fade-in-up",children:g.jsxs("div",{className:"text-center",children:[g.jsx("h2",{className:"text-5xl font-black text-amber-400 mb-4",children:"WINNER"}),g.jsx("div",{className:"text-8xl mb-4",children:""}),g.jsx("p",{className:"text-4xl font-bold text-white mb-8",children:p}),g.jsx(me,{onClick:t,className:"text-xl px-8 py-3",children:""})]})})]})]})},Sx=()=>{const[e,t]=H.useState("hall"),[n,o]=H.useState("liar"),[r,i]=H.useState(null);H.useEffect(()=>{const f=pm();f&&(o(f.gameType),t("lobby"))},[]);const s=f=>{o(f),t("lobby")},u=()=>{t("hall"),window.history.pushState({},"",window.location.pathname)},c=f=>{i(f),t("game")},d=()=>{t("lobby"),i(null)};return g.jsxs("div",{className:"antialiased text-slate-100 selection:bg-indigo-500 selection:text-white relative",children:[e==="hall"&&g.jsx(Gy,{onSelectGame:s}),e==="lobby"&&g.jsx(Jy,{initialGameType:n,onStartGame:c,onBack:u}),e==="game"&&r&&g.jsx(g.Fragment,{children:r.gameType==="liar"?g.jsx(px,{settings:r,onLeave:d}):g.jsx(_x,{settings:r,onLeave:d})}),g.jsx("div",{className:"fixed bottom-1 right-2 text-[10px] text-slate-600 font-mono pointer-events-none z-50 opacity-60",children:"v1.2.0"})]})},ah=document.getElementById("root");if(!ah)throw new Error("Could not find root element to mount to");const Tx=Zs.createRoot(ah);Tx.render(g.jsx(Ih.StrictMode,{children:g.jsx(Sx,{})}));
